"use strict";(self.webpackChunkvendure_admin=self.webpackChunkvendure_admin||[]).push([[848],{4467:(ur,Ue,c)=>{c.r(Ue),c.d(Ue,{AddCountryToZoneDialogComponent:()=>oe,AdminDetailComponent:()=>ae,AdministratorListComponent:()=>se,CREATE_STOCK_LOCATION:()=>Aa,ChannelDetailComponent:()=>re,ChannelListComponent:()=>le,CountryDetailComponent:()=>de,CountryListComponent:()=>ce,GET_ADMINISTRATOR_DETAIL:()=>rn,GET_ADMINISTRATOR_LIST:()=>vn,GET_CHANNEL_DETAIL:()=>An,GET_CHANNEL_LIST:()=>zn,GET_COUNTRY_DETAIL:()=>ti,GET_COUNTRY_LIST:()=>gi,GET_GLOBAL_SETTINGS_DETAIL:()=>bi,GET_PAYMENT_METHOD_DETAIL:()=>Mi,GET_PAYMENT_METHOD_LIST:()=>Ui,GET_PROFILE_DETAIL:()=>Hi,GET_ROLE_DETAIL:()=>to,GET_ROLE_LIST:()=>Go,GET_SELLER_DETAIL:()=>Lo,GET_SHIPPING_METHOD_DETAIL:()=>_a,GET_SHIPPING_METHOD_LIST:()=>Ma,GET_STOCK_LOCATION_DETAIL:()=>Ya,GET_STOCK_LOCATION_LIST:()=>qa,GET_TAX_CATEGORY_DETAIL:()=>ns,GET_TAX_CATEGORY_LIST:()=>hs,GET_TAX_RATE_DETAIL:()=>Is,GET_TAX_RATE_LIST:()=>Bs,GET_ZONE_DETAIL:()=>ws,GET_ZONE_LIST:()=>mr,GET_ZONE_MEMBERS:()=>wt,GlobalSettingsComponent:()=>me,PaymentMethodDetailComponent:()=>ue,PaymentMethodListComponent:()=>pe,PermissionGridComponent:()=>q,ProfileComponent:()=>he,ProfileResolver:()=>Pe,RoleDetailComponent:()=>ge,RoleListComponent:()=>fe,SellerDetailComponent:()=>_e,SellerListComponent:()=>be,SettingsModule:()=>Q,ShippingEligibilityTestResultComponent:()=>Ce,ShippingMethodDetailComponent:()=>Te,ShippingMethodListComponent:()=>Ie,ShippingMethodTestResultComponent:()=>ve,StockLocationDetailComponent:()=>ye,StockLocationListComponent:()=>Fe,TaxCategoryDetailComponent:()=>ke,TaxCategoryListComponent:()=>Ge,TaxRateDetailComponent:()=>Re,TaxRateListComponent:()=>De,TestAddressFormComponent:()=>W,TestOrderBuilderComponent:()=>K,TestShippingMethodsComponent:()=>$e,UPDATE_STOCK_LOCATION:()=>Ba,ZoneDetailComponent:()=>Me,ZoneListComponent:()=>Se,ZoneMemberControlsDirective:()=>ne,ZoneMemberListComponent:()=>w,ZoneMemberListHeaderDirective:()=>ie,assignPaymentMethodsToChannelBulkAction:()=>st,assignShippingMethodsToChannelBulkAction:()=>pt,assignStockLocationsToChannelBulkAction:()=>ft,createRoutes:()=>Ft,deleteAdministratorsBulkAction:()=>He,deleteChannelsBulkAction:()=>Ke,deleteCountriesBulkAction:()=>We,deletePaymentMethodsBulkAction:()=>at,deleteRolesBulkAction:()=>lt,deleteSellersBulkAction:()=>dt,deleteShippingMethodsBulkAction:()=>ut,deleteStockLocationsBulkAction:()=>gt,deleteTaxCategoriesBulkAction:()=>bt,deleteTaxRatesBulkAction:()=>Ct,deleteZonesBulkAction:()=>vt,removePaymentMethodsFromChannelBulkAction:()=>rt,removeShippingMethodsFromChannelBulkAction:()=>ht,removeStockLocationsFromChannelBulkAction:()=>_t,removeZoneMembersBulkAction:()=>yt});var s=c(1139),h=c(9488),kt=c(1138),we=c(8476),Gt=c(4970),Rt=c(8609),Dt=c(6539),$t=c(1258);function Je(...i){const n=(0,$t.ms)(i);return(0,kt.N)((t,o)=>{const a=i.length,r=new Array(a);let p=i.map(()=>!1),y=!1;for(let _=0;_<a;_++)(0,Gt.Tg)(i[_]).subscribe((0,we._)(o,V=>{r[_]=V,!y&&!p[_]&&(p[_]=!0,(y=p.every(Rt.D))&&(p=null))},Dt.l));t.subscribe((0,we._)(o,_=>{if(y){const V=[_,...r];o.next(n?n(...V):V)}}))})}var b=c(2950),e=c(5220),Mt=c(1376),St=c(2559),l=c(4725),ee=c(990),Pt=c(4288),Ae=c(6022),te=c(7114),Le=c(7453),z=c(7288),$=c(5821),Ee=c(6893),Lt=c(784);class ne{constructor(n){this.templateRef=n}static#e=this.\u0275fac=function(t){return new(t||ne)(e.rXU(e.C4Q))};static#t=this.\u0275dir=e.FsC({type:ne,selectors:[["","vdrZoneMemberControls",""]]})}class ie{constructor(n){this.templateRef=n}static#e=this.\u0275fac=function(t){return new(t||ie)(e.rXU(e.C4Q))};static#t=this.\u0275dir=e.FsC({type:ie,selectors:[["","vdrZoneMemberListHeader",""]]})}var g=c(2769),m=c(1133),k=c(2703),U=c(7482),M=c(5916),S=c(4709),P=c(3202),L=c(4764),f=c(647),E=c(1470);const Et=i=>["/settings/countries",i];function jt(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",t.id," ")}}function Nt(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.createdAt,"short")," ")}}function Yt(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.createdAt,"short")," ")}}function At(i,n){if(1&i&&(e.j41(0,"a",9)(1,"span"),e.EFF(2),e.k0s(),e.nrm(3,"clr-icon",10),e.k0s()),2&i){const t=n.item;e.Y8G("routerLink",e.eq3(2,Et,t.id)),e.R7$(2),e.SpI(" ",t.name,"")}}function Bt(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",t.code," ")}}function xt(i,n){1&i&&(e.j41(0,"vdr-chip",13),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"common.enabled")))}function Ot(i,n){1&i&&(e.j41(0,"vdr-chip",14),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"common.disabled")))}function Vt(i,n){if(1&i&&e.DNE(0,xt,3,3,"vdr-chip",11)(1,Ot,3,3,"vdr-chip",12),2&i){const t=n.item;e.Y8G("ngIf",t.enabled),e.R7$(),e.Y8G("ngIf",!t.enabled)}}class w{constructor(n){this.dataService=n,this.selectedMemberIds=[],this.selectionChange=new e.bkB,this.filterTermControl=new l.MJ(""),this.currentPage=1,this.itemsPerPage=10,this.selectionManager=new s.YlH({multiSelect:!0,itemsAreEqual:(t,o)=>t.id===o.id,additiveMode:!0}),this.membersInput$=new ee.B,this.activeZoneInput$=new Pt.t(void 0),this.destroy$=new ee.B,this.refresh$=new ee.B}ngOnInit(){const n=(0,Ae.h)(this.activeZoneInput$,this.refresh$).pipe((0,te.n)(t=>this.activeZone?this.dataService.query(s.TLA,{zoneId:this.activeZone.id}).mapSingle(({zone:o})=>o?.members??[]):(0,Le.of)([])));this.members$=(0,Ae.h)(n,this.membersInput$),this.members$.pipe((0,$.s)(1)).subscribe(t=>{this.selectionManager.setCurrentItems(t?.filter(o=>this.selectedMemberIds.includes(o.id))??[])}),this.selectionManager.selectionChanges$.pipe((0,Ee.Q)(this.destroy$)).subscribe(t=>{this.selectionChange.emit(t.map(o=>o.id))}),this.filteredMembers$=(0,z.z)(this.members$,this.filterTermControl.valueChanges.pipe((0,Lt.Z)(""))).pipe((0,b.T)(([t,o])=>{if(o){const a=o?.toLocaleLowerCase()??"";return t.filter(r=>r.name.toLocaleLowerCase().includes(a)||r.code.toLocaleLowerCase().includes(a))}return t})),this.totalItems$=this.filteredMembers$.pipe((0,b.T)(t=>t.length))}ngOnChanges(n){"members"in n&&this.membersInput$.next(this.members??[]),"activeZone"in n&&this.activeZoneInput$.next(this.activeZone)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}refresh(){this.refresh$.next()}static#e=this.\u0275fac=function(t){return new(t||w)(e.rXU(s.uSP))};static#t=this.\u0275cmp=e.VBU({type:w,selectors:[["vdr-zone-member-list"]],contentQueries:function(t,o,a){if(1&t&&(e.wni(a,ie,5),e.wni(a,ne,5)),2&t){let r;e.mGM(r=e.lsd())&&(o.headerTemplate=r.first),e.mGM(r=e.lsd())&&(o.controlsTemplate=r.first)}},inputs:{locationId:"locationId",members:"members",selectedMemberIds:"selectedMemberIds",activeZone:"activeZone"},outputs:{selectionChange:"selectionChange"},features:[e.OA$],decls:24,vars:38,consts:[[3,"itemsPerPageChange","pageChange","id","items","totalItems","itemsPerPage","currentPage"],[3,"locationId","hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault"],["id","updated-at",3,"heading","hiddenByDefault"],["id","name",3,"heading","optional"],["id","code",3,"heading"],["id","enabled",3,"heading"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],["colorType","success",4,"ngIf"],["colorType","warning",4,"ngIf"],["colorType","success"],["colorType","warning"]],template:function(t,o){1&t&&(e.j41(0,"vdr-data-table-2",0),e.nI1(1,"async"),e.nI1(2,"async"),e.bIt("itemsPerPageChange",function(r){return o.itemsPerPage=r})("pageChange",function(r){return o.currentPage=r}),e.nrm(3,"vdr-bulk-action-menu",1)(4,"vdr-dt2-search",2),e.nI1(5,"translate"),e.j41(6,"vdr-dt2-column",3),e.nI1(7,"translate"),e.DNE(8,jt,1,1,"ng-template"),e.k0s(),e.j41(9,"vdr-dt2-column",4),e.nI1(10,"translate"),e.DNE(11,Nt,2,4,"ng-template"),e.k0s(),e.j41(12,"vdr-dt2-column",5),e.nI1(13,"translate"),e.DNE(14,Yt,2,4,"ng-template"),e.k0s(),e.j41(15,"vdr-dt2-column",6),e.nI1(16,"translate"),e.DNE(17,At,4,4,"ng-template"),e.k0s(),e.j41(18,"vdr-dt2-column",7),e.nI1(19,"translate"),e.DNE(20,Bt,1,1,"ng-template"),e.k0s(),e.j41(21,"vdr-dt2-column",8),e.nI1(22,"translate"),e.DNE(23,Vt,2,2,"ng-template"),e.k0s()()),2&t&&(e.Y8G("id",o.locationId)("items",e.bMT(1,20,o.filteredMembers$))("totalItems",e.bMT(2,22,o.totalItems$))("itemsPerPage",o.itemsPerPage)("currentPage",o.currentPage),e.R7$(3),e.Y8G("locationId",o.locationId)("hostComponent",o)("selectionManager",o.selectionManager),e.R7$(),e.Y8G("searchTermControl",o.filterTermControl)("searchTermPlaceholder",e.bMT(5,24,"common.search-by-name")),e.R7$(2),e.Y8G("heading",e.bMT(7,26,"common.id"))("hiddenByDefault",!0),e.R7$(3),e.Y8G("heading",e.bMT(10,28,"common.created-at"))("hiddenByDefault",!0),e.R7$(3),e.Y8G("heading",e.bMT(13,30,"common.updated-at"))("hiddenByDefault",!0),e.R7$(3),e.Y8G("heading",e.bMT(16,32,"common.name"))("optional",!1),e.R7$(3),e.Y8G("heading",e.bMT(19,34,"common.code")),e.R7$(3),e.Y8G("heading",e.bMT(22,36,"common.enabled")))},dependencies:[g.U4n,m.bT,k.Wk,U.w,M.T,S.I,P.Y,L.E,m.Jj,f.D9,E.P],styles:[".members-header[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100);position:sticky;top:0;padding:6px;z-index:5;border-bottom:1px solid var(--color-component-border-200)}.members-header[_ngcontent-%COMP%]   .header-title-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.members-header[_ngcontent-%COMP%]   .clr-input[_ngcontent-%COMP%]{width:100%}"],changeDetection:0})}const Ze=i=>({zoneName:i});function Xt(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"translate")),2&i){const t=e.XpG();e.JRh(e.i5U(1,1,"settings.add-countries-to-zone",e.eq3(4,Ze,t.zoneName)))}}function Ut(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",3),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.cancel())}),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.j41(3,"button",4),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.add())}),e.EFF(4),e.nI1(5,"translate"),e.k0s()}if(2&i){const t=e.XpG();e.R7$(),e.JRh(e.bMT(2,3,"common.cancel")),e.R7$(2),e.Y8G("disabled",!t.selectedMemberIds.length),e.R7$(),e.SpI(" ",e.i5U(5,5,"settings.add-countries-to-zone",e.eq3(8,Ze,t.zoneName))," ")}}const wt=h.J1`
    query GetZoneMembers($zoneId: ID!) {
        zone(id: $zoneId) {
            id
            createdAt
            updatedAt
            name
            members {
                createdAt
                updatedAt
                id
                name
                code
                enabled
            }
        }
    }
`;class oe{constructor(n){this.dataService=n,this.selectedMemberIds=[]}ngOnInit(){this.currentMembers$=this.dataService.query(s.TLA,{zoneId:this.zoneId}).mapSingle(({zone:n})=>n?.members??[]),this.availableCountries$=this.dataService.query(s.Is3,{options:{take:999}}).mapStream(n=>n.countries.items).pipe(Je(this.currentMembers$),(0,b.T)(([n,t])=>n.filter(o=>!t.find(a=>a.id===o.id))))}cancel(){this.resolveWith()}add(){this.resolveWith(this.selectedMemberIds)}static#e=this.\u0275fac=function(t){return new(t||oe)(e.rXU(s.uSP))};static#t=this.\u0275cmp=e.VBU({type:oe,selectors:[["vdr-add-country-to-zone-dialog"]],decls:4,vars:4,consts:[["vdrDialogTitle",""],[3,"selectionChange","members","selectedMemberIds"],["vdrDialogButtons",""],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"click","disabled"]],template:function(t,o){1&t&&(e.DNE(0,Xt,2,6,"ng-template",0),e.j41(1,"vdr-zone-member-list",1),e.nI1(2,"async"),e.bIt("selectionChange",function(r){return o.selectedMemberIds=r}),e.k0s(),e.DNE(3,Ut,6,10,"ng-template",2)),2&t&&(e.R7$(),e.Y8G("members",e.bMT(2,2,o.availableCountries$))("selectedMemberIds",o.selectedMemberIds))},dependencies:[Mt.b,St.M,w,m.Jj,f.D9],changeDetection:0})}var d=c(4500),J=c(3048),Jt=c(412),F=c(1860),Zt=c(2786),u=c(8074),T=c(3766),R=c(1548),G=c(4538),I=c(4299),v=c(6292),j=c(3394),N=c(2910),C=c(5888),Y=c(1998),A=c(1002),B=c(520),D=c(1646),Ht=c(7179);function zt(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",4),e.bIt("click",function(){e.eBV(t);const a=e.XpG().$implicit,r=e.XpG();return e.Njj(r.toggleAll(a.permissions))}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"common.toggle-all")," "))}function qt(i,n){if(1&i){const t=e.RV6();e.j41(0,"td")(1,"vdr-select-toggle",5),e.bIt("selectedChange",function(a){const r=e.eBV(t).$implicit,p=e.XpG(2);return e.Njj(p.setPermission(r.name,a))}),e.k0s()()}if(2&i){const t=n.$implicit,o=e.XpG().$implicit,a=e.XpG();e.BMQ("colspan",1===o.permissions.length?4:1),e.R7$(),e.Y8G("title",t.description)("label",t.name)("disabled",a.readonly)("selected",null==a.activePermissions?null:a.activePermissions.includes(t.name))}}function Kt(i,n){if(1&i&&(e.j41(0,"tr")(1,"td",2)(2,"div")(3,"strong"),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.j41(6,"small"),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.nrm(9,"br"),e.DNE(10,zt,3,3,"button",3),e.k0s(),e.DNE(11,qt,2,5,"td",1),e.k0s()),2&i){const t=n.$implicit,o=e.XpG();e.R7$(4),e.JRh(e.bMT(5,4,t.label)),e.R7$(3),e.JRh(e.bMT(8,6,t.description)),e.R7$(3),e.Y8G("ngIf",1<t.permissions.length&&!o.readonly),e.R7$(),e.Y8G("ngForOf",t.permissions)}}class q{constructor(){this.readonly=!1,this.permissionChange=new e.bkB}ngOnInit(){this.buildGrid()}setPermission(n,t){this.readonly||this.permissionChange.emit({permission:n,value:t})}toggleAll(n){const t=n.some(o=>!this.activePermissions.includes(o.name));for(const o of n)this.permissionChange.emit({permission:o.name,value:t})}buildGrid(){const n=new Map,t=[],o=/^(Create|Read|Update|Delete)([a-zA-Z]+)$/;for(const a of this.permissionDefinitions)if(o.test(a.name)){const p=a.name.match(o)?.[2];if(p){const y=n.get(p);y?y.push(a):n.set(p,[a])}}else a.assignable&&t.push(a);this.gridData=[...t.map(a=>({label:a.name,description:a.description,permissions:[a]})),...Array.from(n.entries()).map(([a,r])=>({label:a,description:this.extractCrudDescription(r[0]),permissions:r}))]}extractCrudDescription(n){return n.description.replace(/Grants permission to [\w]+/,"Grants permissions on")}static#e=this.\u0275fac=function(t){return new(t||q)};static#t=this.\u0275cmp=e.VBU({type:q,selectors:[["vdr-permission-grid"]],inputs:{permissionDefinitions:"permissionDefinitions",activePermissions:"activePermissions",readonly:"readonly"},outputs:{permissionChange:"permissionChange"},decls:3,vars:1,consts:[[1,"table"],[4,"ngFor","ngForOf"],[1,"permission-group","left"],["class","button-small",3,"click",4,"ngIf"],[1,"button-small",3,"click"],["size","small",3,"selectedChange","title","label","disabled","selected"]],template:function(t,o){1&t&&(e.j41(0,"table",0)(1,"tbody"),e.DNE(2,Kt,12,8,"tr",1),e.k0s()()),2&t&&(e.R7$(2),e.Y8G("ngForOf",o.gridData))},dependencies:[m.Sq,m.bT,Ht.E,f.D9],styles:["[_nghost-%COMP%]{display:block}td.permission-group[_ngcontent-%COMP%]{max-width:300px;background-color:var(--color-component-bg-200)}"],changeDetection:0})}var x=c(5505),je=c(2986);const Ne=()=>["CreateAdministrator","UpdateAdministrator"];function Wt(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.create())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("disabled",t.detailForm.invalid||t.detailForm.pristine),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.create")," ")}}function Qt(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.save())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("disabled",t.detailForm.invalid||t.detailForm.pristine),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.update")," ")}}function en(i,n){1&i&&e.DNE(0,Qt,3,4,"button",22),2&i&&e.Y8G("vdrIfPermissions","UpdateAdministrator")}function tn(i,n){if(1&i&&(e.j41(0,"vdr-card"),e.nrm(1,"vdr-page-entity-info",23),e.k0s()),2&i){const t=n.ngIf;e.R7$(),e.Y8G("entity",t)}}function nn(i,n){1&i&&(e.j41(0,"vdr-form-field",24),e.nI1(1,"translate"),e.nrm(2,"input",25),e.k0s()),2&i&&e.Y8G("label",e.bMT(1,1,"settings.password"))}function on(i,n){1&i&&(e.j41(0,"vdr-form-field",26),e.nI1(1,"translate"),e.nrm(2,"input",25),e.k0s()),2&i&&e.Y8G("label",e.bMT(1,2,"settings.password"))("readOnlyToggle",!0)}function an(i,n){if(1&i&&(e.j41(0,"vdr-card",27),e.nI1(1,"translate"),e.nrm(2,"vdr-tabbed-custom-fields",28),e.k0s()),2&i){const t=e.XpG();e.Y8G("title",e.bMT(1,3,"common.custom-fields")),e.R7$(2),e.Y8G("customFields",t.customFields)("customFieldsFormGroup",t.detailForm.get("customFields"))}}function sn(i,n){if(1&i){const t=e.RV6();e.j41(0,"li",29)(1,"button",30),e.bIt("click",function(){const a=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.selectedChannelId=a.channelId)}),e.EFF(2),e.nI1(3,"channelCodeToLabel"),e.nI1(4,"translate"),e.k0s()()}if(2&i){const t=n.$implicit,o=e.XpG();e.R7$(),e.AVh("active",o.selectedChannelId===t.channelId),e.Y8G("id",t.channelId),e.BMQ("aria-selected",o.selectedChannelId===t.channelId),e.R7$(),e.SpI(" ",e.bMT(4,7,e.bMT(3,5,t.channelCode))," ")}}const rn=h.J1`
    query GetAdministratorDetail($id: ID!) {
        administrator(id: $id) {
            ...Administrator
        }
    }
    ${s.jwW}
`;class ae extends s.wi7{getAvailableChannels(){return Object.values(this.selectedRolePermissions)}constructor(n,t,o,a){super(),this.changeDetector=n,this.dataService=t,this.formBuilder=o,this.notificationService=a,this.customFields=this.getCustomFieldConfig("Administrator"),this.detailForm=this.formBuilder.group({emailAddress:["",l.k0.required],firstName:["",l.k0.required],lastName:["",l.k0.required],password:[""],roles:[[]],customFields:this.formBuilder.group((0,s.HCD)(this.customFields))}),this.selectedRoles=[],this.selectedRolePermissions={},this.selectedChannelId=null}ngOnInit(){this.init(),this.allRoles$=this.dataService.administrator.getRoles(999).mapStream(n=>n.roles.items.filter(t=>t.code!==J.yN)),this.dataService.client.userStatus().single$.subscribe(({userStatus:n})=>{if(!n.permissions.includes(s.aXG.CreateAdministrator)&&!n.permissions.includes(s.aXG.UpdateAdministrator)){const t=this.detailForm.get("roles");t&&t.disable()}}),this.permissionDefinitions=this.serverConfigService.getPermissionDefinitions()}ngOnDestroy(){this.destroy()}rolesChanged(n){this.buildPermissionsMap()}getPermissionsForSelectedChannel(){function n(o){return Object.entries(o).filter(([a,r])=>r).map(([a,r])=>a)}if(this.selectedChannelId&&this.selectedRolePermissions[this.selectedChannelId]){return n(this.selectedRolePermissions[this.selectedChannelId].permissions)}const t=Object.values(this.selectedRolePermissions);return 0<t.length?(this.selectedChannelId=t[0].channelId,n(t[0].permissions)):[]}create(){const{emailAddress:n,firstName:t,lastName:o,password:a,customFields:r,roles:p}=this.detailForm.value;if(!(n&&t&&o&&a))return;const y={emailAddress:n,firstName:t,lastName:o,password:a,customFields:r,roleIds:p?.map(_=>_.id).filter(Jt.notNullOrUndefined)??[]};this.dataService.administrator.createAdministrator(y).subscribe(_=>{this.notificationService.success((0,d.x)("common.notify-create-success"),{entity:"Administrator"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",_.createAdministrator.id],{relativeTo:this.route})},_=>{this.notificationService.error((0,d.x)("common.notify-create-error"),{entity:"Administrator"})})}save(){this.entity$.pipe((0,$.s)(1),(0,F.Z)(({id:n})=>{const t=this.detailForm.value,o={id:n,emailAddress:t.emailAddress,firstName:t.firstName,lastName:t.lastName,password:t.password,customFields:t.customFields,roleIds:t.roles?.map(a=>a.id)};return this.dataService.administrator.updateAdministrator(o)})).subscribe(n=>{this.notificationService.success((0,d.x)("common.notify-update-success"),{entity:"Administrator"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},n=>{this.notificationService.error((0,d.x)("common.notify-update-error"),{entity:"Administrator"})})}setFormValues(n,t){this.detailForm.patchValue({emailAddress:n.emailAddress,firstName:n.firstName,lastName:n.lastName,roles:n.user.roles}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customFields"]),n);const o=this.detailForm.get("password");o&&(n.id?o.setValidators([]):o.setValidators([l.k0.required])),this.buildPermissionsMap()}buildPermissionsMap(){const n=this.detailForm.get("roles");if(n){const t=n.value,o=new Map,a=new Map;for(const r of t??[])for(const p of r.channels){const _=o.get(p.id)||new Set;r.permissions.forEach(V=>_.add(V)),o.set(p.id,_),a.set(p.id,p.code)}this.selectedRolePermissions={};for(const r of Array.from(o.keys())){const p=o.get(r),y={};for(const _ of this.serverConfigService.getPermissionDefinitions())y[_.name]=p.has(_.name);this.selectedRolePermissions[r]={channelId:r,channelCode:a.get(r),permissions:y}}}}static#e=this.\u0275fac=function(t){return new(t||ae)(e.rXU(e.gRc),e.rXU(s.uSP),e.rXU(l.ok),e.rXU(s.JEu))};static#t=this.\u0275cmp=e.VBU({type:ae,selectors:[["vdr-admin-detail"]],features:[e.Vt3],decls:45,vars:53,consts:[["updateButton",""],["locationId","administrator-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],[4,"ngIf"],[1,"form-grid"],["for","emailAddress",1,"form-grid-span",3,"label"],["id","emailAddress","type","text","formControlName","emailAddress",3,"readonly"],["for","firstName",3,"label"],["id","firstName","type","text","formControlName","firstName",3,"readonly"],["for","lastName",3,"label"],["id","lastName","type","text","formControlName","lastName",3,"readonly"],["for","password",3,"label",4,"ngIf"],["for","password",3,"label","readOnlyToggle",4,"ngIf"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","administrator-detail",3,"entity$","detailForm"],[3,"title"],["formControlName","roles","bindLabel","description",3,"change","items","multiple","hideSelected"],["role","tablist",1,"nav","mt-2"],["role","presentation","class","nav-item",4,"ngFor","ngForOf"],[3,"activePermissions","permissionDefinitions","readonly"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"],["for","password",3,"label"],["id","password","type","password","formControlName","password"],["for","password",3,"label","readOnlyToggle"],["formGroupName","customFields",3,"title"],["entityName","Administrator",3,"customFields","customFieldsFormGroup"],["role","presentation",1,"nav-item"],["type","button",1,"btn","btn-link","nav-link",3,"click","id"]],template:function(t,o){if(1&t){const a=e.RV6();e.j41(0,"vdr-page-block")(1,"vdr-action-bar"),e.nrm(2,"vdr-ab-left"),e.j41(3,"vdr-ab-right"),e.nrm(4,"vdr-action-bar-items",1),e.DNE(5,Wt,3,4,"button",2),e.nI1(6,"async"),e.DNE(7,en,1,1,"ng-template",null,0,e.C5r),e.nrm(9,"vdr-action-bar-dropdown-menu",1),e.k0s()()(),e.j41(10,"form",3)(11,"vdr-page-detail-layout")(12,"vdr-page-detail-sidebar"),e.DNE(13,tn,2,1,"vdr-card",4),e.nI1(14,"async"),e.k0s(),e.j41(15,"vdr-page-block")(16,"vdr-card")(17,"div",5)(18,"vdr-form-field",6),e.nI1(19,"translate"),e.nrm(20,"input",7),e.nI1(21,"hasPermission"),e.k0s(),e.j41(22,"vdr-form-field",8),e.nI1(23,"translate"),e.nrm(24,"input",9),e.nI1(25,"hasPermission"),e.k0s(),e.j41(26,"vdr-form-field",10),e.nI1(27,"translate"),e.nrm(28,"input",11),e.nI1(29,"hasPermission"),e.k0s(),e.DNE(30,nn,3,3,"vdr-form-field",12),e.nI1(31,"async"),e.DNE(32,on,3,4,"vdr-form-field",13),e.nI1(33,"async"),e.nI1(34,"hasPermission"),e.k0s()(),e.DNE(35,an,3,5,"vdr-card",14),e.nrm(36,"vdr-custom-detail-component-host",15),e.k0s()(),e.j41(37,"vdr-page-block")(38,"vdr-card",16),e.nI1(39,"translate"),e.j41(40,"ng-select",17),e.nI1(41,"async"),e.bIt("change",function(p){return e.eBV(a),e.Njj(o.rolesChanged(p))}),e.k0s(),e.j41(42,"ul",18),e.DNE(43,sn,5,9,"li",19),e.k0s(),e.nrm(44,"vdr-permission-grid",20),e.k0s()()()}if(2&t){const a=e.sdS(8);e.R7$(5),e.Y8G("ngIf",e.bMT(6,23,o.isNew$))("ngIfElse",a),e.R7$(5),e.Y8G("formGroup",o.detailForm),e.R7$(3),e.Y8G("ngIf",e.bMT(14,25,o.entity$)),e.R7$(5),e.Y8G("label",e.bMT(19,27,"settings.email-address-or-identifier")),e.R7$(2),e.Y8G("readonly",!e.bMT(21,29,e.lJ4(49,Ne))),e.R7$(2),e.Y8G("label",e.bMT(23,31,"settings.first-name")),e.R7$(2),e.Y8G("readonly",!e.bMT(25,33,e.lJ4(50,Ne))),e.R7$(2),e.Y8G("label",e.bMT(27,35,"settings.last-name")),e.R7$(2),e.Y8G("readonly",!e.bMT(29,37,e.lJ4(51,Ne))),e.R7$(2),e.Y8G("ngIf",e.bMT(31,39,o.isNew$)),e.R7$(2),e.Y8G("ngIf",!e.bMT(33,41,o.isNew$)&&e.bMT(34,43,e.lJ4(52,Ne))),e.R7$(3),e.Y8G("ngIf",o.customFields.length),e.R7$(),e.Y8G("entity$",o.entity$)("detailForm",o.detailForm),e.R7$(2),e.Y8G("title",e.bMT(39,45,"settings.roles")),e.R7$(2),e.Y8G("items",e.bMT(41,47,o.allRoles$))("multiple",!0)("hideSelected",!0),e.R7$(3),e.Y8G("ngForOf",o.getAvailableChannels()),e.R7$(),e.Y8G("activePermissions",o.getPermissionsForSelectedChannel())("permissionDefinitions",o.permissionDefinitions)("readonly",!0)}},dependencies:[m.Sq,m.bT,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,l.$R,Zt.vr,u.nG,u.wL,u.TX,T.l,R.K,G.V,I.p,v.T,j.W,N.L,C.e,Y.E,A.c,B.e,D.i,q,m.Jj,f.D9,x.E,je.i],styles:["ul.nav[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:hidden}"],changeDetection:0})}const He=(0,s.AfA)({location:"administrator-list",requiresPermission:i=>i.includes(s.aXG.DeleteAdministrator),getItemName:i=>i.firstName+" "+i.lastName,bulkDelete:(i,n)=>i.administrator.deleteAdministrators(n).pipe((0,b.T)(t=>t.deleteAdministrators))});var O=c(3987);const ln=()=>["CreateAdministrator"],dn=()=>["./","create"],cn=i=>["./",i];function mn(i,n){1&i&&(e.j41(0,"a",12),e.nrm(1,"clr-icon",13),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&i&&(e.Y8G("routerLink",e.lJ4(4,dn)),e.R7$(2),e.SpI(" ",e.bMT(3,2,"admin.create-new-administrator")," "))}function un(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",t.id," ")}}function pn(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.createdAt,"short")," ")}}function hn(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.updatedAt,"short")," ")}}function gn(i,n){if(1&i&&(e.j41(0,"a",14)(1,"span"),e.EFF(2),e.k0s(),e.nrm(3,"clr-icon",15),e.k0s()),2&i){const t=n.item;e.Y8G("routerLink",e.eq3(3,cn,t.id)),e.R7$(2),e.Lme("",t.firstName," ",t.lastName,"")}}function fn(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",t.emailAddress," ")}}function _n(i,n){if(1&i&&(e.j41(0,"vdr-chip"),e.EFF(1),e.k0s()),2&i){const t=n.$implicit;e.R7$(),e.JRh(t.description)}}function bn(i,n){if(1&i&&e.DNE(0,_n,2,1,"vdr-chip",16),2&i){const t=n.item;e.Y8G("ngForOf",t.user.roles)}}function Cn(i,n){if(1&i&&e.nrm(0,"vdr-dt2-custom-field-column",17),2&i){const t=n.$implicit,o=e.XpG();e.Y8G("customField",t)("sorts",o.sorts)}}const vn=h.J1`
    query GetAdministratorList($options: AdministratorListOptions) {
        administrators(options: $options) {
            items {
                ...AdministratorListItem
            }
            totalItems
        }
    }
    fragment AdministratorListItem on Administrator {
        id
        createdAt
        updatedAt
        firstName
        lastName
        emailAddress
        user {
            id
            identifier
            lastLogin
            roles {
                id
                createdAt
                updatedAt
                code
                description
            }
        }
    }
`;class se extends s.B8I{constructor(){super(),this.dataTableListId="administrator-list",this.customFields=this.getCustomFieldConfig("Administrator"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilter({name:"firstName",type:{kind:"text"},label:(0,d.x)("settings.first-name"),filterField:"firstName"}).addFilter({name:"lastName",type:{kind:"text"},label:(0,d.x)("settings.last-name"),filterField:"lastName"}).addFilter({name:"emailAddress",type:{kind:"text"},label:(0,d.x)("settings.email-address"),filterField:"emailAddress"}).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("createdAt","DESC").addSort({name:"createdAt"}).addSort({name:"updatedAt"}).addSort({name:"lastName"}).addSort({name:"emailAddress"}).addCustomFieldSorts(this.customFields).connectToRoute(this.route),super.configure({document:s.bTM,getItems:n=>n.administrators,setVariables:(n,t)=>this.createSearchQuery(n,t,this.searchTermControl.value),refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}createSearchQuery(n,t,o){let a={},r=s.umn.AND;return o&&(a={emailAddress:{contains:o},firstName:{contains:o},lastName:{contains:o}},r=s.umn.OR),{options:{skip:n,take:t,filter:{...a??{},...this.filters.createFilterInput()},sort:this.sorts.createSortInput(),filterOperator:r}}}static#e=this.\u0275fac=function(t){return new(t||se)};static#t=this.\u0275cmp=e.VBU({type:se,selectors:[["vdr-administrator-list"]],features:[e.Vt3],decls:34,vars:49,consts:[["locationId","administrator-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[1,"mt-2",3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","administrator-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","name",3,"heading","optional","sort"],["id","email-address",3,"heading","sort"],["id","roles",3,"heading"],[3,"customField","sorts",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],[4,"ngFor","ngForOf"],[3,"customField","sorts"]],template:function(t,o){1&t&&(e.j41(0,"vdr-page-block")(1,"vdr-action-bar"),e.nrm(2,"vdr-ab-left"),e.j41(3,"vdr-ab-right"),e.nrm(4,"vdr-action-bar-items",0),e.DNE(5,mn,4,5,"a",1),e.nrm(6,"vdr-action-bar-dropdown-menu",0),e.k0s()()(),e.j41(7,"vdr-data-table-2",2),e.nI1(8,"async"),e.nI1(9,"async"),e.nI1(10,"async"),e.nI1(11,"async"),e.bIt("pageChange",function(r){return o.setPageNumber(r)})("itemsPerPageChange",function(r){return o.setItemsPerPage(r)})("visibleColumnsChange",function(r){return o.setVisibleColumns(r)}),e.nrm(12,"vdr-bulk-action-menu",3)(13,"vdr-dt2-search",4),e.nI1(14,"translate"),e.j41(15,"vdr-dt2-column",5),e.nI1(16,"translate"),e.DNE(17,un,1,1,"ng-template"),e.k0s(),e.j41(18,"vdr-dt2-column",6),e.nI1(19,"translate"),e.DNE(20,pn,2,4,"ng-template"),e.k0s(),e.j41(21,"vdr-dt2-column",7),e.nI1(22,"translate"),e.DNE(23,hn,2,4,"ng-template"),e.k0s(),e.j41(24,"vdr-dt2-column",8),e.nI1(25,"translate"),e.DNE(26,gn,4,5,"ng-template"),e.k0s(),e.j41(27,"vdr-dt2-column",9),e.nI1(28,"translate"),e.DNE(29,fn,1,1,"ng-template"),e.k0s(),e.j41(30,"vdr-dt2-column",10),e.nI1(31,"translate"),e.DNE(32,bn,1,1,"ng-template"),e.k0s(),e.DNE(33,Cn,1,2,"vdr-dt2-custom-field-column",11),e.k0s()),2&t&&(e.R7$(5),e.Y8G("vdrIfPermissions",e.lJ4(48,ln)),e.R7$(2),e.Y8G("id",o.dataTableListId)("items",e.bMT(8,26,o.items$))("itemsPerPage",e.bMT(9,28,o.itemsPerPage$))("totalItems",e.bMT(10,30,o.totalItems$))("currentPage",e.bMT(11,32,o.currentPage$))("filters",o.filters),e.R7$(5),e.Y8G("hostComponent",o)("selectionManager",o.selectionManager),e.R7$(),e.Y8G("searchTermControl",o.searchTermControl)("searchTermPlaceholder",e.bMT(14,34,"catalog.filter-by-name")),e.R7$(2),e.Y8G("heading",e.bMT(16,36,"common.id"))("hiddenByDefault",!0),e.R7$(3),e.Y8G("heading",e.bMT(19,38,"common.created-at"))("hiddenByDefault",!0)("sort",o.sorts.get("createdAt")),e.R7$(3),e.Y8G("heading",e.bMT(22,40,"common.updated-at"))("hiddenByDefault",!0)("sort",o.sorts.get("updatedAt")),e.R7$(3),e.Y8G("heading",e.bMT(25,42,"common.name"))("optional",!1)("sort",o.sorts.get("lastName")),e.R7$(3),e.Y8G("heading",e.bMT(28,44,"settings.email-address"))("sort",o.sorts.get("emailAddress")),e.R7$(3),e.Y8G("heading",e.bMT(31,46,"settings.roles")),e.R7$(3),e.Y8G("ngForOf",o.customFields))},dependencies:[g.U4n,m.Sq,k.Wk,u.nG,u.wL,u.TX,T.l,U.w,I.p,v.T,M.T,S.I,P.Y,L.E,O.T,C.e,m.Jj,f.D9,E.P],styles:[".search-input[_ngcontent-%COMP%]{min-width:300px}"]})}var Tn=c(1912),X=c(9274),ze=c(52),In=c(6435),qe=c(9390),yn=c(867),Fn=c(7162);const kn=()=>["SuperAdmin","UpdateChannel"];function Gn(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",32),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.create())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("disabled",!t.saveButtonEnabled()),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.create")," ")}}function Rn(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",32),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.save())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("disabled",!t.saveButtonEnabled()),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.update")," ")}}function Dn(i,n){1&i&&e.DNE(0,Rn,3,4,"button",33),2&i&&e.Y8G("vdrIfPermissions",e.lJ4(1,kn))}function $n(i,n){if(1&i&&(e.j41(0,"vdr-card"),e.nrm(1,"vdr-page-entity-info",34),e.k0s()),2&i){const t=n.ngIf;e.R7$(),e.Y8G("entity",t)}}function Mn(i,n){if(1&i&&(e.j41(0,"vdr-form-field",35),e.nI1(1,"translate"),e.nrm(2,"input",36),e.nI1(3,"hasPermission"),e.k0s()),2&i){const t=e.XpG();e.Y8G("label",e.bMT(1,2,"common.code")),e.R7$(2),e.Y8G("readonly",!e.bMT(3,4,t.updatePermission))}}function Sn(i,n){if(1&i&&(e.j41(0,"vdr-form-item",37),e.nI1(1,"translate"),e.EFF(2),e.nI1(3,"channelCodeToLabel"),e.nI1(4,"translate"),e.k0s()),2&i){const t=e.XpG();e.Y8G("label",e.bMT(1,2,"common.code")),e.R7$(2),e.SpI(" ",e.bMT(4,6,e.bMT(3,4,null==t.entity?null:t.entity.code))," ")}}function Pn(i,n){if(1&i&&(e.j41(0,"option",38),e.EFF(1),e.k0s()),2&i){const t=n.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function Ln(i,n){if(1&i&&(e.j41(0,"option",38),e.EFF(1),e.nI1(2,"localeLanguageName"),e.nI1(3,"uppercase"),e.k0s()),2&i){const t=n.$implicit;e.Y8G("value",t),e.R7$(),e.Lme(" ",e.bMT(2,3,t)," (",e.bMT(3,5,t),") ")}}function En(i,n){if(1&i&&(e.j41(0,"option",38),e.EFF(1),e.nI1(2,"localeCurrencyName"),e.k0s()),2&i){const t=n.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",e.bMT(2,2,t)," ")}}function jn(i,n){1&i&&(e.j41(0,"clr-alert",39)(1,"clr-alert-item")(2,"span",40),e.EFF(3),e.nI1(4,"translate"),e.k0s()()()),2&i&&(e.Y8G("clrAlertClosable",!1),e.R7$(3),e.SpI(" ",e.bMT(4,2,"error.no-default-tax-zone-set")," "))}function Nn(i,n){1&i&&(e.j41(0,"clr-alert",39)(1,"clr-alert-item")(2,"span",40),e.EFF(3),e.nI1(4,"translate"),e.k0s()()()),2&i&&(e.Y8G("clrAlertClosable",!1),e.R7$(3),e.SpI(" ",e.bMT(4,2,"error.no-default-shipping-zone-set")," "))}function Yn(i,n){if(1&i&&(e.j41(0,"vdr-card",41),e.nI1(1,"translate"),e.nrm(2,"vdr-tabbed-custom-fields",42),e.k0s()),2&i){const t=e.XpG();e.Y8G("title",e.bMT(1,3,"common.custom-fields")),e.R7$(2),e.Y8G("customFields",t.customFields)("customFieldsFormGroup",t.detailForm.get("customFields"))}}const An=h.J1`
    query GetChannelDetail($id: ID!) {
        channel(id: $id) {
            ...Channel
        }
    }
    ${s.No}
`;class re extends s.wi7{constructor(n,t,o,a,r){super(),this.serverConfigService=n,this.changeDetector=t,this.dataService=o,this.formBuilder=a,this.notificationService=r,this.DEFAULT_CHANNEL_CODE=J.ky,this.customFields=this.getCustomFieldConfig("Channel"),this.detailForm=this.formBuilder.group({code:["",l.k0.required],token:["",l.k0.required],pricesIncludeTax:[!1],availableLanguageCodes:[[]],availableCurrencyCodes:[[]],defaultCurrencyCode:["",l.k0.required],defaultShippingZoneId:["",l.k0.required],defaultLanguageCode:[void 0,l.k0.required],defaultTaxZoneId:["",l.k0.required],sellerId:["",l.k0.required],customFields:this.formBuilder.group((0,s.HCD)(this.customFields))}),this.updatePermission=[s.aXG.SuperAdmin,s.aXG.UpdateChannel,s.aXG.CreateChannel]}ngOnInit(){this.init(),this.sellers$=this.dataService.settings.getSellerList().mapSingle(n=>n.sellers.items),this.availableLanguageCodes$=this.serverConfigService.getAvailableLanguages(),this.detailForm.controls.availableCurrencyCodes.valueChanges.pipe((0,Ee.Q)(this.destroy$)).subscribe(n=>{if(n){const t=this.detailForm.controls.defaultCurrencyCode.value;t&&!n.includes(t)&&this.detailForm.controls.defaultCurrencyCode.setValue(n[0])}}),this.detailForm.controls.availableLanguageCodes.valueChanges.pipe((0,Ee.Q)(this.destroy$)).subscribe(n=>{if(n){const t=this.detailForm.controls.defaultLanguageCode.value;t&&!n.includes(t)&&this.detailForm.controls.defaultLanguageCode.setValue(n[0])}})}ngOnDestroy(){this.destroy()}saveButtonEnabled(){return this.detailForm.dirty&&this.detailForm.valid}create(){if(!this.detailForm.dirty)return;const{code:n,token:t,defaultLanguageCode:o,pricesIncludeTax:a,defaultCurrencyCode:r,defaultShippingZoneId:p,defaultTaxZoneId:y,customFields:_,sellerId:V}=this.detailForm.value;if(!(n&&t&&o&&r&&p&&y))return;const Ye={code:n,token:t,defaultLanguageCode:o,pricesIncludeTax:!!a,defaultCurrencyCode:r,defaultShippingZoneId:p,defaultTaxZoneId:y,customFields:_,sellerId:V};this.dataService.settings.createChannel(Ye).pipe((0,F.Z)(({createChannel:H})=>this.dataService.auth.currentUser().single$.pipe((0,b.T)(({me:Xe})=>({me:Xe,createChannel:H})))),(0,F.Z)(({me:H,createChannel:Xe})=>this.dataService.client.updateUserChannels(H.channels).pipe((0,b.T)(()=>Xe)))).subscribe(H=>{switch(H.__typename){case"Channel":this.notificationService.success((0,d.x)("common.notify-create-success"),{entity:"Channel"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",H.id],{relativeTo:this.route});break;case"LanguageNotAvailableError":this.notificationService.error(H.message)}})}save(){if(!this.detailForm.dirty)return;const n=this.detailForm.value;this.entity$.pipe((0,$.s)(1),(0,F.Z)(t=>{const o={id:t.id,code:n.code,token:n.token,pricesIncludeTax:n.pricesIncludeTax,availableLanguageCodes:n.availableLanguageCodes,availableCurrencyCodes:n.availableCurrencyCodes,defaultCurrencyCode:n.defaultCurrencyCode,defaultShippingZoneId:n.defaultShippingZoneId,defaultLanguageCode:n.defaultLanguageCode,defaultTaxZoneId:n.defaultTaxZoneId,customFields:n.customFields,sellerId:n.sellerId};return this.dataService.settings.updateChannel(o)})).subscribe(({updateChannel:t})=>{switch(t.__typename){case"Channel":this.notificationService.success((0,d.x)("common.notify-update-success"),{entity:"Channel"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck();break;case"LanguageNotAvailableError":this.notificationService.error(t.message)}})}setFormValues(n,t){if(this.detailForm.patchValue({code:n.code,token:n.token||this.generateToken(),pricesIncludeTax:n.pricesIncludeTax,availableLanguageCodes:n.availableLanguageCodes,availableCurrencyCodes:n.availableCurrencyCodes,defaultCurrencyCode:n.defaultCurrencyCode,defaultShippingZoneId:n.defaultShippingZone?.id??"",defaultLanguageCode:n.defaultLanguageCode,defaultTaxZoneId:n.defaultTaxZone?.id??"",sellerId:n.seller?.id??""}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customFields"]),n),n.code===J.ky){const o=this.detailForm.get("code");o&&o.disable()}}generateToken(){return Array.from(crypto.getRandomValues(new Uint8Array(10))).map(n=>n.toString(16).padStart(2,"0")).join("")}static#e=this.\u0275fac=function(t){return new(t||re)(e.rXU(s.BBL),e.rXU(e.gRc),e.rXU(s.uSP),e.rXU(l.ok),e.rXU(s.JEu))};static#t=this.\u0275cmp=e.VBU({type:re,selectors:[["vdr-channel-detail"]],features:[e.Vt3],decls:70,vars:74,consts:[["updateButton",""],["locationId","channel-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],[4,"ngIf"],[1,"form-grid"],["class","form-grid-span","for","code",3,"label",4,"ngIf"],["class","form-grid-span",3,"label",4,"ngIf"],["for","token",3,"label"],["id","token","type","text","formControlName","token",3,"readonly"],["for","sellerId",3,"label"],["name","sellerId","formControlName","sellerId",3,"vdrDisabled"],["selected","","value","",2,"display","none"],[3,"value",4,"ngFor","ngForOf"],["for","availableLanguageCodes",3,"label"],["formControlName","availableLanguageCodes",3,"languageCodes"],["for","availableCurrencyCodes",3,"label"],["formControlName","availableCurrencyCodes"],[3,"title"],["for","defaultLanguage",3,"label"],["name","defaultLanguageCode","formControlName","defaultLanguageCode",3,"vdrDisabled"],["for","defaultCurrency",3,"label"],["name","defaultCurrencyCode","formControlName","defaultCurrencyCode",3,"vdrDisabled"],["for","defaultTaxZoneId",3,"label"],["formControlName","defaultTaxZoneId",3,"vdrDisabled"],["clrAlertType","danger",3,"clrAlertClosable",4,"ngIf"],["for","defaultShippingZoneId",3,"label"],["name","defaultShippingZoneId","formControlName","defaultShippingZoneId",3,"vdrDisabled"],["for","pricesIncludeTax",3,"label"],["type","checkbox","clrToggle","","id","pricesIncludeTax","formControlName","pricesIncludeTax",3,"vdrDisabled"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","channel-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"],["for","code",1,"form-grid-span",3,"label"],["id","code","type","text","formControlName","code",3,"readonly"],[1,"form-grid-span",3,"label"],[3,"value"],["clrAlertType","danger",3,"clrAlertClosable"],[1,"alert-text"],["formGroupName","customFields",3,"title"],["entityName","Channel",3,"customFields","customFieldsFormGroup"]],template:function(t,o){if(1&t&&(e.j41(0,"vdr-page-block")(1,"vdr-action-bar"),e.nrm(2,"vdr-ab-left"),e.j41(3,"vdr-ab-right"),e.nrm(4,"vdr-action-bar-items",1),e.DNE(5,Gn,3,4,"button",2),e.nI1(6,"async"),e.DNE(7,Dn,1,2,"ng-template",null,0,e.C5r),e.nrm(9,"vdr-action-bar-dropdown-menu",1),e.k0s()()(),e.j41(10,"form",3)(11,"vdr-page-detail-layout")(12,"vdr-page-detail-sidebar"),e.DNE(13,$n,2,1,"vdr-card",4),e.nI1(14,"async"),e.k0s(),e.j41(15,"vdr-page-block")(16,"vdr-card")(17,"div",5),e.DNE(18,Mn,4,6,"vdr-form-field",6)(19,Sn,5,8,"vdr-form-item",7),e.j41(20,"vdr-form-field",8),e.nI1(21,"translate"),e.nrm(22,"input",9),e.nI1(23,"hasPermission"),e.k0s(),e.j41(24,"vdr-form-field",10),e.nI1(25,"translate"),e.j41(26,"select",11),e.nI1(27,"hasPermission"),e.nrm(28,"option",12),e.DNE(29,Pn,2,2,"option",13),e.nI1(30,"async"),e.k0s()(),e.j41(31,"vdr-form-field",14),e.nI1(32,"translate"),e.nrm(33,"vdr-language-code-selector",15),e.nI1(34,"async"),e.k0s(),e.j41(35,"vdr-form-field",16),e.nI1(36,"translate"),e.nrm(37,"vdr-currency-code-selector",17),e.k0s()()(),e.j41(38,"vdr-card",18),e.nI1(39,"translate"),e.j41(40,"div",5)(41,"vdr-form-field",19),e.nI1(42,"translate"),e.j41(43,"select",20),e.nI1(44,"hasPermission"),e.DNE(45,Ln,4,7,"option",13),e.k0s()(),e.j41(46,"vdr-form-field",21),e.nI1(47,"translate"),e.j41(48,"select",22),e.nI1(49,"hasPermission"),e.DNE(50,En,3,4,"option",13),e.k0s()(),e.j41(51,"div")(52,"vdr-form-field",23),e.nI1(53,"translate"),e.nrm(54,"vdr-zone-selector",24),e.nI1(55,"hasPermission"),e.k0s(),e.DNE(56,jn,5,4,"clr-alert",25),e.k0s(),e.j41(57,"div")(58,"vdr-form-field",26),e.nI1(59,"translate"),e.nrm(60,"vdr-zone-selector",27),e.nI1(61,"hasPermission"),e.k0s(),e.DNE(62,Nn,5,4,"clr-alert",25),e.k0s(),e.j41(63,"vdr-form-field",28),e.nI1(64,"translate"),e.j41(65,"clr-toggle-wrapper"),e.nrm(66,"input",29),e.nI1(67,"hasPermission"),e.k0s()()()(),e.DNE(68,Yn,3,5,"vdr-card",30),e.nrm(69,"vdr-custom-detail-component-host",31),e.k0s()()()),2&t){const a=e.sdS(8);e.R7$(5),e.Y8G("ngIf",e.bMT(6,32,o.isNew$))("ngIfElse",a),e.R7$(5),e.Y8G("formGroup",o.detailForm),e.R7$(3),e.Y8G("ngIf",e.bMT(14,34,o.entity$)),e.R7$(5),e.Y8G("ngIf",(null==o.entity?null:o.entity.code)!==o.DEFAULT_CHANNEL_CODE),e.R7$(),e.Y8G("ngIf",(null==o.entity?null:o.entity.code)===o.DEFAULT_CHANNEL_CODE),e.R7$(),e.Y8G("label",e.bMT(21,36,"settings.channel-token")),e.R7$(2),e.Y8G("readonly",!e.bMT(23,38,o.updatePermission)),e.R7$(2),e.Y8G("label",e.bMT(25,40,"common.seller")),e.R7$(2),e.Y8G("vdrDisabled",!e.bMT(27,42,o.updatePermission)),e.R7$(3),e.Y8G("ngForOf",e.bMT(30,44,o.sellers$)),e.R7$(2),e.Y8G("label",e.bMT(32,46,"common.available-languages")),e.R7$(2),e.Y8G("languageCodes",e.bMT(34,48,o.availableLanguageCodes$)),e.R7$(2),e.Y8G("label",e.bMT(36,50,"common.available-currencies")),e.R7$(3),e.Y8G("title",e.bMT(39,52,"settings.defaults")),e.R7$(3),e.Y8G("label",e.bMT(42,54,"common.default-language")),e.R7$(2),e.Y8G("vdrDisabled",!e.bMT(44,56,o.updatePermission)),e.R7$(2),e.Y8G("ngForOf",o.detailForm.value.availableLanguageCodes),e.R7$(),e.Y8G("label",e.bMT(47,58,"settings.default-currency")),e.R7$(2),e.Y8G("vdrDisabled",!e.bMT(49,60,o.updatePermission)),e.R7$(2),e.Y8G("ngForOf",o.detailForm.value.availableCurrencyCodes),e.R7$(2),e.Y8G("label",e.bMT(53,62,"settings.default-tax-zone")),e.R7$(2),e.Y8G("vdrDisabled",!e.bMT(55,64,o.updatePermission)),e.R7$(2),e.Y8G("ngIf",o.detailForm.value.code&&!o.detailForm.value.defaultTaxZoneId),e.R7$(2),e.Y8G("label",e.bMT(59,66,"settings.default-shipping-zone")),e.R7$(2),e.Y8G("vdrDisabled",!e.bMT(61,68,o.updatePermission)),e.R7$(2),e.Y8G("ngIf",o.detailForm.value.code&&!o.detailForm.value.defaultShippingZoneId),e.R7$(),e.Y8G("label",e.bMT(64,70,"settings.prices-include-tax")),e.R7$(3),e.Y8G("vdrDisabled",!e.bMT(67,72,o.updatePermission)),e.R7$(2),e.Y8G("ngIf",o.customFields.length),e.R7$(),e.Y8G("entity$",o.entity$)("detailForm",o.detailForm)}},dependencies:[g.k8k,g.Bw1,g.tQl,g.Jej,g.eAx,m.Sq,m.bT,l.qT,l.xH,l.y7,l.me,l.Zm,l.wz,l.BC,l.cb,l.j4,l.JD,l.$R,u.nG,u.wL,u.TX,T.l,R.K,G.V,Tn.N,I.p,v.T,X.y,j.W,N.L,C.e,Y.E,A.c,B.e,D.i,ze.t,In.h,qe.y,m.Jj,m.Pc,f.D9,yn.$,x.E,je.i,Fn.s],styles:["clr-alert[_ngcontent-%COMP%]{max-width:30rem;margin-bottom:12px}"],changeDetection:0})}const Ke=(0,s.AfA)({location:"channel-list",requiresPermission:i=>i.includes(s.aXG.SuperAdmin)||i.includes(s.aXG.DeleteChannel),getItemName:i=>i.code,bulkDelete:(i,n)=>i.settings.deleteChannels(n).pipe((0,F.Z)(({deleteChannels:t})=>i.auth.currentUser().single$.pipe((0,b.T)(({me:o})=>({me:o,deleteChannels:t})))),(0,F.Z)(({me:t,deleteChannels:o})=>i.client.updateUserChannels(t.channels).pipe((0,b.T)(()=>o))))}),Bn=()=>["SuperAdmin","CreateChannel"],xn=()=>["./","create"],On=i=>["./",i];function Vn(i,n){1&i&&(e.j41(0,"a",11),e.nrm(1,"clr-icon",12),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&i&&(e.Y8G("routerLink",e.lJ4(4,xn)),e.R7$(2),e.SpI(" ",e.bMT(3,2,"settings.create-new-channel")," "))}function Xn(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",t.id," ")}}function Un(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.createdAt,"short")," ")}}function wn(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.updatedAt,"short")," ")}}function Jn(i,n){if(1&i&&(e.j41(0,"a",13)(1,"span"),e.EFF(2),e.nI1(3,"channelCodeToLabel"),e.nI1(4,"translate"),e.k0s(),e.nrm(5,"clr-icon",14),e.k0s()),2&i){const t=n.item;e.Y8G("routerLink",e.eq3(6,On,t.id)),e.R7$(2),e.JRh(e.bMT(4,4,e.bMT(3,2,t.code)))}}function Zn(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",t.token," ")}}function Hn(i,n){if(1&i&&e.nrm(0,"vdr-dt2-custom-field-column",15),2&i){const t=n.$implicit,o=e.XpG();e.Y8G("customField",t)("sorts",o.sorts)}}const zn=h.J1`
    query GetChannelList($options: ChannelListOptions) {
        channels(options: $options) {
            items {
                ...Channel
            }
            totalItems
        }
    }
    ${s.No}
`;class le extends s.B8I{constructor(){super(),this.dataTableListId="channel-list",this.customFields=this.getCustomFieldConfig("Channel"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilter({name:"code",type:{kind:"text"},label:(0,d.x)("common.code"),filterField:"code"}).addFilter({name:"token",type:{kind:"text"},label:(0,d.x)("settings.channel-token"),filterField:"token"}).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("createdAt","DESC").addSort({name:"createdAt"}).addSort({name:"updatedAt"}).addSort({name:"code"}).addSort({name:"token"}).addCustomFieldSorts(this.customFields).connectToRoute(this.route),super.configure({document:s.fmr,getItems:n=>n.channels,setVariables:(n,t)=>({options:{skip:n,take:t,filter:{code:{contains:this.searchTermControl.value},...this.filters.createFilterInput()},sort:this.sorts.createSortInput()}}),refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}isDefaultChannel(n){return n===J.ky}static#e=this.\u0275fac=function(t){return new(t||le)};static#t=this.\u0275cmp=e.VBU({type:le,selectors:[["vdr-channel-list"]],features:[e.Vt3],decls:31,vars:46,consts:[["locationId","channel-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[1,"mt-2",3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","channel-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","code",3,"heading","optional","sort"],["id","channel-token",3,"heading","sort"],[3,"customField","sorts",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],[3,"customField","sorts"]],template:function(t,o){1&t&&(e.j41(0,"vdr-page-block")(1,"vdr-action-bar"),e.nrm(2,"vdr-ab-left"),e.j41(3,"vdr-ab-right"),e.nrm(4,"vdr-action-bar-items",0),e.DNE(5,Vn,4,5,"a",1),e.nrm(6,"vdr-action-bar-dropdown-menu",0),e.k0s()()(),e.j41(7,"vdr-data-table-2",2),e.nI1(8,"async"),e.nI1(9,"async"),e.nI1(10,"async"),e.nI1(11,"async"),e.bIt("pageChange",function(r){return o.setPageNumber(r)})("itemsPerPageChange",function(r){return o.setItemsPerPage(r)})("visibleColumnsChange",function(r){return o.setVisibleColumns(r)}),e.nrm(12,"vdr-bulk-action-menu",3)(13,"vdr-dt2-search",4),e.nI1(14,"translate"),e.j41(15,"vdr-dt2-column",5),e.nI1(16,"translate"),e.DNE(17,Xn,1,1,"ng-template"),e.k0s(),e.j41(18,"vdr-dt2-column",6),e.nI1(19,"translate"),e.DNE(20,Un,2,4,"ng-template"),e.k0s(),e.j41(21,"vdr-dt2-column",7),e.nI1(22,"translate"),e.DNE(23,wn,2,4,"ng-template"),e.k0s(),e.j41(24,"vdr-dt2-column",8),e.nI1(25,"translate"),e.DNE(26,Jn,6,8,"ng-template"),e.k0s(),e.j41(27,"vdr-dt2-column",9),e.nI1(28,"translate"),e.DNE(29,Zn,1,1,"ng-template"),e.k0s(),e.DNE(30,Hn,1,2,"vdr-dt2-custom-field-column",10),e.k0s()),2&t&&(e.R7$(5),e.Y8G("vdrIfPermissions",e.lJ4(45,Bn)),e.R7$(2),e.Y8G("id",o.dataTableListId)("items",e.bMT(8,25,o.items$))("itemsPerPage",e.bMT(9,27,o.itemsPerPage$))("totalItems",e.bMT(10,29,o.totalItems$))("currentPage",e.bMT(11,31,o.currentPage$))("filters",o.filters),e.R7$(5),e.Y8G("hostComponent",o)("selectionManager",o.selectionManager),e.R7$(),e.Y8G("searchTermControl",o.searchTermControl)("searchTermPlaceholder",e.bMT(14,33,"catalog.filter-by-name")),e.R7$(2),e.Y8G("heading",e.bMT(16,35,"common.id"))("hiddenByDefault",!0),e.R7$(3),e.Y8G("heading",e.bMT(19,37,"common.created-at"))("hiddenByDefault",!0)("sort",o.sorts.get("createdAt")),e.R7$(3),e.Y8G("heading",e.bMT(22,39,"common.updated-at"))("hiddenByDefault",!0)("sort",o.sorts.get("updatedAt")),e.R7$(3),e.Y8G("heading",e.bMT(25,41,"common.code"))("optional",!1)("sort",o.sorts.get("code")),e.R7$(3),e.Y8G("heading",e.bMT(28,43,"settings.channel-token"))("sort",o.sorts.get("token")),e.R7$(3),e.Y8G("ngForOf",o.customFields))},dependencies:[g.U4n,m.Sq,k.Wk,u.nG,u.wL,u.TX,T.l,I.p,v.T,M.T,S.I,P.Y,L.E,O.T,C.e,m.Jj,f.D9,je.i,E.P],changeDetection:0})}var Z=c(9356);function qn(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",15),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.create())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("disabled",t.detailForm.invalid||t.detailForm.pristine),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.create")," ")}}function Kn(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",15),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.save())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("disabled",t.detailForm.invalid||t.detailForm.pristine),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.update")," ")}}function Wn(i,n){if(1&i&&e.DNE(0,Kn,3,4,"button",16),2&i){const t=e.XpG();e.Y8G("vdrIfPermissions",t.updatePermission)}}function Qn(i,n){if(1&i&&(e.j41(0,"vdr-card"),e.nrm(1,"vdr-page-entity-info",17),e.k0s()),2&i){const t=n.ngIf;e.R7$(),e.Y8G("entity",t)}}function ei(i,n){if(1&i&&(e.j41(0,"vdr-card",18),e.nI1(1,"translate"),e.nrm(2,"vdr-tabbed-custom-fields",19),e.k0s()),2&i){const t=e.XpG();e.Y8G("title",e.bMT(1,3,"common.custom-fields")),e.R7$(2),e.Y8G("customFields",t.customFields)("customFieldsFormGroup",t.detailForm.get("customFields"))}}const ti=h.J1`
    query GetCountryDetail($id: ID!) {
        country(id: $id) {
            ...Country
        }
    }
    ${s.MCx}
`;class de extends s.wi7{constructor(n,t,o,a){super(),this.changeDetector=n,this.dataService=t,this.formBuilder=o,this.notificationService=a,this.customFields=this.getCustomFieldConfig("Region"),this.detailForm=this.formBuilder.group({code:["",l.k0.required],name:["",l.k0.required],enabled:[!0],customFields:this.formBuilder.group((0,s.HCD)(this.customFields))}),this.updatePermission=[s.aXG.UpdateSettings,s.aXG.UpdateCountry]}ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}create(){if(!this.detailForm.dirty)return;const n=this.detailForm.value,t=(0,s.vk6)({translatable:{id:"",createdAt:"",updatedAt:"",code:"",name:"",enabled:!1,translations:[]},updatedFields:n,languageCode:this.languageCode,customFieldConfig:this.customFields,defaultTranslation:{name:n.name??"",languageCode:this.languageCode}});this.dataService.settings.createCountry(t).subscribe(o=>{this.notificationService.success((0,d.x)("common.notify-create-success"),{entity:"Country"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",o.createCountry.id],{relativeTo:this.route})},o=>{this.notificationService.error((0,d.x)("common.notify-create-error"),{entity:"Country"})})}save(){(0,z.z)(this.entity$,this.languageCode$).pipe((0,$.s)(1),(0,F.Z)(([n,t])=>{const o=this.detailForm.value,a=(0,s.vk6)({translatable:n,updatedFields:o,customFieldConfig:this.customFields,languageCode:t,defaultTranslation:{name:o.name??"",languageCode:t}});return this.dataService.settings.updateCountry(a)})).subscribe(n=>{this.notificationService.success((0,d.x)("common.notify-update-success"),{entity:"Country"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},n=>{this.notificationService.error((0,d.x)("common.notify-update-error"),{entity:"Country"})})}setFormValues(n,t){const o=(0,s.RMk)(n,t);this.detailForm.patchValue({code:n.code,name:o?o.name:"",enabled:n.enabled}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customFields"]),n,o)}static#e=this.\u0275fac=function(t){return new(t||de)(e.rXU(e.gRc),e.rXU(s.uSP),e.rXU(l.ok),e.rXU(s.JEu))};static#t=this.\u0275cmp=e.VBU({type:de,selectors:[["vdr-country-detail"]],features:[e.Vt3],decls:38,vars:38,consts:[["updateButton",""],[3,"languageCodeChange","disabled","availableLanguageCodes","currentLanguageCode"],["locationId","country-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],["for","enabled",3,"label"],["type","checkbox","clrToggle","","id","enabled","formControlName","enabled",3,"vdrDisabled"],[4,"ngIf"],[1,"form-grid"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","code",3,"label"],["id","code","type","text","formControlName","code",3,"readonly"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","country-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"],["formGroupName","customFields",3,"title"],["entityName","Region",3,"customFields","customFieldsFormGroup"]],template:function(t,o){if(1&t){const a=e.RV6();e.j41(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left")(3,"vdr-language-selector",1),e.nI1(4,"async"),e.nI1(5,"async"),e.nI1(6,"async"),e.bIt("languageCodeChange",function(p){return e.eBV(a),e.Njj(o.setLanguage(p))}),e.k0s()(),e.j41(7,"vdr-ab-right"),e.nrm(8,"vdr-action-bar-items",2),e.DNE(9,qn,3,4,"button",3),e.nI1(10,"async"),e.DNE(11,Wn,1,1,"ng-template",null,0,e.C5r),e.nrm(13,"vdr-action-bar-dropdown-menu",2),e.k0s()()(),e.j41(14,"form",4)(15,"vdr-page-detail-layout")(16,"vdr-page-detail-sidebar")(17,"vdr-card")(18,"vdr-form-field",5),e.nI1(19,"translate"),e.j41(20,"clr-toggle-wrapper"),e.nrm(21,"input",6),e.nI1(22,"hasPermission"),e.k0s()()(),e.DNE(23,Qn,2,1,"vdr-card",7),e.nI1(24,"async"),e.k0s(),e.j41(25,"vdr-page-block")(26,"vdr-card")(27,"div",8)(28,"vdr-form-field",9),e.nI1(29,"translate"),e.nrm(30,"input",10),e.nI1(31,"hasPermission"),e.k0s(),e.j41(32,"vdr-form-field",11),e.nI1(33,"translate"),e.nrm(34,"input",12),e.nI1(35,"hasPermission"),e.k0s()()(),e.DNE(36,ei,3,5,"vdr-card",13),e.nrm(37,"vdr-custom-detail-component-host",14),e.k0s()()()}if(2&t){const a=e.sdS(12);e.R7$(3),e.Y8G("disabled",e.bMT(4,16,o.isNew$))("availableLanguageCodes",e.bMT(5,18,o.availableLanguages$))("currentLanguageCode",e.bMT(6,20,o.languageCode$)),e.R7$(6),e.Y8G("ngIf",e.bMT(10,22,o.isNew$))("ngIfElse",a),e.R7$(5),e.Y8G("formGroup",o.detailForm),e.R7$(4),e.Y8G("label",e.bMT(19,24,"common.enabled")),e.R7$(3),e.Y8G("vdrDisabled",!e.bMT(22,26,o.updatePermission)),e.R7$(2),e.Y8G("ngIf",e.bMT(24,28,o.entity$)),e.R7$(5),e.Y8G("label",e.bMT(29,30,"common.name")),e.R7$(2),e.Y8G("readonly",!e.bMT(31,32,o.updatePermission)),e.R7$(2),e.Y8G("label",e.bMT(33,34,"common.code")),e.R7$(2),e.Y8G("readonly",!e.bMT(35,36,o.updatePermission)),e.R7$(2),e.Y8G("ngIf",o.customFields.length),e.R7$(),e.Y8G("entity$",o.entity$)("detailForm",o.detailForm)}},dependencies:[g.Jej,g.eAx,m.bT,l.qT,l.me,l.Zm,l.BC,l.cb,l.j4,l.JD,l.$R,u.nG,u.wL,u.TX,T.l,R.K,G.V,Z.t,I.p,v.T,X.y,j.W,N.L,C.e,Y.E,A.c,B.e,D.i,m.Jj,f.D9,x.E],changeDetection:0})}const We=(0,s.AfA)({location:"country-list",requiresPermission:i=>i.includes(s.aXG.DeleteSettings)||i.includes(s.aXG.DeleteCountry),getItemName:i=>i.name,bulkDelete:(i,n)=>i.settings.deleteCountries(n).pipe((0,b.T)(t=>t.deleteCountries))}),ni=()=>["CreateSettings","CreateCountry"],ii=()=>["./","create"],oi=i=>["./",i];function ai(i,n){1&i&&(e.j41(0,"a",13),e.nrm(1,"clr-icon",14),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&i&&(e.Y8G("routerLink",e.lJ4(4,ii)),e.R7$(2),e.SpI(" ",e.bMT(3,2,"settings.create-new-country")," "))}function si(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",t.id," ")}}function ri(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.createdAt,"short")," ")}}function li(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.updatedAt,"short")," ")}}function di(i,n){if(1&i&&(e.j41(0,"a",15)(1,"span"),e.EFF(2),e.k0s(),e.nrm(3,"clr-icon",16),e.k0s()),2&i){const t=n.item;e.Y8G("routerLink",e.eq3(2,oi,t.id)),e.R7$(2),e.JRh(t.name)}}function ci(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",t.code," ")}}function mi(i,n){1&i&&(e.j41(0,"vdr-chip",19),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"common.enabled")))}function ui(i,n){1&i&&(e.j41(0,"vdr-chip",20),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"common.disabled")))}function pi(i,n){if(1&i&&e.DNE(0,mi,3,3,"vdr-chip",17)(1,ui,3,3,"vdr-chip",18),2&i){const t=n.item;e.Y8G("ngIf",t.enabled),e.R7$(),e.Y8G("ngIf",!t.enabled)}}function hi(i,n){if(1&i&&e.nrm(0,"vdr-dt2-custom-field-column",21),2&i){const t=n.$implicit,o=e.XpG();e.Y8G("customField",t)("sorts",o.sorts)}}const gi=h.J1`
    query GetCountryList($options: CountryListOptions) {
        countries(options: $options) {
            items {
                ...CountryListItem
            }
            totalItems
        }
    }
    fragment CountryListItem on Country {
        id
        createdAt
        updatedAt
        code
        name
        type
        enabled
    }
`;class ce extends s.B8I{constructor(){super(),this.dataTableListId="country-list",this.customFields=this.getCustomFieldConfig("Region"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilter({name:"name",type:{kind:"text"},label:(0,d.x)("common.name"),filterField:"name"}).addFilter({name:"code",type:{kind:"text"},label:(0,d.x)("common.code"),filterField:"code"}).addFilter({name:"enabled",type:{kind:"boolean"},label:(0,d.x)("common.enabled"),filterField:"enabled"}).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("name","ASC").addSort({name:"createdAt"}).addSort({name:"updatedAt"}).addSort({name:"name"}).addSort({name:"code"}).addCustomFieldSorts(this.customFields).connectToRoute(this.route),super.configure({document:s.Is3,getItems:n=>n.countries,setVariables:(n,t)=>({options:{skip:n,take:t,filter:{name:{contains:this.searchTermControl.value},...this.filters.createFilterInput()},sort:this.sorts.createSortInput()}}),refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}static#e=this.\u0275fac=function(t){return new(t||ce)};static#t=this.\u0275cmp=e.VBU({type:ce,selectors:[["vdr-country-list"]],features:[e.Vt3],decls:37,vars:55,consts:[[3,"languageCodeChange","availableLanguageCodes","currentLanguageCode"],["locationId","country-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[1,"mt-2",3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","country-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","name",3,"heading","optional","sort"],["id","code",3,"heading","sort"],["id","enabled",3,"heading"],[3,"customField","sorts",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],["colorType","success",4,"ngIf"],["colorType","warning",4,"ngIf"],["colorType","success"],["colorType","warning"],[3,"customField","sorts"]],template:function(t,o){1&t&&(e.j41(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left")(3,"vdr-language-selector",0),e.nI1(4,"async"),e.nI1(5,"async"),e.bIt("languageCodeChange",function(r){return o.setLanguage(r)}),e.k0s()(),e.j41(6,"vdr-ab-right"),e.nrm(7,"vdr-action-bar-items",1),e.DNE(8,ai,4,5,"a",2),e.nrm(9,"vdr-action-bar-dropdown-menu",1),e.k0s()()(),e.j41(10,"vdr-data-table-2",3),e.nI1(11,"async"),e.nI1(12,"async"),e.nI1(13,"async"),e.nI1(14,"async"),e.bIt("pageChange",function(r){return o.setPageNumber(r)})("itemsPerPageChange",function(r){return o.setItemsPerPage(r)})("visibleColumnsChange",function(r){return o.setVisibleColumns(r)}),e.nrm(15,"vdr-bulk-action-menu",4)(16,"vdr-dt2-search",5),e.nI1(17,"translate"),e.j41(18,"vdr-dt2-column",6),e.nI1(19,"translate"),e.DNE(20,si,1,1,"ng-template"),e.k0s(),e.j41(21,"vdr-dt2-column",7),e.nI1(22,"translate"),e.DNE(23,ri,2,4,"ng-template"),e.k0s(),e.j41(24,"vdr-dt2-column",8),e.nI1(25,"translate"),e.DNE(26,li,2,4,"ng-template"),e.k0s(),e.j41(27,"vdr-dt2-column",9),e.nI1(28,"translate"),e.DNE(29,di,4,4,"ng-template"),e.k0s(),e.j41(30,"vdr-dt2-column",10),e.nI1(31,"translate"),e.DNE(32,ci,1,1,"ng-template"),e.k0s(),e.j41(33,"vdr-dt2-column",11),e.nI1(34,"translate"),e.DNE(35,pi,2,2,"ng-template"),e.k0s(),e.DNE(36,hi,1,2,"vdr-dt2-custom-field-column",12),e.k0s()),2&t&&(e.R7$(3),e.Y8G("availableLanguageCodes",e.bMT(4,28,o.availableLanguages$))("currentLanguageCode",e.bMT(5,30,o.contentLanguage$)),e.R7$(5),e.Y8G("vdrIfPermissions",e.lJ4(54,ni)),e.R7$(2),e.Y8G("id",o.dataTableListId)("items",e.bMT(11,32,o.items$))("itemsPerPage",e.bMT(12,34,o.itemsPerPage$))("totalItems",e.bMT(13,36,o.totalItems$))("currentPage",e.bMT(14,38,o.currentPage$))("filters",o.filters),e.R7$(5),e.Y8G("hostComponent",o)("selectionManager",o.selectionManager),e.R7$(),e.Y8G("searchTermControl",o.searchTermControl)("searchTermPlaceholder",e.bMT(17,40,"catalog.filter-by-name")),e.R7$(2),e.Y8G("heading",e.bMT(19,42,"common.id"))("hiddenByDefault",!0),e.R7$(3),e.Y8G("heading",e.bMT(22,44,"common.created-at"))("hiddenByDefault",!0)("sort",o.sorts.get("createdAt")),e.R7$(3),e.Y8G("heading",e.bMT(25,46,"common.updated-at"))("hiddenByDefault",!0)("sort",o.sorts.get("updatedAt")),e.R7$(3),e.Y8G("heading",e.bMT(28,48,"common.name"))("optional",!1)("sort",o.sorts.get("name")),e.R7$(3),e.Y8G("heading",e.bMT(31,50,"common.code"))("sort",o.sorts.get("code")),e.R7$(3),e.Y8G("heading",e.bMT(34,52,"common.enabled")),e.R7$(3),e.Y8G("ngForOf",o.customFields))},dependencies:[g.U4n,m.Sq,m.bT,k.Wk,u.nG,u.wL,u.TX,T.l,U.w,Z.t,I.p,v.T,M.T,S.I,P.Y,L.E,O.T,C.e,m.Jj,f.D9,E.P],styles:[".search-input[_ngcontent-%COMP%]{margin-top:6px;min-width:300px}"],changeDetection:0})}var Qe=c(8945);function fi(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",12),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.save())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("disabled",t.detailForm.invalid||t.detailForm.pristine),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.update")," ")}}function _i(i,n){if(1&i&&(e.j41(0,"vdr-card",13),e.nI1(1,"translate"),e.nrm(2,"vdr-tabbed-custom-fields",14),e.nI1(3,"hasPermission"),e.k0s()),2&i){const t=e.XpG();e.Y8G("title",e.bMT(1,4,"common.custom-fields")),e.R7$(2),e.Y8G("customFields",t.customFields)("customFieldsFormGroup",t.detailForm.get("customFields"))("readonly",!e.bMT(3,6,t.updatePermission))}}const bi=h.J1`
    query GetGlobalSettingsDetail {
        globalSettings {
            ...GlobalSettingsDetail
        }
    }
    fragment GlobalSettingsDetail on GlobalSettings {
        id
        createdAt
        updatedAt
        availableLanguages
        trackInventory
        outOfStockThreshold
    }
`;class me extends s.wi7{constructor(n,t,o,a){super(),this.changeDetector=n,this.dataService=t,this.formBuilder=o,this.notificationService=a,this.customFields=this.getCustomFieldConfig("GlobalSettings"),this.detailForm=this.formBuilder.group({availableLanguages:[[]],trackInventory:!1,outOfStockThreshold:[0,l.k0.required],customFields:this.formBuilder.group((0,s.HCD)(this.customFields))}),this.languageCodes=Object.values(s.sw8),this.updatePermission=[s.aXG.UpdateSettings,s.aXG.UpdateGlobalSettings]}ngOnInit(){this.init(),this.dataService.client.userStatus().single$.subscribe(({userStatus:n})=>{if(!n.permissions.includes(s.aXG.UpdateSettings)){const t=this.detailForm.get("availableLanguages");t&&t.disable()}})}ngOnDestroy(){this.destroy()}save(){this.detailForm.dirty&&this.dataService.settings.updateGlobalSettings(this.detailForm.value).pipe((0,Qe.M)(({updateGlobalSettings:n})=>{switch(n.__typename){case"GlobalSettings":this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.notificationService.success((0,d.x)("common.notify-update-success"),{entity:"Settings"});break;case"ChannelDefaultLanguageError":this.notificationService.error(n.message)}}),(0,te.n)(()=>this.serverConfigService.refreshGlobalSettings()),Je(this.dataService.client.uiState().single$)).subscribe(([{globalSettings:n},{uiState:t}])=>{const o=n.availableLanguages;o.length&&!o.includes(t.contentLanguage)&&this.dataService.client.setContentLanguage(o[0]).subscribe()})}setFormValues(n,t){this.detailForm.patchValue({availableLanguages:n.availableLanguages,trackInventory:n.trackInventory,outOfStockThreshold:n.outOfStockThreshold}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),n)}static#e=this.\u0275fac=function(t){return new(t||me)(e.rXU(e.gRc),e.rXU(s.uSP),e.rXU(l.ok),e.rXU(s.JEu))};static#t=this.\u0275cmp=e.VBU({type:me,selectors:[["vdr-global-settings"]],features:[e.Vt3],decls:27,vars:30,consts:[["locationId","global-setting-detail"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[1,"form",3,"formGroup"],[1,"form-grid"],["for","availableLanguages",3,"label","tooltip"],["formControlName","availableLanguages",3,"languageCodes"],["for","outOfStockThreshold",3,"label","tooltip"],["id","outOfStockThreshold","type","number","formControlName","outOfStockThreshold",3,"readonly"],["for","enabled",3,"label","tooltip"],["type","checkbox","clrToggle","","name","enabled","formControlName","trackInventory",3,"vdrDisabled"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","global-settings-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"click","disabled"],["formGroupName","customFields",3,"title"],["entityName","GlobalSettings",3,"customFields","customFieldsFormGroup","readonly"]],template:function(t,o){1&t&&(e.j41(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-right"),e.nrm(3,"vdr-action-bar-items",0),e.DNE(4,fi,3,4,"button",1),e.nrm(5,"vdr-action-bar-dropdown-menu",0),e.k0s()()(),e.j41(6,"form",2)(7,"vdr-page-block")(8,"vdr-card")(9,"div",3)(10,"vdr-form-field",4),e.nI1(11,"translate"),e.nI1(12,"translate"),e.nrm(13,"vdr-language-code-selector",5),e.k0s(),e.j41(14,"vdr-form-field",6),e.nI1(15,"translate"),e.nI1(16,"translate"),e.nrm(17,"input",7),e.nI1(18,"hasPermission"),e.k0s(),e.j41(19,"vdr-form-field",8),e.nI1(20,"translate"),e.nI1(21,"translate"),e.j41(22,"clr-toggle-wrapper"),e.nrm(23,"input",9),e.nI1(24,"hasPermission"),e.k0s()()()(),e.DNE(25,_i,4,8,"vdr-card",10),e.nrm(26,"vdr-custom-detail-component-host",11),e.k0s()()),2&t&&(e.R7$(4),e.Y8G("vdrIfPermissions",o.updatePermission),e.R7$(2),e.Y8G("formGroup",o.detailForm),e.R7$(4),e.Y8G("label",e.bMT(11,14,"common.available-languages"))("tooltip",e.bMT(12,16,"settings.global-available-languages-tooltip")),e.R7$(3),e.Y8G("languageCodes",o.languageCodes),e.R7$(),e.Y8G("label",e.bMT(15,18,"settings.global-out-of-stock-threshold"))("tooltip",e.bMT(16,20,"settings.global-out-of-stock-threshold-tooltip")),e.R7$(3),e.Y8G("readonly",!e.bMT(18,22,o.updatePermission)),e.R7$(2),e.Y8G("label",e.bMT(20,24,"settings.track-inventory-default"))("tooltip",e.bMT(21,26,"catalog.track-inventory-tooltip")),e.R7$(4),e.Y8G("vdrDisabled",!e.bMT(24,28,o.updatePermission)),e.R7$(2),e.Y8G("ngIf",o.customFields.length),e.R7$(),e.Y8G("entity$",o.entity$)("detailForm",o.detailForm))},dependencies:[g.Jej,g.eAx,m.bT,l.qT,l.me,l.Q0,l.Zm,l.BC,l.cb,l.j4,l.JD,l.$R,u.nG,u.TX,T.l,R.K,G.V,I.p,v.T,X.y,j.W,N.L,C.e,D.i,qe.y,f.D9,x.E],styles:["ng-select .ng-value>span{margin:0!important}  ng-select .ng-arrow-wrapper .ng-arrow{margin:0!important}  ng-select .ng-select-container>span{margin:0!important}"],changeDetection:0})}var Be=c(8250),et=c(50),xe=c(2906),tt=c(3120),nt=c(568),it=c(6515),ot=c(9430);function Ci(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.create())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("disabled",t.detailForm.pristine||t.detailForm.invalid||!t.selectedHandler),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.create")," ")}}function vi(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.save())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("disabled",t.detailForm.pristine||t.detailForm.invalid||!t.selectedHandler),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.update")," ")}}function Ti(i,n){if(1&i&&e.DNE(0,vi,3,4,"button",20),2&i){const t=e.XpG();e.Y8G("vdrIfPermissions",t.updatePermission)}}function Ii(i,n){if(1&i&&(e.j41(0,"vdr-card"),e.nrm(1,"vdr-page-entity-info",21),e.k0s()),2&i){const t=n.ngIf;e.R7$(),e.Y8G("entity",t)}}function yi(i,n){if(1&i&&(e.j41(0,"vdr-card",22),e.nI1(1,"translate"),e.nrm(2,"vdr-tabbed-custom-fields",23),e.k0s()),2&i){const t=e.XpG();e.Y8G("title",e.bMT(1,3,"common.custom-fields")),e.R7$(2),e.Y8G("customFields",t.customFields)("customFieldsFormGroup",t.detailForm.get("customFields"))}}function Fi(i,n){if(1&i){const t=e.RV6();e.j41(0,"vdr-configurable-input",24),e.nI1(1,"hasPermission"),e.bIt("remove",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.removeChecker())}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("operation",t.selectedChecker)("operationDefinition",t.selectedCheckerDefinition)("readonly",!e.bMT(1,3,t.updatePermission))}}function ki(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",29),e.bIt("click",function(){const a=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.selectChecker(a))}),e.EFF(1),e.k0s()}if(2&i){const t=n.$implicit;e.R7$(),e.SpI(" ",t.description," ")}}function Gi(i,n){if(1&i&&(e.j41(0,"div")(1,"vdr-dropdown")(2,"button",25),e.nrm(3,"clr-icon",26),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.j41(6,"vdr-dropdown-menu",27),e.DNE(7,ki,2,1,"button",28),e.k0s()()()),2&i){const t=e.XpG();e.R7$(4),e.SpI(" ",e.bMT(5,2,"common.select")," "),e.R7$(3),e.Y8G("ngForOf",t.checkers)}}function Ri(i,n){if(1&i){const t=e.RV6();e.j41(0,"vdr-configurable-input",30),e.nI1(1,"hasPermission"),e.bIt("remove",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.removeHandler())}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("operation",t.selectedHandler)("operationDefinition",t.selectedHandlerDefinition)("readonly",!e.bMT(1,3,t.updatePermission))}}function Di(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",29),e.bIt("click",function(){const a=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.selectHandler(a))}),e.EFF(1),e.k0s()}if(2&i){const t=n.$implicit;e.R7$(),e.SpI(" ",t.description," ")}}function $i(i,n){if(1&i&&(e.j41(0,"div")(1,"vdr-dropdown")(2,"button",25),e.nrm(3,"clr-icon",26),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.j41(6,"vdr-dropdown-menu",27),e.DNE(7,Di,2,1,"button",28),e.k0s()()()),2&i){const t=e.XpG();e.R7$(4),e.SpI(" ",e.bMT(5,2,"common.select")," "),e.R7$(3),e.Y8G("ngForOf",t.handlers)}}const Mi=h.J1`
    query GetPaymentMethodDetail($id: ID!) {
        paymentMethod(id: $id) {
            ...PaymentMethod
        }
    }
    ${s.i49}
`;class ue extends s.wi7{constructor(n,t,o,a){super(),this.changeDetector=n,this.dataService=t,this.formBuilder=o,this.notificationService=a,this.customFields=this.getCustomFieldConfig("PaymentMethod"),this.detailForm=this.formBuilder.group({code:["",l.k0.required],name:["",l.k0.required],description:"",enabled:[!0,l.k0.required],checker:{},handler:{},customFields:this.formBuilder.group((0,s.HCD)(this.customFields))}),this.checkers=[],this.handlers=[],this.updatePermission=[s.aXG.UpdateSettings,s.aXG.UpdatePaymentMethod]}ngOnInit(){this.init(),this.dataService.settings.getPaymentMethodOperations().single$.subscribe(n=>{this.checkers=n.paymentMethodEligibilityCheckers,this.handlers=n.paymentMethodHandlers,this.changeDetector.markForCheck(),this.selectedCheckerDefinition=n.paymentMethodEligibilityCheckers.find(t=>t.code===this.entity?.checker?.code),this.selectedHandlerDefinition=n.paymentMethodHandlers.find(t=>t.code===this.entity?.handler?.code)})}ngOnDestroy(){this.destroy()}updateCode(n,t){if(!n){const o=this.detailForm.get("code");o&&o.pristine&&o.setValue((0,Be.J)(t,"-"))}}selectChecker(n){this.selectedCheckerDefinition=n,this.selectedChecker=(0,s.N9n)(n);const t=this.detailForm.get("checker");t&&(t.clearValidators(),t.updateValueAndValidity({onlySelf:!0}),t.patchValue(this.selectedChecker)),this.detailForm.markAsDirty()}selectHandler(n){this.selectedHandlerDefinition=n,this.selectedHandler=(0,s.N9n)(n);const t=this.detailForm.get("handler");t&&(t.clearValidators(),t.updateValueAndValidity({onlySelf:!0}),t.patchValue(this.selectedHandler)),this.detailForm.markAsDirty()}removeChecker(){this.selectedChecker=null,this.detailForm.markAsDirty()}removeHandler(){this.selectedHandler=null,this.detailForm.markAsDirty()}create(){const n=this.selectedChecker,t=this.selectedHandler;if(!t)return;const o=this.getUpdatedPaymentMethod({id:"",createdAt:"",updatedAt:"",name:"",code:"",description:"",enabled:!0,checker:void 0,handler:void 0,translations:[]},this.detailForm,this.languageCode,t,n);this.dataService.settings.createPaymentMethod(o).subscribe(a=>{this.notificationService.success((0,d.x)("common.notify-create-success"),{entity:"PaymentMethod"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",a.createPaymentMethod.id],{relativeTo:this.route})},a=>{this.notificationService.error((0,d.x)("common.notify-create-error"),{entity:"PaymentMethod"})})}save(){const n=this.selectedChecker,t=this.selectedHandler;t&&(0,z.z)(this.entity$,this.languageCode$).pipe((0,$.s)(1),(0,F.Z)(([o,a])=>{const r=this.getUpdatedPaymentMethod(o,this.detailForm,a,t,n);return this.dataService.settings.updatePaymentMethod(r)})).subscribe(o=>{this.notificationService.success((0,d.x)("common.notify-update-success"),{entity:"PaymentMethod"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},o=>{this.notificationService.error((0,d.x)("common.notify-update-error"),{entity:"PaymentMethod"})})}getUpdatedPaymentMethod(n,t,o,a,r){return{...(0,s.vk6)({translatable:n,updatedFields:t.value,customFieldConfig:this.customFields,languageCode:o,defaultTranslation:{languageCode:o,name:n.name||"",description:n.description||""}}),checker:r?(0,s.GfA)(r,t.value.checker):null,handler:(0,s.GfA)(a,t.value.handler)}}setFormValues(n,t){const o=(0,s.RMk)(n,t);this.detailForm.patchValue({name:o?.name,code:n.code,description:o?.description,enabled:n.enabled,checker:n.checker||{},handler:n.handler||{}}),this.selectedChecker||(this.selectedChecker=n.checker&&{code:n.checker.code,args:n.checker.args.map(a=>({...a,value:(0,s.gfn)(a.value)}))}),this.selectedHandler||(this.selectedHandler=n.handler&&{code:n.handler.code,args:n.handler.args.map(a=>({...a,value:(0,s.gfn)(a.value)}))}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),n,o)}static#e=this.\u0275fac=function(t){return new(t||ue)(e.rXU(e.gRc),e.rXU(s.uSP),e.rXU(l.ok),e.rXU(s.JEu))};static#t=this.\u0275cmp=e.VBU({type:ue,selectors:[["vdr-payment-method-detail"]],features:[e.Vt3],decls:50,vars:57,consts:[["updateButton",""],[3,"languageCodeChange","disabled","availableLanguageCodes","currentLanguageCode"],["locationId","payment-method-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],["for","description",3,"label"],["type","checkbox","clrToggle","","id","enabled","formControlName","enabled",3,"vdrDisabled"],[4,"ngIf"],[1,"form-grid"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"input","readonly"],["for","code",3,"label","readOnlyToggle"],["id","code","type","text","formControlName","code",3,"readonly"],["formControlName","description",1,"form-grid-span",3,"readonly","label"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","payment-method-detail",3,"entity$","detailForm"],[3,"title"],["formControlName","checker",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],["formControlName","handler",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"],["formGroupName","customFields",3,"title"],["entityName","PaymentMethod",3,"customFields","customFieldsFormGroup"],["formControlName","checker",3,"remove","operation","operationDefinition","readonly"],["vdrDropdownTrigger","",1,"btn","btn-outline"],["shape","plus"],["vdrPosition","bottom-left"],["type","button","vdrDropdownItem","",3,"click",4,"ngFor","ngForOf"],["type","button","vdrDropdownItem","",3,"click"],["formControlName","handler",3,"remove","operation","operationDefinition","readonly"]],template:function(t,o){if(1&t){const a=e.RV6();e.j41(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left")(3,"vdr-language-selector",1),e.nI1(4,"async"),e.nI1(5,"async"),e.nI1(6,"async"),e.bIt("languageCodeChange",function(p){return e.eBV(a),e.Njj(o.setLanguage(p))}),e.k0s()(),e.j41(7,"vdr-ab-right"),e.nrm(8,"vdr-action-bar-items",2),e.DNE(9,Ci,3,4,"button",3),e.nI1(10,"async"),e.DNE(11,Ti,1,1,"ng-template",null,0,e.C5r),e.nrm(13,"vdr-action-bar-dropdown-menu",2),e.k0s()()(),e.j41(14,"form",4)(15,"vdr-page-detail-layout")(16,"vdr-page-detail-sidebar")(17,"vdr-card")(18,"vdr-form-field",5),e.nI1(19,"translate"),e.j41(20,"clr-toggle-wrapper"),e.nrm(21,"input",6),e.nI1(22,"hasPermission"),e.k0s()()(),e.DNE(23,Ii,2,1,"vdr-card",7),e.nI1(24,"async"),e.k0s(),e.j41(25,"vdr-page-block")(26,"vdr-card")(27,"div",8)(28,"vdr-form-field",9),e.nI1(29,"translate"),e.j41(30,"input",10),e.nI1(31,"hasPermission"),e.bIt("input",function(p){return e.eBV(a),e.Njj(o.updateCode(null==o.entity?null:o.entity.code,p.target.value))}),e.k0s()(),e.j41(32,"vdr-form-field",11),e.nI1(33,"translate"),e.nI1(34,"hasPermission"),e.nrm(35,"input",12),e.nI1(36,"hasPermission"),e.k0s(),e.nrm(37,"vdr-rich-text-editor",13),e.nI1(38,"hasPermission"),e.nI1(39,"translate"),e.k0s()(),e.DNE(40,yi,3,5,"vdr-card",14),e.nrm(41,"vdr-custom-detail-component-host",15),e.j41(42,"vdr-card",16),e.nI1(43,"translate"),e.DNE(44,Fi,2,5,"vdr-configurable-input",17)(45,Gi,8,4,"div",7),e.k0s(),e.j41(46,"vdr-card",16),e.nI1(47,"translate"),e.DNE(48,Ri,2,5,"vdr-configurable-input",18)(49,$i,8,4,"div",7),e.k0s()()()()}if(2&t){const a=e.sdS(12);e.R7$(3),e.Y8G("disabled",e.bMT(4,25,o.isNew$))("availableLanguageCodes",e.bMT(5,27,o.availableLanguages$))("currentLanguageCode",e.bMT(6,29,o.languageCode$)),e.R7$(6),e.Y8G("ngIf",e.bMT(10,31,o.isNew$))("ngIfElse",a),e.R7$(5),e.Y8G("formGroup",o.detailForm),e.R7$(4),e.Y8G("label",e.bMT(19,33,"common.enabled")),e.R7$(3),e.Y8G("vdrDisabled",!e.bMT(22,35,o.updatePermission)),e.R7$(2),e.Y8G("ngIf",e.bMT(24,37,o.entity$)),e.R7$(5),e.Y8G("label",e.bMT(29,39,"common.name")),e.R7$(2),e.Y8G("readonly",!e.bMT(31,41,o.updatePermission)),e.R7$(2),e.Y8G("label",e.bMT(33,43,"common.code"))("readOnlyToggle",e.bMT(34,45,o.updatePermission)),e.R7$(3),e.Y8G("readonly",!e.bMT(36,47,o.updatePermission)),e.R7$(2),e.Y8G("readonly",!e.bMT(38,49,o.updatePermission))("label",e.bMT(39,51,"common.description")),e.R7$(3),e.Y8G("ngIf",o.customFields.length),e.R7$(),e.Y8G("entity$",o.entity$)("detailForm",o.detailForm),e.R7$(),e.Y8G("title",e.bMT(43,53,"settings.payment-eligibility-checker")),e.R7$(2),e.Y8G("ngIf",o.selectedChecker&&o.selectedCheckerDefinition),e.R7$(),e.Y8G("ngIf",!o.selectedChecker||!o.selectedCheckerDefinition),e.R7$(),e.Y8G("title",e.bMT(47,55,"settings.payment-handler")),e.R7$(2),e.Y8G("ngIf",o.selectedHandler&&o.selectedHandlerDefinition),e.R7$(),e.Y8G("ngIf",!o.selectedHandler||!o.selectedHandlerDefinition)}},dependencies:[g.U4n,g.Jej,g.eAx,m.Sq,m.bT,l.qT,l.me,l.Zm,l.BC,l.cb,l.j4,l.JD,l.$R,u.nG,u.wL,u.TX,T.l,et.h,R.K,G.V,Z.t,xe.q,tt.P,nt.q,it.j,ot.M,I.p,v.T,X.y,j.W,N.L,C.e,Y.E,A.c,B.e,D.i,m.Jj,f.D9,x.E],changeDetection:0})}const at=(0,s.AfA)({location:"payment-method-list",requiresPermission:i=>i.includes(s.aXG.DeletePaymentMethod)||i.includes(s.aXG.DeleteSettings),getItemName:i=>i.name,shouldRetryItem:(i,n)=>!!i.message,bulkDelete:(i,n,t)=>i.settings.deletePaymentMethods(n,t).pipe((0,b.T)(o=>o.deletePaymentMethods))}),st=(h.J1`
    mutation AssignPaymentMethodsToChannel($input: AssignPaymentMethodsToChannelInput!) {
        assignPaymentMethodsToChannel(input: $input) {
            id
            name
        }
    }
`,h.J1`
    mutation RemovePaymentMethodsFromChannel($input: RemovePaymentMethodsFromChannelInput!) {
        removePaymentMethodsFromChannel(input: $input) {
            id
            name
        }
    }
`,(0,s.oUe)({location:"payment-method-list",requiresPermission:i=>i.includes(s.aXG.UpdatePaymentMethod)||i.includes(s.aXG.UpdateSettings),getItemName:i=>i.name,bulkAssignToChannel:(i,n,t)=>t.map(o=>i.mutate(s.pm$,{input:{channelId:o,paymentMethodIds:n}}).pipe((0,b.T)(a=>a.assignPaymentMethodsToChannel)))})),rt=(0,s.YSJ)({location:"payment-method-list",requiresPermission:i=>i.includes(s.aXG.DeletePaymentMethod)||i.includes(s.aXG.DeleteSettings),getItemName:i=>i.name,bulkRemoveFromChannel:(i,n,t)=>i.mutate(s.j9p,{input:{channelId:t,paymentMethodIds:n}}).pipe((0,b.T)(o=>o.removePaymentMethodsFromChannel))}),Si=()=>["CreateSettings","CreatePaymentMethod"],Pi=()=>["./","create"],Li=i=>["./",i];function Ei(i,n){1&i&&(e.j41(0,"a",13),e.nrm(1,"clr-icon",14),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&i&&(e.Y8G("routerLink",e.lJ4(4,Pi)),e.R7$(2),e.SpI(" ",e.bMT(3,2,"settings.create-new-payment-method")," "))}function ji(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",t.id," ")}}function Ni(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.createdAt,"short")," ")}}function Yi(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.updatedAt,"short")," ")}}function Ai(i,n){if(1&i&&(e.j41(0,"a",15)(1,"span"),e.EFF(2),e.k0s(),e.nrm(3,"clr-icon",16),e.k0s()),2&i){const t=n.item;e.Y8G("routerLink",e.eq3(2,Li,t.id)),e.R7$(2),e.JRh(t.name)}}function Bi(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",t.code," ")}}function xi(i,n){1&i&&(e.j41(0,"vdr-chip",19),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"common.enabled")))}function Oi(i,n){1&i&&(e.j41(0,"vdr-chip",20),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"common.disabled")))}function Vi(i,n){if(1&i&&e.DNE(0,xi,3,3,"vdr-chip",17)(1,Oi,3,3,"vdr-chip",18),2&i){const t=n.item;e.Y8G("ngIf",t.enabled),e.R7$(),e.Y8G("ngIf",!t.enabled)}}function Xi(i,n){if(1&i&&e.nrm(0,"vdr-dt2-custom-field-column",21),2&i){const t=n.$implicit,o=e.XpG();e.Y8G("customField",t)("sorts",o.sorts)}}const Ui=h.J1`
    query GetPaymentMethodList($options: PaymentMethodListOptions!) {
        paymentMethods(options: $options) {
            items {
                ...PaymentMethodListItem
            }
            totalItems
        }
    }
    fragment PaymentMethodListItem on PaymentMethod {
        id
        createdAt
        updatedAt
        name
        description
        code
        enabled
    }
`;class pe extends s.B8I{constructor(){super(),this.dataTableListId="payment-method-list",this.customFields=this.getCustomFieldConfig("PaymentMethod"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilter({name:"name",type:{kind:"text"},label:(0,d.x)("common.name"),filterField:"name"}).addFilter({name:"code",type:{kind:"text"},label:(0,d.x)("common.code"),filterField:"code"}).addFilter({name:"enabled",type:{kind:"boolean"},label:(0,d.x)("common.enabled"),filterField:"enabled"}).addFilter({name:"description",type:{kind:"text"},label:(0,d.x)("common.description"),filterField:"description"}).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("createdAt","DESC").addSort({name:"id"}).addSort({name:"createdAt"}).addSort({name:"updatedAt"}).addSort({name:"name"}).addSort({name:"code"}).addSort({name:"description"}).addCustomFieldSorts(this.customFields).connectToRoute(this.route),super.configure({document:s.v_Y,getItems:n=>n.paymentMethods,setVariables:(n,t)=>({options:{skip:n,take:t,filter:{name:{contains:this.searchTermControl.value},...this.filters.createFilterInput()},sort:this.sorts.createSortInput()}}),refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}static#e=this.\u0275fac=function(t){return new(t||pe)};static#t=this.\u0275cmp=e.VBU({type:pe,selectors:[["vdr-payment-method-list"]],features:[e.Vt3],decls:37,vars:56,consts:[[3,"languageCodeChange","availableLanguageCodes","currentLanguageCode"],["locationId","payment-method-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","payment-method-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault","sort"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","name",3,"heading","optional","sort"],["id","code",3,"heading","sort"],["id","enabled",3,"heading"],[3,"customField","sorts",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],["colorType","success",4,"ngIf"],["colorType","warning",4,"ngIf"],["colorType","success"],["colorType","warning"],[3,"customField","sorts"]],template:function(t,o){1&t&&(e.j41(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left")(3,"vdr-language-selector",0),e.nI1(4,"async"),e.nI1(5,"async"),e.bIt("languageCodeChange",function(r){return o.setLanguage(r)}),e.k0s()(),e.j41(6,"vdr-ab-right"),e.nrm(7,"vdr-action-bar-items",1),e.DNE(8,Ei,4,5,"a",2),e.nrm(9,"vdr-action-bar-dropdown-menu",1),e.k0s()()(),e.j41(10,"vdr-data-table-2",3),e.nI1(11,"async"),e.nI1(12,"async"),e.nI1(13,"async"),e.nI1(14,"async"),e.bIt("pageChange",function(r){return o.setPageNumber(r)})("itemsPerPageChange",function(r){return o.setItemsPerPage(r)})("visibleColumnsChange",function(r){return o.setVisibleColumns(r)}),e.nrm(15,"vdr-bulk-action-menu",4)(16,"vdr-dt2-search",5),e.nI1(17,"translate"),e.j41(18,"vdr-dt2-column",6),e.nI1(19,"translate"),e.DNE(20,ji,1,1,"ng-template"),e.k0s(),e.j41(21,"vdr-dt2-column",7),e.nI1(22,"translate"),e.DNE(23,Ni,2,4,"ng-template"),e.k0s(),e.j41(24,"vdr-dt2-column",8),e.nI1(25,"translate"),e.DNE(26,Yi,2,4,"ng-template"),e.k0s(),e.j41(27,"vdr-dt2-column",9),e.nI1(28,"translate"),e.DNE(29,Ai,4,4,"ng-template"),e.k0s(),e.j41(30,"vdr-dt2-column",10),e.nI1(31,"translate"),e.DNE(32,Bi,1,1,"ng-template"),e.k0s(),e.j41(33,"vdr-dt2-column",11),e.nI1(34,"translate"),e.DNE(35,Vi,2,2,"ng-template"),e.k0s(),e.DNE(36,Xi,1,2,"vdr-dt2-custom-field-column",12),e.k0s()),2&t&&(e.R7$(3),e.Y8G("availableLanguageCodes",e.bMT(4,29,o.availableLanguages$))("currentLanguageCode",e.bMT(5,31,o.contentLanguage$)),e.R7$(5),e.Y8G("vdrIfPermissions",e.lJ4(55,Si)),e.R7$(2),e.Y8G("id",o.dataTableListId)("items",e.bMT(11,33,o.items$))("itemsPerPage",e.bMT(12,35,o.itemsPerPage$))("totalItems",e.bMT(13,37,o.totalItems$))("currentPage",e.bMT(14,39,o.currentPage$))("filters",o.filters),e.R7$(5),e.Y8G("hostComponent",o)("selectionManager",o.selectionManager),e.R7$(),e.Y8G("searchTermControl",o.searchTermControl)("searchTermPlaceholder",e.bMT(17,41,"catalog.filter-by-name")),e.R7$(2),e.Y8G("heading",e.bMT(19,43,"common.id"))("hiddenByDefault",!0)("sort",o.sorts.get("id")),e.R7$(3),e.Y8G("heading",e.bMT(22,45,"common.created-at"))("hiddenByDefault",!0)("sort",o.sorts.get("createdAt")),e.R7$(3),e.Y8G("heading",e.bMT(25,47,"common.updated-at"))("hiddenByDefault",!0)("sort",o.sorts.get("updatedAt")),e.R7$(3),e.Y8G("heading",e.bMT(28,49,"common.name"))("optional",!1)("sort",o.sorts.get("name")),e.R7$(3),e.Y8G("heading",e.bMT(31,51,"common.code"))("sort",o.sorts.get("code")),e.R7$(3),e.Y8G("heading",e.bMT(34,53,"common.enabled")),e.R7$(3),e.Y8G("ngForOf",o.customFields))},dependencies:[g.U4n,m.Sq,m.bT,k.Wk,u.nG,u.wL,u.TX,T.l,U.w,Z.t,I.p,v.T,M.T,S.I,P.Y,L.E,O.T,C.e,m.Jj,f.D9,E.P],changeDetection:0})}function wi(i,n){if(1&i&&(e.j41(0,"vdr-card"),e.nrm(1,"vdr-page-entity-info",16),e.k0s()),2&i){const t=n.ngIf;e.R7$(),e.Y8G("entity",t)}}function Ji(i,n){1&i&&(e.j41(0,"vdr-form-field",17),e.nI1(1,"translate"),e.nrm(2,"input",13),e.k0s()),2&i&&e.Y8G("label",e.bMT(1,1,"settings.password"))}function Zi(i,n){if(1&i&&(e.j41(0,"vdr-card",18),e.nI1(1,"translate"),e.nrm(2,"vdr-tabbed-custom-fields",19),e.k0s()),2&i){const t=e.XpG();e.Y8G("title",e.bMT(1,3,"common.custom-fields")),e.R7$(2),e.Y8G("customFields",t.customFields)("customFieldsFormGroup",t.detailForm.get("customFields"))}}const Hi=h.J1`
    query GetProfileDetail {
        activeAdministrator {
            ...ProfileDetail
        }
    }
    fragment ProfileDetail on Administrator {
        id
        createdAt
        updatedAt
        firstName
        lastName
        emailAddress
        user {
            id
            lastLogin
            verified
        }
    }
`;class he extends s.wi7{constructor(n,t,o,a){super(),this.changeDetector=n,this.dataService=t,this.formBuilder=o,this.notificationService=a,this.customFields=this.getCustomFieldConfig("Administrator"),this.detailForm=this.formBuilder.group({emailAddress:["",l.k0.required],firstName:["",l.k0.required],lastName:["",l.k0.required],password:[""],customFields:this.formBuilder.group((0,s.HCD)(this.customFields))})}ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}save(){this.entity$.pipe((0,$.s)(1),(0,F.Z)(({id:n})=>{const t=this.detailForm.value,o={emailAddress:t.emailAddress,firstName:t.firstName,lastName:t.lastName,password:t.password,customFields:t.customFields};return this.dataService.administrator.updateActiveAdministrator(o)})).subscribe(n=>{this.notificationService.success((0,d.x)("common.notify-update-success"),{entity:"Administrator"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},n=>{this.notificationService.error((0,d.x)("common.notify-update-error"),{entity:"Administrator"})})}setFormValues(n,t){this.detailForm.patchValue({emailAddress:n.emailAddress,firstName:n.firstName,lastName:n.lastName}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),n)}static#e=this.\u0275fac=function(t){return new(t||he)(e.rXU(e.gRc),e.rXU(s.uSP),e.rXU(l.ok),e.rXU(s.JEu))};static#t=this.\u0275cmp=e.VBU({type:he,selectors:[["vdr-profile"]],features:[e.Vt3],decls:32,vars:27,consts:[["locationId","profile"],[1,"btn","btn-primary",3,"click","disabled"],[1,"form",3,"formGroup"],[4,"ngIf"],[1,"form-grid"],["for","emailAddress",3,"label"],["id","emailAddress","type","text","formControlName","emailAddress"],["for","firstName",3,"label"],["id","firstName","type","text","formControlName","firstName"],["for","lastName",3,"label"],["id","lastName","type","text","formControlName","lastName"],["for","password",3,"label",4,"ngIf"],["for","password",3,"label","readOnlyToggle"],["id","password","type","password","formControlName","password"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","administrator-profile",3,"entity$","detailForm"],[3,"entity"],["for","password",3,"label"],["formGroupName","customFields",3,"title"],["entityName","Administrator",3,"customFields","customFieldsFormGroup"]],template:function(t,o){1&t&&(e.j41(0,"vdr-page-block")(1,"vdr-action-bar"),e.nrm(2,"vdr-ab-left"),e.j41(3,"vdr-ab-right"),e.nrm(4,"vdr-action-bar-items",0),e.j41(5,"button",1),e.bIt("click",function(){return o.save()}),e.EFF(6),e.nI1(7,"translate"),e.k0s()()()(),e.j41(8,"form",2)(9,"vdr-page-detail-layout")(10,"vdr-page-detail-sidebar"),e.DNE(11,wi,2,1,"vdr-card",3),e.nI1(12,"async"),e.k0s(),e.j41(13,"vdr-page-block")(14,"vdr-card")(15,"div",4)(16,"vdr-form-field",5),e.nI1(17,"translate"),e.nrm(18,"input",6),e.k0s(),e.j41(19,"vdr-form-field",7),e.nI1(20,"translate"),e.nrm(21,"input",8),e.k0s(),e.j41(22,"vdr-form-field",9),e.nI1(23,"translate"),e.nrm(24,"input",10),e.k0s(),e.DNE(25,Ji,3,3,"vdr-form-field",11),e.nI1(26,"async"),e.j41(27,"vdr-form-field",12),e.nI1(28,"translate"),e.nrm(29,"input",13),e.k0s()()(),e.DNE(30,Zi,3,5,"vdr-card",14),e.nrm(31,"vdr-custom-detail-component-host",15),e.k0s()()()),2&t&&(e.R7$(5),e.Y8G("disabled",o.detailForm.invalid||o.detailForm.pristine),e.R7$(),e.SpI(" ",e.bMT(7,13,"common.update")," "),e.R7$(2),e.Y8G("formGroup",o.detailForm),e.R7$(3),e.Y8G("ngIf",e.bMT(12,15,o.entity$)),e.R7$(5),e.Y8G("label",e.bMT(17,17,"settings.email-address")),e.R7$(3),e.Y8G("label",e.bMT(20,19,"settings.first-name")),e.R7$(3),e.Y8G("label",e.bMT(23,21,"settings.last-name")),e.R7$(3),e.Y8G("ngIf",e.bMT(26,23,o.isNew$)),e.R7$(2),e.Y8G("label",e.bMT(28,25,"settings.password"))("readOnlyToggle",!0),e.R7$(3),e.Y8G("ngIf",o.customFields.length),e.R7$(),e.Y8G("entity$",o.entity$)("detailForm",o.detailForm))},dependencies:[m.bT,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,l.$R,u.nG,u.wL,u.TX,R.K,G.V,v.T,j.W,N.L,C.e,Y.E,A.c,B.e,D.i,m.Jj,f.D9],changeDetection:0})}var zi=c(5002),qi=c(5576);function Ki(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",15),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.create())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("disabled",t.detailForm.invalid||t.detailForm.pristine),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.create")," ")}}function Wi(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",15),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.save())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("disabled",t.detailForm.invalid||t.detailForm.pristine),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.update")," ")}}function Qi(i,n){1&i&&e.DNE(0,Wi,3,4,"button",16),2&i&&e.Y8G("vdrIfPermissions","UpdateAdministrator")}function eo(i,n){if(1&i&&(e.j41(0,"vdr-card"),e.nrm(1,"vdr-page-entity-info",17),e.k0s()),2&i){const t=n.ngIf;e.R7$(),e.Y8G("entity",t)}}const to=h.J1`
    query GetRoleDetail($id: ID!) {
        role(id: $id) {
            ...Role
        }
    }
    ${s.qXv}
`;class ge extends s.wi7{constructor(n,t,o,a){super(),this.changeDetector=n,this.dataService=t,this.formBuilder=o,this.notificationService=a,this.detailForm=this.formBuilder.group({code:["",l.k0.required],description:["",l.k0.required],channelIds:[[]],permissions:[[]]}),this.permissionDefinitions=this.serverConfigService.getPermissionDefinitions()}ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}updateCode(n){const t=this.detailForm.get(["code"]);t&&t.pristine&&t.setValue((0,Be.J)(n,"-"))}setPermission(n){const t=this.detailForm.get("permissions");if(t){const o=t.value,a=!0===n.value?(0,zi.A)([...o,n.permission]):o.filter(r=>r!==n.permission);t.setValue(a),t.markAsDirty()}}create(){const{code:n,description:t,permissions:o,channelIds:a}=this.detailForm.value;if(!n||!t)return;const r={code:n,description:t,permissions:o??[],channelIds:a};this.dataService.administrator.createRole(r).subscribe(p=>{this.notificationService.success((0,d.x)("common.notify-create-success"),{entity:"Role"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",p.createRole.id],{relativeTo:this.route})},p=>{this.notificationService.error((0,d.x)("common.notify-create-error"),{entity:"Role"})})}save(){this.entity$.pipe((0,$.s)(1),(0,F.Z)(({id:n})=>{const o={id:n,...this.detailForm.value};return this.dataService.administrator.updateRole(o)})).subscribe(n=>{this.notificationService.success((0,d.x)("common.notify-update-success"),{entity:"Role"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},n=>{this.notificationService.error((0,d.x)("common.notify-update-error"),{entity:"Role"})})}setFormValues(n,t){this.detailForm.patchValue({description:n.description,code:n.code,channelIds:n.channels.map(o=>o.id),permissions:n.permissions}),this.changeDetector.detectChanges()}static#e=this.\u0275fac=function(t){return new(t||ge)(e.rXU(e.gRc),e.rXU(s.uSP),e.rXU(l.ok),e.rXU(s.JEu))};static#t=this.\u0275cmp=e.VBU({type:ge,selectors:[["vdr-role-detail"]],features:[e.Vt3],decls:36,vars:37,consts:[["updateButton",""],["locationId","role-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],[4,"ngIf"],[1,"form-grid"],["for","description",3,"label"],["id","description","type","text","formControlName","description",3,"input","readonly"],["for","code",3,"label","readOnlyToggle"],["id","code","type","text","formControlName","code",3,"readonly"],[1,"mt-2"],[3,"title"],[3,"label"],["formControlName","channelIds",3,"vdrDisabled"],[1,"mt-2",3,"permissionChange","permissionDefinitions","activePermissions","readonly"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"]],template:function(t,o){if(1&t){const a=e.RV6();e.j41(0,"vdr-page-block")(1,"vdr-action-bar"),e.nrm(2,"vdr-ab-left"),e.j41(3,"vdr-ab-right"),e.nrm(4,"vdr-action-bar-items",1),e.DNE(5,Ki,3,4,"button",2),e.nI1(6,"async"),e.DNE(7,Qi,1,1,"ng-template",null,0,e.C5r),e.nrm(9,"vdr-action-bar-dropdown-menu",1),e.k0s()()(),e.j41(10,"form",3)(11,"vdr-page-detail-layout")(12,"vdr-page-detail-sidebar"),e.DNE(13,eo,2,1,"vdr-card",4),e.nI1(14,"async"),e.k0s(),e.j41(15,"vdr-page-block")(16,"vdr-card")(17,"div",5)(18,"vdr-form-field",6),e.nI1(19,"translate"),e.j41(20,"input",7),e.nI1(21,"hasPermission"),e.bIt("input",function(p){return e.eBV(a),e.Njj(o.updateCode(p.target.value))}),e.k0s()(),e.j41(22,"vdr-form-field",8),e.nI1(23,"translate"),e.nI1(24,"hasPermission"),e.nrm(25,"input",9),e.nI1(26,"hasPermission"),e.k0s()()()()(),e.j41(27,"vdr-page-block",10)(28,"vdr-card",11),e.nI1(29,"translate"),e.j41(30,"vdr-form-field",12),e.nI1(31,"translate"),e.nrm(32,"vdr-channel-assignment-control",13),e.nI1(33,"hasPermission"),e.k0s(),e.j41(34,"vdr-permission-grid",14),e.nI1(35,"hasPermission"),e.bIt("permissionChange",function(p){return e.eBV(a),e.Njj(o.setPermission(p))}),e.k0s()()()()}if(2&t){let a;const r=e.sdS(8);e.R7$(5),e.Y8G("ngIf",e.bMT(6,15,o.isNew$))("ngIfElse",r),e.R7$(5),e.Y8G("formGroup",o.detailForm),e.R7$(3),e.Y8G("ngIf",e.bMT(14,17,o.entity$)),e.R7$(5),e.Y8G("label",e.bMT(19,19,"common.description")),e.R7$(2),e.Y8G("readonly",!e.bMT(21,21,"UpdateAdministrator")),e.R7$(2),e.Y8G("label",e.bMT(23,23,"common.code"))("readOnlyToggle",e.bMT(24,25,"UpdateAdministrator")),e.R7$(3),e.Y8G("readonly",!e.bMT(26,27,"UpdateAdministrator")),e.R7$(3),e.Y8G("title",e.bMT(29,29,"settings.permissions")),e.R7$(2),e.Y8G("label",e.bMT(31,31,"settings.channel")),e.R7$(2),e.Y8G("vdrDisabled",!e.bMT(33,33,"UpdateAdministrator")),e.R7$(2),e.Y8G("permissionDefinitions",o.permissionDefinitions)("activePermissions",null==(a=o.detailForm.get("permissions"))?null:a.value)("readonly",!e.bMT(35,35,"UpdateAdministrator"))}},dependencies:[m.bT,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,u.nG,u.wL,u.TX,T.l,R.K,G.V,I.p,v.T,X.y,qi.$,C.e,Y.E,A.c,B.e,D.i,q,m.Jj,f.D9,x.E],changeDetection:0})}const lt=(0,s.AfA)({location:"role-list",requiresPermission:i=>i.includes(s.aXG.DeleteAdministrator),getItemName:i=>i.description,bulkDelete:(i,n)=>i.administrator.deleteRoles(n).pipe((0,b.T)(t=>t.deleteRoles))});var no=c(2596);const io=()=>["CreateAdministrator"],oo=()=>["./","create"],ao=i=>["./",i];function so(i,n){1&i&&(e.j41(0,"a",14),e.nrm(1,"clr-icon",15),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&i&&(e.Y8G("routerLink",e.lJ4(4,oo)),e.R7$(2),e.SpI(" ",e.bMT(3,2,"settings.create-new-role")," "))}function ro(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",t.id," ")}}function lo(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.createdAt,"short")," ")}}function co(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.updatedAt,"short")," ")}}function mo(i,n){if(1&i&&(e.j41(0,"a",17)(1,"span"),e.EFF(2),e.k0s(),e.nrm(3,"clr-icon",18),e.k0s()),2&i){const t=e.XpG().item;e.Y8G("routerLink",e.eq3(2,ao,t.id)),e.R7$(2),e.JRh(t.description)}}function uo(i,n){if(1&i&&e.EFF(0),2&i){const t=e.XpG().item;e.SpI(" ",t.description," ")}}function po(i,n){if(1&i&&e.DNE(0,mo,4,4,"a",16)(1,uo,1,1,"ng-template",null,0,e.C5r),2&i){const t=n.item,o=e.sdS(2),a=e.XpG();e.Y8G("ngIf",!a.isDefaultRole(t))("ngIfElse",o)}}function ho(i,n){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const t=e.XpG().item;e.R7$(),e.JRh(t.code)}}function go(i,n){if(1&i&&e.DNE(0,ho,2,1,"span",19),2&i){const t=n.item,o=e.XpG();e.Y8G("ngIf",!o.isDefaultRole(t))}}function fo(i,n){if(1&i&&(e.j41(0,"vdr-chip"),e.nrm(1,"vdr-channel-badge",21),e.j41(2,"div",22),e.EFF(3),e.nI1(4,"channelCodeToLabel"),e.nI1(5,"translate"),e.k0s()()),2&i){const t=n.$implicit;e.R7$(),e.Y8G("channelCode",t.code),e.R7$(2),e.JRh(e.bMT(5,4,e.bMT(4,2,t.code)))}}function _o(i,n){if(1&i&&(e.qex(0),e.DNE(1,fo,6,6,"vdr-chip",20),e.bVm()),2&i){const t=e.XpG().item;e.R7$(),e.Y8G("ngForOf",t.channels)}}function bo(i,n){if(1&i&&e.DNE(0,_o,2,1,"ng-container",19),2&i){const t=n.item,o=e.XpG();e.Y8G("ngIf",!o.isDefaultRole(t))}}function Co(i,n){if(1&i&&(e.j41(0,"vdr-chip"),e.EFF(1),e.k0s()),2&i){const t=n.$implicit;e.R7$(),e.JRh(t)}}function vo(i,n){if(1&i&&(e.qex(0),e.nrm(1,"clr-icon",15),e.EFF(2),e.bVm()),2&i){const t=e.XpG(3).item,o=e.XpG();e.R7$(2),e.SpI(" ",t.permissions.length-o.initialLimit," ")}}function To(i,n){1&i&&e.nrm(0,"clr-icon",27)}function Io(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",26),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2).item,r=e.XpG();return e.Njj(r.toggleDisplayLimit(a))}),e.DNE(1,vo,3,1,"ng-container",23)(2,To,1,0,"ng-template",null,1,e.C5r),e.k0s()}if(2&i){const t=e.sdS(3),o=e.XpG(2).item,a=e.XpG();e.R7$(),e.Y8G("ngIf",(a.displayLimit[o.id]||0)<o.permissions.length)("ngIfElse",t)}}function yo(i,n){if(1&i&&(e.qex(0),e.j41(1,"div",24),e.DNE(2,Co,2,1,"vdr-chip",20),e.nI1(3,"slice"),e.DNE(4,Io,4,2,"button",25),e.k0s(),e.bVm()),2&i){const t=e.XpG().item,o=e.XpG();e.R7$(2),e.Y8G("ngForOf",e.brH(3,2,t.permissions,0,o.displayLimit[t.id]||3)),e.R7$(2),e.Y8G("ngIf",t.permissions.length>o.initialLimit)}}function Fo(i,n){1&i&&(e.j41(0,"span",28),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"settings.default-role-label")))}function ko(i,n){if(1&i&&e.DNE(0,yo,5,6,"ng-container",23)(1,Fo,3,3,"ng-template",null,0,e.C5r),2&i){const t=n.item,o=e.sdS(2),a=e.XpG();e.Y8G("ngIf",!a.isDefaultRole(t))("ngIfElse",o)}}const Go=h.J1`
    query GetRoleList($options: RoleListOptions) {
        roles(options: $options) {
            items {
                ...Role
            }
            totalItems
        }
    }
    ${s.qXv}
`;class fe extends s.B8I{constructor(){super(),this.dataTableListId="role-list",this.initialLimit=3,this.displayLimit={},this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilter({name:"code",type:{kind:"text"},label:(0,d.x)("common.code"),filterField:"code"}).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("createdAt","DESC").addSort({name:"createdAt"}).addSort({name:"updatedAt"}).addSort({name:"code"}).addSort({name:"description"}).connectToRoute(this.route),super.configure({document:s.C9D,getItems:n=>n.roles,setVariables:(n,t)=>({options:{skip:n,take:t,filter:{code:{contains:this.searchTermControl.value},...this.filters.createFilterInput()},sort:this.sorts.createSortInput()}}),refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}toggleDisplayLimit(n){this.displayLimit[n.id]===n.permissions.length?this.displayLimit[n.id]=this.initialLimit:this.displayLimit[n.id]=n.permissions.length}isDefaultRole(n){return n.code===J.vG||n.code===J.yN}static#e=this.\u0275fac=function(t){return new(t||fe)};static#t=this.\u0275cmp=e.VBU({type:fe,selectors:[["vdr-role-list"]],features:[e.Vt3],decls:36,vars:51,consts:[["defaultRole",""],["collapse",""],["locationId","role-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","role-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","description",3,"heading","optional","sort"],["id","code",3,"heading","sort"],["id","channel",3,"heading"],["id","permissions",3,"heading"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],["class","button-ghost",3,"routerLink",4,"ngIf","ngIfElse"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"channelCode"],[1,"ml-1"],[4,"ngIf","ngIfElse"],[1,"permissions-list"],["class","button-small",3,"click",4,"ngIf"],[1,"button-small",3,"click"],["shape","minus"],[1,"default-role-label"]],template:function(t,o){1&t&&(e.j41(0,"vdr-page-block")(1,"vdr-action-bar"),e.nrm(2,"vdr-ab-left"),e.j41(3,"vdr-ab-right"),e.nrm(4,"vdr-action-bar-items",2),e.DNE(5,so,4,5,"a",3),e.nrm(6,"vdr-action-bar-dropdown-menu",2),e.k0s()()(),e.j41(7,"vdr-data-table-2",4),e.nI1(8,"async"),e.nI1(9,"async"),e.nI1(10,"async"),e.nI1(11,"async"),e.bIt("pageChange",function(r){return o.setPageNumber(r)})("itemsPerPageChange",function(r){return o.setItemsPerPage(r)})("visibleColumnsChange",function(r){return o.setVisibleColumns(r)}),e.nrm(12,"vdr-bulk-action-menu",5)(13,"vdr-dt2-search",6),e.nI1(14,"translate"),e.j41(15,"vdr-dt2-column",7),e.nI1(16,"translate"),e.DNE(17,ro,1,1,"ng-template"),e.k0s(),e.j41(18,"vdr-dt2-column",8),e.nI1(19,"translate"),e.DNE(20,lo,2,4,"ng-template"),e.k0s(),e.j41(21,"vdr-dt2-column",9),e.nI1(22,"translate"),e.DNE(23,co,2,4,"ng-template"),e.k0s(),e.j41(24,"vdr-dt2-column",10),e.nI1(25,"translate"),e.DNE(26,po,3,2,"ng-template"),e.k0s(),e.j41(27,"vdr-dt2-column",11),e.nI1(28,"translate"),e.DNE(29,go,1,1,"ng-template"),e.k0s(),e.j41(30,"vdr-dt2-column",12),e.nI1(31,"translate"),e.DNE(32,bo,1,1,"ng-template"),e.k0s(),e.j41(33,"vdr-dt2-column",13),e.nI1(34,"translate"),e.DNE(35,ko,3,2,"ng-template"),e.k0s()()),2&t&&(e.R7$(5),e.Y8G("vdrIfPermissions",e.lJ4(50,io)),e.R7$(2),e.Y8G("id",o.dataTableListId)("items",e.bMT(8,26,o.items$))("itemsPerPage",e.bMT(9,28,o.itemsPerPage$))("totalItems",e.bMT(10,30,o.totalItems$))("currentPage",e.bMT(11,32,o.currentPage$))("filters",o.filters),e.R7$(5),e.Y8G("hostComponent",o)("selectionManager",o.selectionManager),e.R7$(),e.Y8G("searchTermControl",o.searchTermControl)("searchTermPlaceholder",e.bMT(14,34,"catalog.filter-by-name")),e.R7$(2),e.Y8G("heading",e.bMT(16,36,"common.id"))("hiddenByDefault",!0),e.R7$(3),e.Y8G("heading",e.bMT(19,38,"common.created-at"))("hiddenByDefault",!0)("sort",o.sorts.get("createdAt")),e.R7$(3),e.Y8G("heading",e.bMT(22,40,"common.updated-at"))("hiddenByDefault",!0)("sort",o.sorts.get("updatedAt")),e.R7$(3),e.Y8G("heading",e.bMT(25,42,"common.description"))("optional",!1)("sort",o.sorts.get("description")),e.R7$(3),e.Y8G("heading",e.bMT(28,44,"common.code"))("sort",o.sorts.get("code")),e.R7$(3),e.Y8G("heading",e.bMT(31,46,"settings.channel")),e.R7$(3),e.Y8G("heading",e.bMT(34,48,"settings.permissions")))},dependencies:[g.U4n,m.Sq,m.bT,k.Wk,u.nG,u.wL,u.TX,T.l,U.w,I.p,v.T,no.a,M.T,S.I,P.Y,L.E,C.e,m.Jj,m.P9,f.D9,je.i,E.P],styles:[".default-role-label[_ngcontent-%COMP%]{color:var(--color-grey-400)}.permissions-list[_ngcontent-%COMP%]{max-width:500px;display:flex;flex-wrap:wrap;align-items:center;gap:4px}"],changeDetection:0})}const Ro=()=>["SuperAdmin","UpdateSeller"];function Do(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",10),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.create())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("disabled",!t.saveButtonEnabled()),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.create")," ")}}function $o(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",10),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.save())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("disabled",!t.saveButtonEnabled()),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.update")," ")}}function Mo(i,n){1&i&&e.DNE(0,$o,3,4,"button",11),2&i&&e.Y8G("vdrIfPermissions",e.lJ4(1,Ro))}function So(i,n){if(1&i&&(e.j41(0,"vdr-card"),e.nrm(1,"vdr-page-entity-info",12),e.k0s()),2&i){const t=n.ngIf;e.R7$(),e.Y8G("entity",t)}}function Po(i,n){if(1&i&&(e.j41(0,"vdr-card",13),e.nI1(1,"translate"),e.nrm(2,"vdr-tabbed-custom-fields",14),e.k0s()),2&i){const t=e.XpG();e.Y8G("title",e.bMT(1,3,"common.custom-fields")),e.R7$(2),e.Y8G("customFields",t.customFields)("customFieldsFormGroup",t.detailForm.get("customFields"))}}const Lo=h.J1`
    query GetSellerDetail($id: ID!) {
        seller(id: $id) {
            ...SellerDetail
        }
    }
    fragment SellerDetail on Seller {
        id
        createdAt
        updatedAt
        name
    }
`;class _e extends s.wi7{constructor(n,t,o,a){super(),this.changeDetector=n,this.dataService=t,this.formBuilder=o,this.notificationService=a,this.customFields=this.getCustomFieldConfig("Seller"),this.detailForm=this.formBuilder.group({name:["",l.k0.required],customFields:this.formBuilder.group((0,s.HCD)(this.customFields))}),this.updatePermission=[s.aXG.SuperAdmin,s.aXG.UpdateSeller,s.aXG.CreateSeller]}ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}saveButtonEnabled(){return this.detailForm.dirty&&this.detailForm.valid}create(){if(!this.detailForm.dirty)return;const n=this.detailForm.value;if(!n.name)return;const t={name:n.name,customFields:n.customFields};this.dataService.settings.createSeller(t).subscribe(o=>{if("Seller"===o.createSeller.__typename)this.notificationService.success((0,d.x)("common.notify-create-success"),{entity:"Seller"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",o.createSeller.id],{relativeTo:this.route})})}save(){if(!this.detailForm.dirty)return;const n=this.detailForm.value;this.entity$.pipe((0,$.s)(1),(0,F.Z)(t=>{const o={id:t.id,name:n.name,customFields:n.customFields};return this.dataService.settings.updateSeller(o)})).subscribe(({updateSeller:t})=>{if("Seller"===t.__typename)this.notificationService.success((0,d.x)("common.notify-update-success"),{entity:"Seller"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()})}setFormValues(n,t){this.detailForm.patchValue({name:n.name}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customFields"]),n)}static#e=this.\u0275fac=function(t){return new(t||_e)(e.rXU(e.gRc),e.rXU(s.uSP),e.rXU(l.ok),e.rXU(s.JEu))};static#t=this.\u0275cmp=e.VBU({type:_e,selectors:[["vdr-seller-detail"]],features:[e.Vt3],decls:24,vars:17,consts:[["updateButton",""],["locationId","seller-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],[4,"ngIf"],[1,"form-grid"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","seller-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"],["formGroupName","customFields",3,"title"],["entityName","Seller",3,"customFields","customFieldsFormGroup"]],template:function(t,o){if(1&t&&(e.j41(0,"vdr-page-block")(1,"vdr-action-bar"),e.nrm(2,"vdr-ab-left"),e.j41(3,"vdr-ab-right"),e.nrm(4,"vdr-action-bar-items",1),e.DNE(5,Do,3,4,"button",2),e.nI1(6,"async"),e.DNE(7,Mo,1,2,"ng-template",null,0,e.C5r),e.nrm(9,"vdr-action-bar-dropdown-menu",1),e.k0s()()(),e.j41(10,"form",3)(11,"vdr-page-detail-layout")(12,"vdr-page-detail-sidebar"),e.DNE(13,So,2,1,"vdr-card",4),e.nI1(14,"async"),e.k0s(),e.j41(15,"vdr-page-block")(16,"vdr-card")(17,"div",5)(18,"vdr-form-field",6),e.nI1(19,"translate"),e.nrm(20,"input",7),e.nI1(21,"hasPermission"),e.k0s()()(),e.DNE(22,Po,3,5,"vdr-card",8),e.nrm(23,"vdr-custom-detail-component-host",9),e.k0s()()()),2&t){const a=e.sdS(8);e.R7$(5),e.Y8G("ngIf",e.bMT(6,9,o.isNew$))("ngIfElse",a),e.R7$(5),e.Y8G("formGroup",o.detailForm),e.R7$(3),e.Y8G("ngIf",e.bMT(14,11,o.entity$)),e.R7$(5),e.Y8G("label",e.bMT(19,13,"common.name")),e.R7$(2),e.Y8G("readonly",!e.bMT(21,15,o.updatePermission)),e.R7$(2),e.Y8G("ngIf",o.customFields.length),e.R7$(),e.Y8G("entity$",o.entity$)("detailForm",o.detailForm)}},dependencies:[m.bT,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,l.$R,u.nG,u.wL,u.TX,T.l,R.K,G.V,I.p,v.T,j.W,N.L,C.e,Y.E,A.c,B.e,D.i,m.Jj,f.D9,x.E],styles:["clr-alert[_ngcontent-%COMP%]{max-width:30rem;margin-bottom:12px}"],changeDetection:0})}const dt=(0,s.AfA)({location:"seller-list",requiresPermission:i=>i.includes(s.aXG.DeleteSeller),getItemName:i=>i.name,bulkDelete:(i,n)=>i.settings.deleteSellers(n).pipe((0,b.T)(t=>t.deleteSellers))}),Eo=()=>["SuperAdmin","CreateSeller"],jo=()=>["./","create"],No=i=>["./",i];function Yo(i,n){1&i&&(e.j41(0,"a",10),e.nrm(1,"clr-icon",11),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&i&&(e.Y8G("routerLink",e.lJ4(4,jo)),e.R7$(2),e.SpI(" ",e.bMT(3,2,"settings.create-new-seller")," "))}function Ao(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.JRh(t.id)}}function Bo(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.createdAt,"short")," ")}}function xo(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.updatedAt,"short")," ")}}function Oo(i,n){if(1&i&&(e.j41(0,"a",12)(1,"span"),e.EFF(2),e.k0s(),e.nrm(3,"clr-icon",13),e.k0s()),2&i){const t=n.item;e.Y8G("routerLink",e.eq3(2,No,t.id)),e.R7$(2),e.JRh(t.name)}}function Vo(i,n){if(1&i&&e.nrm(0,"vdr-dt2-custom-field-column",14),2&i){const t=n.$implicit,o=e.XpG();e.Y8G("customField",t)("sorts",o.sorts)}}h.J1`
    query GetSellerList($options: SellerListOptions) {
        sellers(options: $options) {
            items {
                ...SellerListItem
            }
            totalItems
        }
    }
    fragment SellerListItem on Seller {
        id
        createdAt
        updatedAt
        name
    }
`;class be extends s.B8I{constructor(){super(),this.dataTableListId="seller-list",this.customFields=this.getCustomFieldConfig("Seller"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilter({name:"name",type:{kind:"text"},label:(0,d.x)("common.name"),filterField:"name"}).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("createdAt","DESC").addSort({name:"createdAt"}).addSort({name:"updatedAt"}).addSort({name:"name"}).addCustomFieldSorts(this.customFields).connectToRoute(this.route),super.configure({document:s.nDD,getItems:n=>n.sellers,setVariables:(n,t)=>({options:{skip:n,take:t,filter:{name:{contains:this.searchTermControl.value},...this.filters.createFilterInput()},sort:this.sorts.createSortInput()}}),refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}static#e=this.\u0275fac=function(t){return new(t||be)};static#t=this.\u0275cmp=e.VBU({type:be,selectors:[["vdr-seller-list"]],features:[e.Vt3],decls:28,vars:42,consts:[["locationId","seller-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","seller-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","name",3,"heading","optional","sort"],[3,"customField","sorts",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],[3,"customField","sorts"]],template:function(t,o){1&t&&(e.j41(0,"vdr-page-block")(1,"vdr-action-bar"),e.nrm(2,"vdr-ab-left"),e.j41(3,"vdr-ab-right"),e.nrm(4,"vdr-action-bar-items",0),e.DNE(5,Yo,4,5,"a",1),e.nrm(6,"vdr-action-bar-dropdown-menu",0),e.k0s()()(),e.j41(7,"vdr-data-table-2",2),e.nI1(8,"async"),e.nI1(9,"async"),e.nI1(10,"async"),e.nI1(11,"async"),e.bIt("pageChange",function(r){return o.setPageNumber(r)})("itemsPerPageChange",function(r){return o.setItemsPerPage(r)})("visibleColumnsChange",function(r){return o.setVisibleColumns(r)}),e.nrm(12,"vdr-bulk-action-menu",3)(13,"vdr-dt2-search",4),e.nI1(14,"translate"),e.j41(15,"vdr-dt2-column",5),e.nI1(16,"translate"),e.DNE(17,Ao,1,1,"ng-template"),e.k0s(),e.j41(18,"vdr-dt2-column",6),e.nI1(19,"translate"),e.DNE(20,Bo,2,4,"ng-template"),e.k0s(),e.j41(21,"vdr-dt2-column",7),e.nI1(22,"translate"),e.DNE(23,xo,2,4,"ng-template"),e.k0s(),e.j41(24,"vdr-dt2-column",8),e.nI1(25,"translate"),e.DNE(26,Oo,4,4,"ng-template"),e.k0s(),e.DNE(27,Vo,1,2,"vdr-dt2-custom-field-column",9),e.k0s()),2&t&&(e.R7$(5),e.Y8G("vdrIfPermissions",e.lJ4(41,Eo)),e.R7$(2),e.Y8G("id",o.dataTableListId)("items",e.bMT(8,23,o.items$))("itemsPerPage",e.bMT(9,25,o.itemsPerPage$))("totalItems",e.bMT(10,27,o.totalItems$))("currentPage",e.bMT(11,29,o.currentPage$))("filters",o.filters),e.R7$(5),e.Y8G("hostComponent",o)("selectionManager",o.selectionManager),e.R7$(),e.Y8G("searchTermControl",o.searchTermControl)("searchTermPlaceholder",e.bMT(14,31,"catalog.filter-by-name")),e.R7$(2),e.Y8G("heading",e.bMT(16,33,"common.id"))("hiddenByDefault",!0),e.R7$(3),e.Y8G("heading",e.bMT(19,35,"common.created-at"))("hiddenByDefault",!0)("sort",o.sorts.get("createdAt")),e.R7$(3),e.Y8G("heading",e.bMT(22,37,"common.updated-at"))("hiddenByDefault",!0)("sort",o.sorts.get("updatedAt")),e.R7$(3),e.Y8G("heading",e.bMT(25,39,"common.name"))("optional",!1)("sort",o.sorts.get("name")),e.R7$(3),e.Y8G("ngForOf",o.customFields))},dependencies:[g.U4n,m.Sq,k.Wk,u.nG,u.wL,u.TX,T.l,I.p,v.T,M.T,S.I,P.Y,L.E,O.T,C.e,m.Jj,f.D9,E.P],changeDetection:0})}var ct=c(410),mt=c(4128),Oe=c(7463);function Xo(i,n){if(1&i&&e.nrm(0,"vdr-object-tree",10),2&i){const t=e.XpG().$implicit;e.Y8G("value",t.metadata)}}function Uo(i,n){if(1&i&&(e.j41(0,"div",5)(1,"div",6)(2,"vdr-labeled-data",7),e.nI1(3,"translate"),e.EFF(4),e.k0s(),e.j41(5,"div",8)(6,"vdr-labeled-data",7),e.nI1(7,"translate"),e.EFF(8),e.nI1(9,"localeCurrency"),e.k0s(),e.j41(10,"vdr-labeled-data",7),e.nI1(11,"translate"),e.EFF(12),e.nI1(13,"localeCurrency"),e.k0s()(),e.DNE(14,Xo,1,1,"vdr-object-tree",9),e.k0s()()),2&i){const t=n.$implicit,o=e.XpG();e.R7$(),e.AVh("stale",o.testDataUpdated),e.R7$(),e.Y8G("label",e.bMT(3,9,"settings.shipping-method")),e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.Y8G("label",e.bMT(7,11,"common.price")),e.R7$(2),e.SpI(" ",e.i5U(9,13,t.price,o.currencyCode)," "),e.R7$(2),e.Y8G("label",e.bMT(11,16,"common.price-with-tax")),e.R7$(2),e.SpI(" ",e.i5U(13,18,t.priceWithTax,o.currencyCode)," "),e.R7$(2),e.Y8G("ngIf",t.metadata)}}function wo(i,n){1&i&&(e.j41(0,"div",5),e.nrm(1,"clr-icon",11),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&i&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"settings.no-eligible-shipping-methods")," "))}class Ce{constructor(){this.okToRun=!1,this.testDataUpdated=!1,this.runTest=new e.bkB}static#e=this.\u0275fac=function(t){return new(t||Ce)};static#t=this.\u0275cmp=e.VBU({type:Ce,selectors:[["vdr-shipping-eligibility-test-result"]],inputs:{testResult:"testResult",okToRun:"okToRun",testDataUpdated:"testDataUpdated",currencyCode:"currencyCode"},outputs:{runTest:"runTest"},decls:8,vars:9,consts:[[1,"test-result",3,"title"],["class","card-span",4,"ngFor","ngForOf"],["class","card-span",4,"ngIf"],[1,"card-footer"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"card-span"],[1,"result-details"],[3,"label"],[1,"price-row"],[3,"value",4,"ngIf"],[3,"value"],["shape","ban",1,"is-solid","error"]],template:function(t,o){1&t&&(e.j41(0,"vdr-card",0),e.nI1(1,"translate"),e.DNE(2,Uo,15,21,"div",1)(3,wo,4,3,"div",2),e.j41(4,"div",3)(5,"button",4),e.bIt("click",function(){return o.runTest.emit()}),e.EFF(6),e.nI1(7,"translate"),e.k0s()()()),2&t&&(e.Y8G("title",e.bMT(1,5,"settings.test-result")),e.R7$(2),e.Y8G("ngForOf",o.testResult),e.R7$(),e.Y8G("ngIf",0===(null==o.testResult?null:o.testResult.length)),e.R7$(2),e.Y8G("disabled",!o.okToRun),e.R7$(),e.SpI(" ",e.bMT(7,7,"settings.test-shipping-methods")," "))},dependencies:[g.U4n,m.Sq,m.bT,ct.B,mt.T,D.i,f.D9,Oe.u],styles:["[_nghost-%COMP%]{display:block}.result-details[_ngcontent-%COMP%]{transition:opacity .2s}.result-details.stale[_ngcontent-%COMP%]{opacity:.5}.price-row[_ngcontent-%COMP%]{display:flex}.price-row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:first-child){margin-inline-start:24px}clr-icon.error[_ngcontent-%COMP%]{color:var(--color-error-500)}"],changeDetection:0})}var Jo=c(4447),Zo=c(1476);function Ho(i,n){if(1&i){const t=e.RV6();e.j41(0,"tr",8)(1,"td",9),e.nrm(2,"img",10),e.k0s(),e.j41(3,"td",11),e.EFF(4),e.k0s(),e.j41(5,"td",12),e.EFF(6),e.k0s(),e.j41(7,"td",13),e.EFF(8),e.nI1(9,"localeCurrency"),e.k0s(),e.j41(10,"td",14)(11,"input",15),e.mxI("ngModelChange",function(a){const r=e.eBV(t).$implicit;return e.DH7(r.quantity,a)||(r.quantity=a),e.Njj(a)}),e.bIt("change",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.updateQuantity())}),e.k0s(),e.j41(12,"button",16),e.bIt("click",function(){const a=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.removeLine(a))}),e.nrm(13,"clr-icon",17),e.k0s()(),e.j41(14,"td",18),e.EFF(15),e.nI1(16,"localeCurrency"),e.k0s()()}if(2&i){const t=n.$implicit,o=e.XpG(2);e.R7$(2),e.Y8G("src",t.preview+"?preset=tiny",e.B4B),e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.sku),e.R7$(2),e.SpI(" ",e.i5U(9,6,t.unitPriceWithTax,o.currencyCode)," "),e.R7$(3),e.R50("ngModel",t.quantity),e.R7$(4),e.SpI(" ",e.i5U(16,9,t.unitPriceWithTax*t.quantity,o.currencyCode)," ")}}function zo(i,n){if(1&i&&(e.j41(0,"table",4)(1,"thead")(2,"tr"),e.nrm(3,"th"),e.j41(4,"th"),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.j41(7,"th"),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"th"),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"th"),e.EFF(14),e.nI1(15,"translate"),e.k0s(),e.j41(16,"th"),e.EFF(17),e.nI1(18,"translate"),e.k0s()()(),e.DNE(19,Ho,17,12,"tr",5),e.j41(20,"tr",6)(21,"td",7),e.EFF(22),e.nI1(23,"translate"),e.k0s(),e.nrm(24,"td")(25,"td")(26,"td")(27,"td"),e.j41(28,"td"),e.EFF(29),e.nI1(30,"localeCurrency"),e.k0s()()()),2&i){const t=e.XpG();e.R7$(5),e.JRh(e.bMT(6,8,"order.product-name")),e.R7$(3),e.JRh(e.bMT(9,10,"order.product-sku")),e.R7$(3),e.JRh(e.bMT(12,12,"order.unit-price")),e.R7$(3),e.JRh(e.bMT(15,14,"order.quantity")),e.R7$(3),e.JRh(e.bMT(18,16,"order.total")),e.R7$(2),e.Y8G("ngForOf",t.lines),e.R7$(3),e.JRh(e.bMT(23,18,"order.sub-total")),e.R7$(7),e.JRh(e.i5U(30,20,t.subTotal,t.currencyCode))}}function qo(i,n){1&i&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.nrm(4,"clr-icon",21),e.k0s()),2&i&&(e.R7$(2),e.JRh(e.bMT(3,1,"settings.add-products-to-test-order")))}class K{get subTotal(){return this.lines.reduce((n,t)=>n+t.unitPriceWithTax*t.quantity,0)}constructor(n,t){this.dataService=n,this.localStorageService=t,this.orderLinesChange=new e.bkB,this.lines=[]}ngOnInit(){this.lines=this.loadFromLocalStorage(),this.lines&&this.orderLinesChange.emit(this.lines),this.dataService.settings.getActiveChannel("cache-first").single$.subscribe(n=>{this.currencyCode=n.activeChannel.defaultCurrencyCode})}selectResult(n){n&&this.addToLines(n)}addToLines(n){this.lines.find(t=>t.id===n.productVariantId)||(this.lines.push({id:n.productVariantId,name:n.productVariantName,preview:n.productAsset?.preview??"",quantity:1,sku:n.sku,unitPriceWithTax:"SinglePrice"===n.priceWithTax.__typename&&n.priceWithTax.value||0}),this.persistToLocalStorage(),this.orderLinesChange.emit(this.lines))}updateQuantity(){this.persistToLocalStorage(),this.orderLinesChange.emit(this.lines)}removeLine(n){this.lines=this.lines.filter(t=>t.id!==n.id),this.persistToLocalStorage(),this.orderLinesChange.emit(this.lines)}persistToLocalStorage(){this.localStorageService.setForCurrentLocation("shippingTestOrder",this.lines)}loadFromLocalStorage(){return this.localStorageService.getForCurrentLocation("shippingTestOrder")||[]}static#e=this.\u0275fac=function(t){return new(t||K)(e.rXU(s.uSP),e.rXU(s.sji))};static#t=this.\u0275cmp=e.VBU({type:K,selectors:[["vdr-test-order-builder"]],outputs:{orderLinesChange:"orderLinesChange"},decls:5,vars:2,consts:[["emptyPlaceholder",""],["class","order-table table",4,"ngIf","ngIfElse"],[1,"card-block"],[3,"productSelected"],[1,"order-table","table"],["class","order-line",4,"ngFor","ngForOf"],[1,"sub-total"],[1,"left"],[1,"order-line"],[1,"align-middle","thumb"],[3,"src"],[1,"align-middle","name"],[1,"align-middle","sku"],[1,"align-middle","unit-price"],[1,"align-middle","quantity"],["type","number","max","9999","min","1",3,"ngModelChange","change","ngModel"],[1,"icon-button",3,"click"],["shape","trash"],[1,"align-middle","total"],[1,"card-block","empty-placeholder","card-span"],[1,"empty-text"],["shape","arrow","dir","down","size","96"]],template:function(t,o){if(1&t){const a=e.RV6();e.DNE(0,zo,31,23,"table",1)(1,qo,5,3,"ng-template",null,0,e.C5r),e.j41(3,"div",2)(4,"vdr-product-variant-selector",3),e.bIt("productSelected",function(p){return e.eBV(a),e.Njj(o.selectResult(p))}),e.k0s()()}if(2&t){const a=e.sdS(2);e.Y8G("ngIf",o.lines.length)("ngIfElse",a)}},dependencies:[g.U4n,m.Sq,m.bT,l.me,l.Q0,l.BC,l.VZ,l.zX,l.vS,Jo.ig,G.V,Zo.h,f.D9,Oe.u],styles:[".empty-placeholder[_ngcontent-%COMP%]{color:var(--color-grey-400);text-align:center}.empty-text[_ngcontent-%COMP%]{font-size:22px}.thumb[_ngcontent-%COMP%]{max-width:50px}"],changeDetection:0})}function Ko(i,n){if(1&i&&(e.j41(0,"option",10),e.EFF(1),e.k0s()),2&i){const t=n.$implicit;e.Y8G("value",t.code),e.R7$(),e.SpI(" ",t.name," ")}}class W{constructor(n,t,o){this.formBuilder=n,this.dataService=t,this.localStorageService=o,this.addressChange=new e.bkB}ngOnInit(){this.availableCountries$=this.dataService.settings.getAvailableCountries().mapSingle(o=>o.countries.items);const t=this.localStorageService.getForCurrentLocation("shippingTestAddress")||{city:"",countryCode:"",postalCode:"",province:""};this.addressChange.emit(t),this.form=this.formBuilder.group(t),this.subscription=this.form.valueChanges.subscribe(o=>{this.localStorageService.setForCurrentLocation("shippingTestAddress",o),this.addressChange.emit(o)})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static#e=this.\u0275fac=function(t){return new(t||W)(e.rXU(l.ze),e.rXU(s.uSP),e.rXU(s.sji))};static#t=this.\u0275cmp=e.VBU({type:W,selectors:[["vdr-test-address-form"]],outputs:{addressChange:"addressChange"},decls:20,vars:19,consts:[[1,"card"],[1,"card-header"],[1,"card-block"],[1,"form-grid",3,"formGroup"],[3,"label"],["formControlName","city","type","text"],["formControlName","province","type","text"],["formControlName","postalCode","type","text"],["name","countryCode","formControlName","countryCode"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,o){1&t&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"div",2)(5,"form",3)(6,"vdr-form-field",4),e.nI1(7,"translate"),e.nrm(8,"input",5),e.k0s(),e.j41(9,"vdr-form-field",4),e.nI1(10,"translate"),e.nrm(11,"input",6),e.k0s(),e.j41(12,"vdr-form-field",4),e.nI1(13,"translate"),e.nrm(14,"input",7),e.k0s(),e.j41(15,"vdr-form-field",4),e.nI1(16,"translate"),e.j41(17,"select",8),e.DNE(18,Ko,2,2,"option",9),e.nI1(19,"async"),e.k0s()()()()()),2&t&&(e.R7$(2),e.SpI(" ",e.bMT(3,7,"settings.test-address")," "),e.R7$(3),e.Y8G("formGroup",o.form),e.R7$(),e.Y8G("label",e.bMT(7,9,"customer.city")),e.R7$(3),e.Y8G("label",e.bMT(10,11,"customer.province")),e.R7$(3),e.Y8G("label",e.bMT(13,13,"customer.postal-code")),e.R7$(3),e.Y8G("label",e.bMT(16,15,"customer.country")),e.R7$(3),e.Y8G("ngForOf",e.bMT(19,17,o.availableCountries$)))},dependencies:[m.Sq,l.qT,l.xH,l.y7,l.me,l.wz,l.BC,l.cb,l.j4,l.JD,R.K,G.V,m.Jj,f.D9],styles:["[_nghost-%COMP%]{display:block}clr-input-container[_ngcontent-%COMP%]{margin-bottom:12px}"],changeDetection:0})}const Wo=(i,n,t)=>({success:i,error:n,unknown:t});function Qo(i,n){1&i&&e.nrm(0,"clr-icon",14)}function ea(i,n){1&i&&e.nrm(0,"clr-icon",15)}function ta(i,n){1&i&&e.nrm(0,"clr-icon",16)}function na(i,n){if(1&i&&(e.j41(0,"vdr-labeled-data",4),e.nI1(1,"translate"),e.EFF(2),e.nI1(3,"localeCurrency"),e.k0s()),2&i){const t=e.XpG();e.Y8G("label",e.bMT(1,2,"common.price")),e.R7$(2),e.SpI(" ",e.i5U(3,4,null==t.testResult.quote?null:t.testResult.quote.price,t.currencyCode)," ")}}function ia(i,n){if(1&i&&(e.j41(0,"vdr-labeled-data",4),e.nI1(1,"translate"),e.EFF(2),e.nI1(3,"localeCurrency"),e.k0s()),2&i){const t=e.XpG();e.Y8G("label",e.bMT(1,2,"common.price-with-tax")),e.R7$(2),e.SpI(" ",e.i5U(3,4,null==t.testResult.quote?null:t.testResult.quote.priceWithTax,t.currencyCode)," ")}}function oa(i,n){if(1&i&&e.nrm(0,"vdr-object-tree",17),2&i){const t=e.XpG();e.Y8G("value",null==t.testResult||null==t.testResult.quote?null:t.testResult.quote.metadata)}}class ve{constructor(){this.okToRun=!1,this.testDataUpdated=!1,this.runTest=new e.bkB}static#e=this.\u0275fac=function(t){return new(t||ve)};static#t=this.\u0275cmp=e.VBU({type:ve,selectors:[["vdr-shipping-method-test-result"]],inputs:{testResult:"testResult",okToRun:"okToRun",testDataUpdated:"testDataUpdated",currencyCode:"currencyCode"},outputs:{runTest:"runTest"},decls:21,vars:24,consts:[[1,"test-result","card",3,"ngClass"],[1,"card-header"],[1,"card-block"],[1,"result-details"],[3,"label"],[1,"eligible-icon"],["shape","success-standard","class","is-solid success",4,"ngIf"],["shape","ban","class","is-solid error",4,"ngIf"],["shape","unknown-status",4,"ngIf"],[1,"price-row"],[3,"label",4,"ngIf"],[3,"value",4,"ngIf"],[1,"card-footer"],[1,"btn","btn-secondary",3,"click","disabled"],["shape","success-standard",1,"is-solid","success"],["shape","ban",1,"is-solid","error"],["shape","unknown-status"],[3,"value"]],template:function(t,o){1&t&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"div",2)(5,"div",3)(6,"vdr-labeled-data",4),e.nI1(7,"translate"),e.j41(8,"div",5),e.DNE(9,Qo,1,0,"clr-icon",6)(10,ea,1,0,"clr-icon",7)(11,ta,1,0,"clr-icon",8),e.k0s(),e.EFF(12),e.k0s(),e.j41(13,"div",9),e.DNE(14,na,4,7,"vdr-labeled-data",10)(15,ia,4,7,"vdr-labeled-data",10),e.k0s(),e.DNE(16,oa,1,1,"vdr-object-tree",11),e.k0s()(),e.j41(17,"div",12)(18,"button",13),e.bIt("click",function(){return o.runTest.emit()}),e.EFF(19),e.nI1(20,"translate"),e.k0s()()()),2&t&&(e.Y8G("ngClass",e.sMw(20,Wo,!0===(null==o.testResult?null:o.testResult.eligible),!1===(null==o.testResult?null:o.testResult.eligible),!o.testResult)),e.R7$(2),e.SpI(" ",e.bMT(3,14,"settings.test-result")," "),e.R7$(3),e.AVh("stale",o.testDataUpdated),e.R7$(),e.Y8G("label",e.bMT(7,16,"settings.eligible")),e.R7$(3),e.Y8G("ngIf",null==o.testResult?null:o.testResult.eligible),e.R7$(),e.Y8G("ngIf",!1===(null==o.testResult?null:o.testResult.eligible)),e.R7$(),e.Y8G("ngIf",!o.testResult),e.R7$(),e.SpI(" ",null==o.testResult?null:o.testResult.eligible," "),e.R7$(2),e.Y8G("ngIf",null!=(null==o.testResult||null==o.testResult.quote?null:o.testResult.quote.price)),e.R7$(),e.Y8G("ngIf",null!=(null==o.testResult||null==o.testResult.quote?null:o.testResult.quote.priceWithTax)),e.R7$(),e.Y8G("ngIf",null==o.testResult||null==o.testResult.quote?null:o.testResult.quote.metadata),e.R7$(2),e.Y8G("disabled",!o.okToRun),e.R7$(),e.SpI(" ",e.bMT(20,18,"settings.test-shipping-method")," "))},dependencies:[g.U4n,m.YU,m.bT,ct.B,mt.T,f.D9,Oe.u],styles:["[_nghost-%COMP%]{display:block}.test-result.success[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{background-color:var(--color-success-100)}.test-result.error[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{background-color:var(--color-error-100)}.test-result.unknown[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100)}.result-details[_ngcontent-%COMP%]{transition:opacity .2s}.result-details.stale[_ngcontent-%COMP%]{opacity:.5}.eligible-icon[_ngcontent-%COMP%]{display:inline-block}.eligible-icon[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:var(--color-success-500)}.eligible-icon[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--color-error-500)}.price-row[_ngcontent-%COMP%]{display:flex}.price-row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:first-child){margin-inline-start:24px}"],changeDetection:0})}function aa(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",24),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.create())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("disabled",t.detailForm.pristine||t.detailForm.invalid||!t.selectedChecker||!t.selectedCalculator),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.create")," ")}}function sa(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",24),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.save())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("disabled",t.detailForm.pristine||t.detailForm.invalid||!t.selectedChecker||!t.selectedCalculator),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.update")," ")}}function ra(i,n){if(1&i&&e.DNE(0,sa,3,4,"button",25),2&i){const t=e.XpG();e.Y8G("vdrIfPermissions",t.updatePermission)}}function la(i,n){if(1&i&&(e.j41(0,"vdr-card"),e.nrm(1,"vdr-page-entity-info",26),e.k0s()),2&i){const t=n.ngIf;e.R7$(),e.Y8G("entity",t)}}function da(i,n){if(1&i&&(e.j41(0,"option",27),e.EFF(1),e.k0s()),2&i){const t=n.$implicit;e.Y8G("value",t.code),e.R7$(),e.Lme(" ",t.code,": ",t.description," ")}}function ca(i,n){if(1&i&&(e.j41(0,"vdr-card",28),e.nI1(1,"translate"),e.nrm(2,"vdr-tabbed-custom-fields",29),e.k0s()),2&i){const t=e.XpG();e.Y8G("title",e.bMT(1,3,"common.custom-fields")),e.R7$(2),e.Y8G("customFields",t.customFields)("customFieldsFormGroup",t.detailForm.get("customFields"))}}function ma(i,n){if(1&i){const t=e.RV6();e.j41(0,"vdr-configurable-input",30),e.nI1(1,"hasPermission"),e.bIt("remove",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.selectedChecker=null)}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("operation",t.selectedChecker)("operationDefinition",t.selectedCheckerDefinition)("readonly",!e.bMT(1,3,t.updatePermission))}}function ua(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",36),e.bIt("click",function(){const a=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.selectChecker(a))}),e.EFF(1),e.k0s()}if(2&i){const t=n.$implicit;e.R7$(),e.SpI(" ",t.description," ")}}function pa(i,n){if(1&i&&(e.j41(0,"div",31)(1,"vdr-dropdown")(2,"button",32),e.nrm(3,"clr-icon",33),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.j41(6,"vdr-dropdown-menu",34),e.DNE(7,ua,2,1,"button",35),e.k0s()()()),2&i){const t=e.XpG();e.R7$(4),e.SpI(" ",e.bMT(5,2,"common.select")," "),e.R7$(3),e.Y8G("ngForOf",t.checkers)}}function ha(i,n){if(1&i){const t=e.RV6();e.j41(0,"vdr-configurable-input",37),e.nI1(1,"hasPermission"),e.bIt("remove",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.selectedCalculator=null)}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("operation",t.selectedCalculator)("operationDefinition",t.selectedCalculatorDefinition)("readonly",!e.bMT(1,3,t.updatePermission))}}function ga(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",36),e.bIt("click",function(){const a=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.selectCalculator(a))}),e.EFF(1),e.k0s()}if(2&i){const t=n.$implicit;e.R7$(),e.SpI(" ",t.description," ")}}function fa(i,n){if(1&i&&(e.j41(0,"div",31)(1,"vdr-dropdown")(2,"button",32),e.nrm(3,"clr-icon",33),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.j41(6,"vdr-dropdown-menu",34),e.DNE(7,ga,2,1,"button",35),e.k0s()()()),2&i){const t=e.XpG();e.R7$(4),e.SpI(" ",e.bMT(5,2,"common.select")," "),e.R7$(3),e.Y8G("ngForOf",t.calculators)}}const _a=h.J1`
    query GetShippingMethodDetail($id: ID!) {
        shippingMethod(id: $id) {
            ...ShippingMethod
        }
    }
    ${s._9Q}
`;class Te extends s.wi7{constructor(n,t,o,a){super(),this.changeDetector=n,this.dataService=t,this.formBuilder=o,this.notificationService=a,this.customFields=this.getCustomFieldConfig("ShippingMethod"),this.detailForm=this.formBuilder.group({code:["",l.k0.required],name:["",l.k0.required],description:"",fulfillmentHandler:["",l.k0.required],checker:{},calculator:{},customFields:this.formBuilder.group((0,s.HCD)(this.customFields))}),this.checkers=[],this.calculators=[],this.fulfillmentHandlers=[],this.testDataUpdated=!1,this.updatePermission=[s.aXG.UpdateSettings,s.aXG.UpdateShippingMethod],this.fetchTestResult$=new ee.B}ngOnInit(){this.init(),this.dataService.shippingMethod.getShippingMethodOperations().single$.subscribe(n=>{this.checkers=n.shippingEligibilityCheckers,this.calculators=n.shippingCalculators,this.fulfillmentHandlers=n.fulfillmentHandlers,this.changeDetector.markForCheck(),this.selectedCheckerDefinition=n.shippingEligibilityCheckers.find(t=>t.code===this.entity?.checker?.code),this.selectedCalculatorDefinition=n.shippingCalculators.find(t=>t.code===this.entity?.calculator?.code)}),this.activeChannel$=this.dataService.settings.getActiveChannel().mapStream(n=>n.activeChannel),this.testResult$=this.fetchTestResult$.pipe((0,te.n)(([n,t])=>{const{checker:o,calculator:a}=this.detailForm.value;if(!(this.selectedChecker&&this.selectedCalculator&&o&&a))return(0,Le.of)(void 0);const r={shippingAddress:{...n,streetLine1:"test"},lines:t.map(p=>({productVariantId:p.id,quantity:p.quantity})),checker:(0,s.GfA)(this.selectedChecker,o),calculator:(0,s.GfA)(this.selectedCalculator,a)};return this.dataService.shippingMethod.testShippingMethod(r).mapSingle(p=>p.testShippingMethod)})),(0,Ae.h)(this.detailForm.get(["checker"]).valueChanges,this.detailForm.get(["calculator"]).valueChanges).pipe((0,Ee.Q)(this.destroy$)).subscribe(()=>this.testDataUpdated=!0)}ngOnDestroy(){this.destroy()}updateCode(n,t){if(!n){const o=this.detailForm.get(["code"]);o&&o.pristine&&o.setValue((0,Be.J)(t,"-"))}}selectChecker(n){this.selectedCheckerDefinition=n,this.selectedChecker=(0,s.N9n)(n);const t=this.detailForm.get("checker");t&&(t.clearValidators(),t.updateValueAndValidity({onlySelf:!0}),t.patchValue(this.selectedChecker)),this.detailForm.markAsDirty()}selectCalculator(n){this.selectedCalculatorDefinition=n,this.selectedCalculator=(0,s.N9n)(n);const t=this.detailForm.get("calculator");t&&(t.clearValidators(),t.updateValueAndValidity({onlySelf:!0}),t.patchValue(this.selectedCalculator)),this.detailForm.markAsDirty()}create(){const n=this.selectedChecker,t=this.selectedCalculator,{checker:o,calculator:a}=this.detailForm.value;if(!(n&&t&&o&&a))return;this.detailForm.value;const p={...this.getUpdatedShippingMethod({createdAt:"",updatedAt:"",id:"",code:"",name:"",description:"",fulfillmentHandlerCode:"",checker:void 0,calculator:void 0,translations:[]},this.detailForm,this.languageCode),checker:(0,s.GfA)(n,o),calculator:(0,s.GfA)(t,a)};this.dataService.shippingMethod.createShippingMethod(p).subscribe(y=>{this.notificationService.success((0,d.x)("common.notify-create-success"),{entity:"ShippingMethod"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",y.createShippingMethod.id],{relativeTo:this.route})},y=>{this.notificationService.error((0,d.x)("common.notify-create-error"),{entity:"ShippingMethod"})})}save(){const n=this.selectedChecker,t=this.selectedCalculator,{checker:o,calculator:a}=this.detailForm.value;!n||!t||!o||!a||(0,z.z)([this.entity$,this.languageCode$]).pipe((0,$.s)(1),(0,F.Z)(([r,p])=>{this.detailForm.value;const _={...this.getUpdatedShippingMethod(r,this.detailForm,p),checker:(0,s.GfA)(n,o),calculator:(0,s.GfA)(t,a)};return this.dataService.shippingMethod.updateShippingMethod(_)})).subscribe(r=>{this.notificationService.success((0,d.x)("common.notify-update-success"),{entity:"ShippingMethod"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},r=>{console.error(r),this.notificationService.error((0,d.x)("common.notify-update-error"),{entity:"ShippingMethod"})})}setTestOrderLines(n){this.testOrderLines=n,this.testDataUpdated=!0}setTestAddress(n){this.testAddress=n,this.testDataUpdated=!0}allTestDataPresent(){return!!(this.testAddress&&this.testOrderLines&&this.testOrderLines.length&&this.selectedChecker&&this.selectedCalculator)}runTest(){this.fetchTestResult$.next([this.testAddress,this.testOrderLines]),this.testDataUpdated=!1}getUpdatedShippingMethod(n,t,o){const a=t.value;return{...(0,s.vk6)({translatable:n,updatedFields:a,customFieldConfig:this.customFields,languageCode:o,defaultTranslation:{languageCode:o,name:n.name||"",description:n.description||""}}),fulfillmentHandler:a.fulfillmentHandler}}setFormValues(n,t){const o=(0,s.RMk)(n,t);this.detailForm.patchValue({name:o?.name??"",description:o?.description??"",code:n.code,fulfillmentHandler:n.fulfillmentHandlerCode,checker:n.checker||{},calculator:n.calculator||{}}),this.selectedChecker||(this.selectedChecker=n.checker&&{code:n.checker.code,args:n.checker.args.map(a=>({...a,value:(0,s.gfn)(a.value)}))}),this.selectedCalculator||(this.selectedCalculator=n.calculator&&{code:n.calculator?.code,args:n.calculator?.args.map(a=>({...a,value:(0,s.gfn)(a.value)}))}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customFields"]),n,o)}static#e=this.\u0275fac=function(t){return new(t||Te)(e.rXU(e.gRc),e.rXU(s.uSP),e.rXU(l.ok),e.rXU(s.JEu))};static#t=this.\u0275cmp=e.VBU({type:Te,selectors:[["vdr-shipping-method-detail"]],features:[e.Vt3],decls:56,vars:69,consts:[["updateButton",""],[3,"languageCodeChange","disabled","availableLanguageCodes","currentLanguageCode"],["locationId","shipping-method-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],[4,"ngIf"],[1,"form-grid"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"input","readonly"],["for","code",3,"label","readOnlyToggle"],["id","code","type","text","formControlName","code",3,"readonly"],["formControlName","description",1,"form-grid-span",3,"readonly","label"],["for","fulfillmentHandler",3,"label"],["name","fulfillmentHandler","formControlName","fulfillmentHandler",3,"vdrDisabled"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","shipping-method-detail",3,"entity$","detailForm"],[3,"title"],["class","card-span","formControlName","checker",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],["class","card-span",4,"ngIf"],["class","card-span","formControlName","calculator",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],[1,"card-span",3,"orderLinesChange"],[1,"mt-2",3,"addressChange"],[1,"mt-2",3,"runTest","currencyCode","okToRun","testDataUpdated","testResult"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"],[3,"value"],["formGroupName","customFields",3,"title"],["entityName","ShippingMethod",3,"customFields","customFieldsFormGroup"],["formControlName","checker",1,"card-span",3,"remove","operation","operationDefinition","readonly"],[1,"card-span"],["vdrDropdownTrigger","",1,"btn","btn-outline"],["shape","plus"],["vdrPosition","bottom-left"],["type","button","vdrDropdownItem","",3,"click",4,"ngFor","ngForOf"],["type","button","vdrDropdownItem","",3,"click"],["formControlName","calculator",1,"card-span",3,"remove","operation","operationDefinition","readonly"]],template:function(t,o){if(1&t){const a=e.RV6();e.j41(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left")(3,"vdr-language-selector",1),e.nI1(4,"async"),e.nI1(5,"async"),e.nI1(6,"async"),e.bIt("languageCodeChange",function(p){return e.eBV(a),e.Njj(o.setLanguage(p))}),e.k0s()(),e.j41(7,"vdr-ab-right"),e.nrm(8,"vdr-action-bar-items",2),e.DNE(9,aa,3,4,"button",3),e.nI1(10,"async"),e.DNE(11,ra,1,1,"ng-template",null,0,e.C5r),e.nrm(13,"vdr-action-bar-dropdown-menu",2),e.k0s()()(),e.j41(14,"form",4)(15,"vdr-page-detail-layout")(16,"vdr-page-detail-sidebar"),e.DNE(17,la,2,1,"vdr-card",5),e.nI1(18,"async"),e.k0s(),e.j41(19,"vdr-page-block")(20,"vdr-card")(21,"div",6)(22,"vdr-form-field",7),e.nI1(23,"translate"),e.j41(24,"input",8),e.nI1(25,"hasPermission"),e.bIt("input",function(p){return e.eBV(a),e.Njj(o.updateCode(null==o.entity?null:o.entity.code,p.target.value))}),e.k0s()(),e.j41(26,"vdr-form-field",9),e.nI1(27,"translate"),e.nI1(28,"hasPermission"),e.nrm(29,"input",10),e.nI1(30,"hasPermission"),e.k0s(),e.nrm(31,"vdr-rich-text-editor",11),e.nI1(32,"hasPermission"),e.nI1(33,"translate"),e.j41(34,"vdr-form-field",12),e.nI1(35,"translate"),e.j41(36,"select",13),e.nI1(37,"hasPermission"),e.DNE(38,da,2,3,"option",14),e.k0s()()()(),e.DNE(39,ca,3,5,"vdr-card",15),e.nrm(40,"vdr-custom-detail-component-host",16),e.j41(41,"vdr-card",17),e.nI1(42,"translate"),e.DNE(43,ma,2,5,"vdr-configurable-input",18)(44,pa,8,4,"div",19),e.k0s(),e.j41(45,"vdr-card",17),e.nI1(46,"translate"),e.DNE(47,ha,2,5,"vdr-configurable-input",20)(48,fa,8,4,"div",19),e.k0s(),e.j41(49,"vdr-card",17),e.nI1(50,"translate"),e.j41(51,"vdr-test-order-builder",21),e.bIt("orderLinesChange",function(p){return e.eBV(a),e.Njj(o.setTestOrderLines(p))}),e.k0s(),e.j41(52,"vdr-test-address-form",22),e.bIt("addressChange",function(p){return e.eBV(a),e.Njj(o.setTestAddress(p))}),e.k0s(),e.j41(53,"vdr-shipping-method-test-result",23),e.nI1(54,"async"),e.nI1(55,"async"),e.bIt("runTest",function(){return e.eBV(a),e.Njj(o.runTest())}),e.k0s()()()()()}if(2&t){let a;const r=e.sdS(12);e.R7$(3),e.Y8G("disabled",e.bMT(4,31,o.isNew$))("availableLanguageCodes",e.bMT(5,33,o.availableLanguages$))("currentLanguageCode",e.bMT(6,35,o.languageCode$)),e.R7$(6),e.Y8G("ngIf",e.bMT(10,37,o.isNew$))("ngIfElse",r),e.R7$(5),e.Y8G("formGroup",o.detailForm),e.R7$(3),e.Y8G("ngIf",e.bMT(18,39,o.entity$)),e.R7$(5),e.Y8G("label",e.bMT(23,41,"common.name")),e.R7$(2),e.Y8G("readonly",!e.bMT(25,43,o.updatePermission)),e.R7$(2),e.Y8G("label",e.bMT(27,45,"common.code"))("readOnlyToggle",e.bMT(28,47,o.updatePermission)),e.R7$(3),e.Y8G("readonly",!e.bMT(30,49,o.updatePermission)),e.R7$(2),e.Y8G("readonly",!e.bMT(32,51,o.updatePermission))("label",e.bMT(33,53,"common.description")),e.R7$(3),e.Y8G("label",e.bMT(35,55,"settings.fulfillment-handler")),e.R7$(2),e.Y8G("vdrDisabled",!e.bMT(37,57,o.updatePermission)),e.R7$(2),e.Y8G("ngForOf",o.fulfillmentHandlers),e.R7$(),e.Y8G("ngIf",o.customFields.length),e.R7$(),e.Y8G("entity$",o.entity$)("detailForm",o.detailForm),e.R7$(),e.Y8G("title",e.bMT(42,59,"settings.shipping-eligibility-checker")),e.R7$(2),e.Y8G("ngIf",o.selectedChecker&&o.selectedCheckerDefinition),e.R7$(),e.Y8G("ngIf",!o.selectedChecker||!o.selectedCheckerDefinition),e.R7$(),e.Y8G("title",e.bMT(46,61,"settings.shipping-calculator")),e.R7$(2),e.Y8G("ngIf",o.selectedCalculator&&o.selectedCalculatorDefinition),e.R7$(),e.Y8G("ngIf",!o.selectedCalculator||!o.selectedCalculatorDefinition),e.R7$(),e.Y8G("title",e.bMT(50,63,"settings.test-shipping-method")),e.R7$(4),e.Y8G("currencyCode",null==(a=e.bMT(54,65,o.activeChannel$))?null:a.currencyCode)("okToRun",o.allTestDataPresent()&&o.testDataUpdated&&o.detailForm.valid)("testDataUpdated",o.testDataUpdated)("testResult",e.bMT(55,67,o.testResult$))}},dependencies:[g.U4n,m.Sq,m.bT,l.qT,l.xH,l.y7,l.me,l.wz,l.BC,l.cb,l.j4,l.JD,l.$R,u.nG,u.wL,u.TX,T.l,et.h,R.K,G.V,Z.t,xe.q,tt.P,nt.q,it.j,ot.M,I.p,v.T,X.y,j.W,N.L,C.e,Y.E,A.c,B.e,D.i,K,W,ve,m.Jj,f.D9,x.E],changeDetection:0})}const ut=(0,s.AfA)({location:"shipping-method-list",requiresPermission:i=>i.includes(s.aXG.DeleteShippingMethod),getItemName:i=>i.name,bulkDelete:(i,n)=>i.shippingMethod.deleteShippingMethods(n).pipe((0,b.T)(t=>t.deleteShippingMethods))}),pt=(h.J1`
    mutation AssignShippingMethodsToChannel($input: AssignShippingMethodsToChannelInput!) {
        assignShippingMethodsToChannel(input: $input) {
            id
            name
        }
    }
`,h.J1`
    mutation RemoveShippingMethodsFromChannel($input: RemoveShippingMethodsFromChannelInput!) {
        removeShippingMethodsFromChannel(input: $input) {
            id
            name
        }
    }
`,(0,s.oUe)({location:"shipping-method-list",requiresPermission:i=>i.includes(s.aXG.UpdateShippingMethod)||i.includes(s.aXG.UpdateSettings),getItemName:i=>i.name,bulkAssignToChannel:(i,n,t)=>t.map(o=>i.mutate(s.vrO,{input:{channelId:o,shippingMethodIds:n}}).pipe((0,b.T)(a=>a.assignShippingMethodsToChannel)))})),ht=(0,s.YSJ)({location:"shipping-method-list",requiresPermission:i=>i.includes(s.aXG.DeleteShippingMethod)||i.includes(s.aXG.DeleteSettings),getItemName:i=>i.name,bulkRemoveFromChannel:(i,n,t)=>i.mutate(s.ZLb,{input:{channelId:t,shippingMethodIds:n}}).pipe((0,b.T)(o=>o.removeShippingMethodsFromChannel))}),ba=()=>["CreateSettings","CreateShippingMethod"],Ca=()=>["./","create"],va=i=>["./",i];function Ta(i,n){1&i&&(e.j41(0,"a",14),e.nrm(1,"clr-icon",15),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&i&&(e.Y8G("routerLink",e.lJ4(4,Ca)),e.R7$(2),e.SpI(" ",e.bMT(3,2,"settings.create-new-shipping-method")," "))}function Ia(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",t.id," ")}}function ya(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.createdAt,"short")," ")}}function Fa(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.updatedAt,"short")," ")}}function ka(i,n){if(1&i&&(e.j41(0,"a",16)(1,"span"),e.EFF(2),e.k0s(),e.nrm(3,"clr-icon",17),e.k0s()),2&i){const t=n.item;e.Y8G("routerLink",e.eq3(2,va,t.id)),e.R7$(2),e.JRh(t.name)}}function Ga(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",t.code," ")}}function Ra(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",t.description," ")}}function Da(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",t.fulfillmentHandlerCode," ")}}function $a(i,n){if(1&i&&e.nrm(0,"vdr-dt2-custom-field-column",18),2&i){const t=n.$implicit,o=e.XpG();e.Y8G("customField",t)("sorts",o.sorts)}}const Ma=h.J1`
    query GetShippingMethodList($options: ShippingMethodListOptions) {
        shippingMethods(options: $options) {
            items {
                ...ShippingMethodListItem
            }
            totalItems
        }
    }
    fragment ShippingMethodListItem on ShippingMethod {
        id
        createdAt
        updatedAt
        code
        name
        description
        fulfillmentHandlerCode
    }
`;class Ie extends s.B8I{constructor(){super(),this.dataTableListId="shipping-method-list",this.customFields=this.getCustomFieldConfig("ShippingMethod"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilter({name:"name",type:{kind:"text"},label:(0,d.x)("common.name"),filterField:"name"}).addFilter({name:"code",type:{kind:"text"},label:(0,d.x)("common.code"),filterField:"code"}).addFilter({name:"description",type:{kind:"text"},label:(0,d.x)("common.description"),filterField:"description"}).addFilter({name:"fulfillmentHandler",type:{kind:"text"},label:(0,d.x)("settings.fulfillment-handler"),filterField:"fulfillmentHandlerCode"}).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("createdAt","DESC").addSort({name:"createdAt"}).addSort({name:"updatedAt"}).addSort({name:"name"}).addSort({name:"code"}).addSort({name:"description"}).addSort({name:"fulfillmentHandlerCode"}).addCustomFieldSorts(this.customFields).connectToRoute(this.route),super.configure({document:s.rzd,getItems:n=>n.shippingMethods,setVariables:(n,t)=>({options:{skip:n,take:t,filter:{name:{contains:this.searchTermControl.value},...this.filters.createFilterInput()},sort:this.sorts.createSortInput()}}),refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}static#e=this.\u0275fac=function(t){return new(t||Ie)};static#t=this.\u0275cmp=e.VBU({type:Ie,selectors:[["vdr-shipping-method-list"]],features:[e.Vt3],decls:40,vars:61,consts:[[3,"languageCodeChange","availableLanguageCodes","currentLanguageCode"],["locationId","shipping-method-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","shipping-method-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","name",3,"heading","optional","sort"],["id","code",3,"heading","sort"],["id","description",3,"heading","sort","hiddenByDefault"],["id","fulfillment-handler",3,"heading","sort"],[3,"customField","sorts",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],[3,"customField","sorts"]],template:function(t,o){1&t&&(e.j41(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left")(3,"vdr-language-selector",0),e.nI1(4,"async"),e.nI1(5,"async"),e.bIt("languageCodeChange",function(r){return o.setLanguage(r)}),e.k0s()(),e.j41(6,"vdr-ab-right"),e.nrm(7,"vdr-action-bar-items",1),e.DNE(8,Ta,4,5,"a",2),e.nrm(9,"vdr-action-bar-dropdown-menu",1),e.k0s()()(),e.j41(10,"vdr-data-table-2",3),e.nI1(11,"async"),e.nI1(12,"async"),e.nI1(13,"async"),e.nI1(14,"async"),e.bIt("pageChange",function(r){return o.setPageNumber(r)})("itemsPerPageChange",function(r){return o.setItemsPerPage(r)})("visibleColumnsChange",function(r){return o.setVisibleColumns(r)}),e.nrm(15,"vdr-bulk-action-menu",4)(16,"vdr-dt2-search",5),e.nI1(17,"translate"),e.j41(18,"vdr-dt2-column",6),e.nI1(19,"translate"),e.DNE(20,Ia,1,1,"ng-template"),e.k0s(),e.j41(21,"vdr-dt2-column",7),e.nI1(22,"translate"),e.DNE(23,ya,2,4,"ng-template"),e.k0s(),e.j41(24,"vdr-dt2-column",8),e.nI1(25,"translate"),e.DNE(26,Fa,2,4,"ng-template"),e.k0s(),e.j41(27,"vdr-dt2-column",9),e.nI1(28,"translate"),e.DNE(29,ka,4,4,"ng-template"),e.k0s(),e.j41(30,"vdr-dt2-column",10),e.nI1(31,"translate"),e.DNE(32,Ga,1,1,"ng-template"),e.k0s(),e.j41(33,"vdr-dt2-column",11),e.nI1(34,"translate"),e.DNE(35,Ra,1,1,"ng-template"),e.k0s(),e.j41(36,"vdr-dt2-column",12),e.nI1(37,"translate"),e.DNE(38,Da,1,1,"ng-template"),e.k0s(),e.DNE(39,$a,1,2,"vdr-dt2-custom-field-column",13),e.k0s()),2&t&&(e.R7$(3),e.Y8G("availableLanguageCodes",e.bMT(4,32,o.availableLanguages$))("currentLanguageCode",e.bMT(5,34,o.contentLanguage$)),e.R7$(5),e.Y8G("vdrIfPermissions",e.lJ4(60,ba)),e.R7$(2),e.Y8G("id",o.dataTableListId)("items",e.bMT(11,36,o.items$))("itemsPerPage",e.bMT(12,38,o.itemsPerPage$))("totalItems",e.bMT(13,40,o.totalItems$))("currentPage",e.bMT(14,42,o.currentPage$))("filters",o.filters),e.R7$(5),e.Y8G("hostComponent",o)("selectionManager",o.selectionManager),e.R7$(),e.Y8G("searchTermControl",o.searchTermControl)("searchTermPlaceholder",e.bMT(17,44,"catalog.filter-by-name")),e.R7$(2),e.Y8G("heading",e.bMT(19,46,"common.id"))("hiddenByDefault",!0),e.R7$(3),e.Y8G("heading",e.bMT(22,48,"common.created-at"))("hiddenByDefault",!0)("sort",o.sorts.get("createdAt")),e.R7$(3),e.Y8G("heading",e.bMT(25,50,"common.updated-at"))("hiddenByDefault",!0)("sort",o.sorts.get("updatedAt")),e.R7$(3),e.Y8G("heading",e.bMT(28,52,"common.name"))("optional",!1)("sort",o.sorts.get("name")),e.R7$(3),e.Y8G("heading",e.bMT(31,54,"common.code"))("sort",o.sorts.get("code")),e.R7$(3),e.Y8G("heading",e.bMT(34,56,"common.description"))("sort",o.sorts.get("description"))("hiddenByDefault",!0),e.R7$(3),e.Y8G("heading",e.bMT(37,58,"settings.fulfillment-handler"))("sort",o.sorts.get("fulfillmentHandlerCode")),e.R7$(3),e.Y8G("ngForOf",o.customFields))},dependencies:[g.U4n,m.Sq,k.Wk,u.nG,u.wL,u.TX,T.l,Z.t,I.p,v.T,M.T,S.I,P.Y,L.E,O.T,C.e,m.Jj,f.D9,E.P],changeDetection:0})}const Sa=i=>({pattern:i});function Pa(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",12),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.create())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("disabled",t.detailForm.invalid||t.detailForm.pristine),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.create")," ")}}function La(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",12),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.save())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("disabled",t.detailForm.invalid||t.detailForm.pristine),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.update")," ")}}function Ea(i,n){1&i&&e.DNE(0,La,3,4,"button",13),2&i&&e.Y8G("vdrIfPermissions","UpdateStockLocation")}function ja(i,n){if(1&i&&(e.j41(0,"vdr-card"),e.nrm(1,"vdr-page-entity-info",14),e.k0s()),2&i){const t=n.ngIf;e.R7$(),e.Y8G("entity",t)}}function Na(i,n){if(1&i&&(e.j41(0,"vdr-card",15),e.nI1(1,"translate"),e.nrm(2,"vdr-tabbed-custom-fields",16),e.k0s()),2&i){const t=e.XpG();e.Y8G("title",e.bMT(1,3,"common.custom-fields")),e.R7$(2),e.Y8G("customFields",t.customFields)("customFieldsFormGroup",t.detailForm.get("customFields"))}}const Ve=h.J1`
    fragment StockLocationDetail on StockLocation {
        id
        createdAt
        updatedAt
        name
        description
    }
`,Ya=h.J1`
    query GetStockLocationDetail($id: ID!) {
        stockLocation(id: $id) {
            ...StockLocationDetail
        }
    }
    ${Ve}
`,Aa=h.J1`
    mutation CreateStockLocation($input: CreateStockLocationInput!) {
        createStockLocation(input: $input) {
            ...StockLocationDetail
        }
    }
    ${Ve}
`,Ba=h.J1`
    mutation UpdateStockLocation($input: UpdateStockLocationInput!) {
        updateStockLocation(input: $input) {
            ...StockLocationDetail
        }
    }
    ${Ve}
`;class ye extends s.wi7{constructor(n,t,o,a){super(),this.changeDetector=n,this.dataService=t,this.formBuilder=o,this.notificationService=a,this.customFields=this.getCustomFieldConfig("StockLocation"),this.detailForm=this.formBuilder.group({name:["",l.k0.required],description:[""],customFields:this.formBuilder.group((0,s.HCD)(this.customFields))})}ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}create(){if(!this.detailForm.dirty)return;const{name:n,description:t,customFields:o}=this.detailForm.value;if(!n)return;const a={name:n,description:t,customFields:o};this.dataService.mutate(s.fUD,{input:a}).subscribe(r=>{this.notificationService.success((0,d.x)("common.notify-create-success"),{entity:"StockLocation"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",r.createStockLocation.id],{relativeTo:this.route})},r=>{this.notificationService.error((0,d.x)("common.notify-create-error"),{entity:"StockLocation"})})}save(){if(!this.detailForm.dirty)return;const n=this.detailForm.value;this.entity$.pipe((0,$.s)(1),(0,F.Z)(t=>{const o={id:t.id,name:n.name,description:n.description,customFields:n.customFields};return this.dataService.mutate(s.sns,{input:o})})).subscribe(t=>{this.notificationService.success((0,d.x)("common.notify-update-success"),{entity:"StockLocation"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},t=>{this.notificationService.error((0,d.x)("common.notify-update-error"),{entity:"StockLocation"})})}setFormValues(n){this.detailForm.patchValue({name:n.name,description:n.description}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),n)}static#e=this.\u0275fac=function(t){return new(t||ye)(e.rXU(e.gRc),e.rXU(s.uSP),e.rXU(l.ok),e.rXU(s.JEu))};static#t=this.\u0275cmp=e.VBU({type:ye,selectors:[["vdr-stock-location-detail"]],features:[e.Vt3],decls:29,vars:28,consts:[["updateButton",""],["locationId","stock-location-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],[4,"ngIf"],[1,"form-grid"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","slug",1,"form-grid-span",3,"label","errors"],["formControlName","description",3,"readonly"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","stock-location-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"],["formGroupName","customFields",3,"title"],["entityName","StockLocation",3,"customFields","customFieldsFormGroup"]],template:function(t,o){if(1&t&&(e.j41(0,"vdr-page-block")(1,"vdr-action-bar"),e.nrm(2,"vdr-ab-left"),e.j41(3,"vdr-ab-right"),e.nrm(4,"vdr-action-bar-items",1),e.DNE(5,Pa,3,4,"button",2),e.nI1(6,"async"),e.DNE(7,Ea,1,1,"ng-template",null,0,e.C5r),e.nrm(9,"vdr-action-bar-dropdown-menu",1),e.k0s()()(),e.j41(10,"form",3)(11,"vdr-page-detail-layout")(12,"vdr-page-detail-sidebar"),e.DNE(13,ja,2,1,"vdr-card",4),e.nI1(14,"async"),e.k0s(),e.j41(15,"vdr-page-block")(16,"vdr-card")(17,"div",5)(18,"vdr-form-field",6),e.nI1(19,"translate"),e.nrm(20,"input",7),e.nI1(21,"hasPermission"),e.k0s(),e.j41(22,"vdr-form-field",8),e.nI1(23,"translate"),e.nI1(24,"translate"),e.nrm(25,"vdr-rich-text-editor",9),e.nI1(26,"hasPermission"),e.k0s()()(),e.DNE(27,Na,3,5,"vdr-card",10),e.nrm(28,"vdr-custom-detail-component-host",11),e.k0s()()()),2&t){const a=e.sdS(8);e.R7$(5),e.Y8G("ngIf",e.bMT(6,12,o.isNew$))("ngIfElse",a),e.R7$(5),e.Y8G("formGroup",o.detailForm),e.R7$(3),e.Y8G("ngIf",e.bMT(14,14,o.entity$)),e.R7$(5),e.Y8G("label",e.bMT(19,16,"common.name")),e.R7$(2),e.Y8G("readonly",!e.bMT(21,18,"UpdateStockLocation")),e.R7$(2),e.Y8G("label",e.bMT(23,20,"common.description"))("errors",e.eq3(26,Sa,e.bMT(24,22,"catalog.slug-pattern-error"))),e.R7$(3),e.Y8G("readonly",!e.bMT(26,24,"UpdateStockLocation")),e.R7$(2),e.Y8G("ngIf",o.customFields.length),e.R7$(),e.Y8G("entity$",o.entity$)("detailForm",o.detailForm)}},dependencies:[m.bT,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,l.$R,u.nG,u.wL,u.TX,T.l,R.K,G.V,xe.q,I.p,v.T,j.W,N.L,C.e,Y.E,A.c,B.e,D.i,m.Jj,f.D9,x.E],changeDetection:0})}h.J1`
    mutation DeleteStockLocations($input: [DeleteStockLocationInput!]!) {
        deleteStockLocations(input: $input) {
            result
            message
        }
    }
`,h.J1`
    mutation AssignStockLocationsToChannel($input: AssignStockLocationsToChannelInput!) {
        assignStockLocationsToChannel(input: $input) {
            id
            name
        }
    }
`,h.J1`
    mutation RemoveStockLocationsFromChannel($input: RemoveStockLocationsFromChannelInput!) {
        removeStockLocationsFromChannel(input: $input) {
            id
            name
        }
    }
`;const gt=(0,s.AfA)({location:"stock-location-list",requiresPermission:i=>i.includes(s.aXG.DeleteStockLocation)||i.includes(s.aXG.DeleteCatalog),getItemName:i=>i.name,bulkDelete:(i,n)=>i.mutate(s.luN,{input:n.map(t=>({id:t}))}).pipe((0,b.T)(t=>t.deleteStockLocations)),shouldRetryItem:i=>i.result===s.syg.NOT_DELETED}),ft=(0,s.oUe)({location:"stock-location-list",requiresPermission:i=>i.includes(s.aXG.UpdateCatalog)||i.includes(s.aXG.UpdateStockLocation),getItemName:i=>i.name,bulkAssignToChannel:(i,n,t)=>t.map(o=>i.mutate(s.$K7,{input:{channelId:o,stockLocationIds:n}}).pipe((0,b.T)(a=>a.assignStockLocationsToChannel)))}),_t=(0,s.YSJ)({location:"stock-location-list",requiresPermission:i=>i.includes(s.aXG.DeleteCatalog)||i.includes(s.aXG.DeleteStockLocation),getItemName:i=>i.name,bulkRemoveFromChannel:(i,n,t)=>i.mutate(s.FfT,{input:{channelId:t,stockLocationIds:n}}).pipe((0,b.T)(o=>o.removeStockLocationsFromChannel))}),xa=()=>["CreateStockLocation"],Oa=()=>["./","create"],Va=i=>["./",i];function Xa(i,n){1&i&&(e.j41(0,"a",11),e.nrm(1,"clr-icon",12),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&i&&(e.Y8G("routerLink",e.lJ4(4,Oa)),e.R7$(2),e.SpI(" ",e.bMT(3,2,"catalog.create-new-stock-location")," "))}function Ua(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",t.id," ")}}function wa(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.createdAt,"short")," ")}}function Ja(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.updatedAt,"short")," ")}}function Za(i,n){if(1&i&&(e.j41(0,"a",13)(1,"span"),e.EFF(2),e.k0s(),e.nrm(3,"clr-icon",14),e.k0s()),2&i){const t=n.item;e.Y8G("routerLink",e.eq3(2,Va,t.id)),e.R7$(2),e.JRh(t.name)}}function Ha(i,n){if(1&i&&e.nrm(0,"div",15),2&i){const t=n.item;e.Y8G("innerHTML",t.description,e.npT)}}function za(i,n){if(1&i&&e.nrm(0,"vdr-dt2-custom-field-column",16),2&i){const t=n.$implicit,o=e.XpG();e.Y8G("customField",t)("sorts",o.sorts)}}const qa=h.J1`
    query GetStockLocationList($options: StockLocationListOptions) {
        stockLocations(options: $options) {
            items {
                ...StockLocationListItem
            }
            totalItems
        }
    }
    fragment StockLocationListItem on StockLocation {
        id
        createdAt
        updatedAt
        name
        description
    }
`;class Fe extends s.B8I{constructor(){super(),this.dataTableListId="stock-location-list",this.customFields=this.getCustomFieldConfig("StockLocation"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilters([{name:"enabled",type:{kind:"text"},label:(0,d.x)("common.enabled"),filterField:"name"},{name:"sku",type:{kind:"text"},label:(0,d.x)("catalog.sku"),filterField:"description"}]).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().addSorts([{name:"id"},{name:"createdAt"},{name:"updatedAt"},{name:"name"},{name:"description"}]).addCustomFieldSorts(this.customFields).connectToRoute(this.route),this.configure({document:s.jju,getItems:n=>n.stockLocations,setVariables:(n,t)=>({options:{skip:n,take:t,filter:{name:{contains:this.searchTermControl.value},...this.filters.createFilterInput()},sort:this.sorts.createSortInput()}}),refreshListOnChanges:[this.sorts.valueChanges,this.filters.valueChanges]})}static#e=this.\u0275fac=function(t){return new(t||Fe)};static#t=this.\u0275cmp=e.VBU({type:Fe,selectors:[["vdr-stock-location-list"]],features:[e.Vt3],decls:31,vars:47,consts:[["locationId","stock-location-list"],["class","button primary",3,"routerLink",4,"vdrIfPermissions"],[1,"mt-2",3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","stock-location-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault","sort"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","name",3,"heading","optional","sort"],["id","description",3,"heading","sort"],[3,"customField","sorts",4,"ngFor","ngForOf"],[1,"button","primary",3,"routerLink"],["shape","plus"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],[1,"description",3,"innerHTML"],[3,"customField","sorts"]],template:function(t,o){1&t&&(e.j41(0,"vdr-page-block")(1,"vdr-action-bar"),e.nrm(2,"vdr-ab-left"),e.j41(3,"vdr-ab-right"),e.nrm(4,"vdr-action-bar-items",0),e.DNE(5,Xa,4,5,"a",1),e.nrm(6,"vdr-action-bar-dropdown-menu",0),e.k0s()()(),e.j41(7,"vdr-data-table-2",2),e.nI1(8,"async"),e.nI1(9,"async"),e.nI1(10,"async"),e.nI1(11,"async"),e.bIt("pageChange",function(r){return o.setPageNumber(r)})("itemsPerPageChange",function(r){return o.setItemsPerPage(r)})("visibleColumnsChange",function(r){return o.setVisibleColumns(r)}),e.nrm(12,"vdr-bulk-action-menu",3)(13,"vdr-dt2-search",4),e.nI1(14,"translate"),e.j41(15,"vdr-dt2-column",5),e.nI1(16,"translate"),e.DNE(17,Ua,1,1,"ng-template"),e.k0s(),e.j41(18,"vdr-dt2-column",6),e.nI1(19,"translate"),e.DNE(20,wa,2,4,"ng-template"),e.k0s(),e.j41(21,"vdr-dt2-column",7),e.nI1(22,"translate"),e.DNE(23,Ja,2,4,"ng-template"),e.k0s(),e.j41(24,"vdr-dt2-column",8),e.nI1(25,"translate"),e.DNE(26,Za,4,4,"ng-template"),e.k0s(),e.j41(27,"vdr-dt2-column",9),e.nI1(28,"translate"),e.DNE(29,Ha,1,1,"ng-template"),e.k0s(),e.DNE(30,za,1,2,"vdr-dt2-custom-field-column",10),e.k0s()),2&t&&(e.R7$(5),e.Y8G("vdrIfPermissions",e.lJ4(46,xa)),e.R7$(2),e.Y8G("id",o.dataTableListId)("items",e.bMT(8,26,o.items$))("itemsPerPage",e.bMT(9,28,o.itemsPerPage$))("totalItems",e.bMT(10,30,o.totalItems$))("currentPage",e.bMT(11,32,o.currentPage$))("filters",o.filters),e.R7$(5),e.Y8G("hostComponent",o)("selectionManager",o.selectionManager),e.R7$(),e.Y8G("searchTermControl",o.searchTermControl)("searchTermPlaceholder",e.bMT(14,34,"catalog.filter-by-name")),e.R7$(2),e.Y8G("heading",e.bMT(16,36,"common.id"))("hiddenByDefault",!0)("sort",o.sorts.get("id")),e.R7$(3),e.Y8G("heading",e.bMT(19,38,"common.created-at"))("hiddenByDefault",!0)("sort",o.sorts.get("createdAt")),e.R7$(3),e.Y8G("heading",e.bMT(22,40,"common.updated-at"))("hiddenByDefault",!0)("sort",o.sorts.get("updatedAt")),e.R7$(3),e.Y8G("heading",e.bMT(25,42,"common.name"))("optional",!1)("sort",o.sorts.get("name")),e.R7$(3),e.Y8G("heading",e.bMT(28,44,"common.description"))("sort",o.sorts.get("description")),e.R7$(3),e.Y8G("ngForOf",o.customFields))},dependencies:[g.U4n,m.Sq,k.Wk,u.nG,u.wL,u.TX,T.l,I.p,v.T,M.T,S.I,P.Y,L.E,O.T,C.e,m.Jj,f.D9,E.P],styles:[".description>p{margin-top:0!important}"],changeDetection:0})}function Ka(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",12),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.create())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("disabled",!t.saveButtonEnabled()),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.create")," ")}}function Wa(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",12),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.save())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("disabled",!t.saveButtonEnabled()),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.update")," ")}}function Qa(i,n){if(1&i&&e.DNE(0,Wa,3,4,"button",13),2&i){const t=e.XpG();e.Y8G("vdrIfPermissions",t.updatePermission)}}function es(i,n){if(1&i&&(e.j41(0,"vdr-card"),e.nrm(1,"vdr-page-entity-info",14),e.k0s()),2&i){const t=n.ngIf;e.R7$(),e.Y8G("entity",t)}}function ts(i,n){if(1&i&&(e.j41(0,"vdr-card",15),e.nI1(1,"translate"),e.nrm(2,"vdr-tabbed-custom-fields",16),e.k0s()),2&i){const t=e.XpG();e.Y8G("title",e.bMT(1,3,"common.custom-fields")),e.R7$(2),e.Y8G("customFields",t.customFields)("customFieldsFormGroup",t.detailForm.get("customFields"))}}const ns=h.J1`
    query GetTaxCategoryDetail($id: ID!) {
        taxCategory(id: $id) {
            ...TaxCategory
        }
    }
    ${s.M5i}
`;class ke extends s.wi7{constructor(n,t,o,a){super(),this.changeDetector=n,this.dataService=t,this.formBuilder=o,this.notificationService=a,this.customFields=this.getCustomFieldConfig("TaxCategory"),this.detailForm=this.formBuilder.group({name:["",l.k0.required],isDefault:!1,customFields:this.formBuilder.group((0,s.HCD)(this.customFields))}),this.updatePermission=[s.aXG.UpdateSettings,s.aXG.UpdateTaxCategory]}ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}saveButtonEnabled(){return this.detailForm.dirty&&this.detailForm.valid}create(){if(!this.detailForm.dirty)return;const n=this.detailForm.value,t={name:n.name,isDefault:n.isDefault,customFields:n.customFields};this.dataService.settings.createTaxCategory(t).subscribe(o=>{this.notificationService.success((0,d.x)("common.notify-create-success"),{entity:"TaxCategory"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",o.createTaxCategory.id],{relativeTo:this.route})},o=>{this.notificationService.error((0,d.x)("common.notify-create-error"),{entity:"TaxCategory"})})}save(){if(!this.detailForm.dirty)return;const n=this.detailForm.value;this.entity$.pipe((0,$.s)(1),(0,F.Z)(t=>{const o={id:t.id,name:n.name,isDefault:n.isDefault,customFields:n.customFields};return this.dataService.settings.updateTaxCategory(o)})).subscribe(t=>{this.notificationService.success((0,d.x)("common.notify-update-success"),{entity:"TaxCategory"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},t=>{this.notificationService.error((0,d.x)("common.notify-update-error"),{entity:"TaxCategory"})})}setFormValues(n,t){this.detailForm.patchValue({name:n.name,isDefault:n.isDefault}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),n)}static#e=this.\u0275fac=function(t){return new(t||ke)(e.rXU(e.gRc),e.rXU(s.uSP),e.rXU(l.ok),e.rXU(s.JEu))};static#t=this.\u0275cmp=e.VBU({type:ke,selectors:[["vdr-tax-detail"]],features:[e.Vt3],decls:29,vars:23,consts:[["updateButton",""],["locationId","tax-category-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],[4,"ngIf"],[1,"form-grid"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","isDefault",3,"label"],["type","checkbox","clrToggle","","id","isDefault","formControlName","isDefault",3,"vdrDisabled"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","tax-category-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"],["formGroupName","customFields",3,"title"],["entityName","TaxCategory",3,"customFields","customFieldsFormGroup"]],template:function(t,o){if(1&t&&(e.j41(0,"vdr-page-block")(1,"vdr-action-bar"),e.nrm(2,"vdr-ab-left"),e.j41(3,"vdr-ab-right"),e.nrm(4,"vdr-action-bar-items",1),e.DNE(5,Ka,3,4,"button",2),e.nI1(6,"async"),e.DNE(7,Qa,1,1,"ng-template",null,0,e.C5r),e.nrm(9,"vdr-action-bar-dropdown-menu",1),e.k0s()()(),e.j41(10,"form",3)(11,"vdr-page-detail-layout")(12,"vdr-page-detail-sidebar"),e.DNE(13,es,2,1,"vdr-card",4),e.nI1(14,"async"),e.k0s(),e.j41(15,"vdr-page-block")(16,"vdr-card")(17,"div",5)(18,"vdr-form-field",6),e.nI1(19,"translate"),e.nrm(20,"input",7),e.nI1(21,"hasPermission"),e.k0s(),e.j41(22,"vdr-form-field",8),e.nI1(23,"translate"),e.j41(24,"clr-toggle-wrapper"),e.nrm(25,"input",9),e.nI1(26,"hasPermission"),e.k0s()()()(),e.DNE(27,ts,3,5,"vdr-card",10),e.nrm(28,"vdr-custom-detail-component-host",11),e.k0s()()()),2&t){const a=e.sdS(8);e.R7$(5),e.Y8G("ngIf",e.bMT(6,11,o.isNew$))("ngIfElse",a),e.R7$(5),e.Y8G("formGroup",o.detailForm),e.R7$(3),e.Y8G("ngIf",e.bMT(14,13,o.entity$)),e.R7$(5),e.Y8G("label",e.bMT(19,15,"common.name")),e.R7$(2),e.Y8G("readonly",!e.bMT(21,17,o.updatePermission)),e.R7$(2),e.Y8G("label",e.bMT(23,19,"common.default-tax-category")),e.R7$(3),e.Y8G("vdrDisabled",!e.bMT(26,21,o.updatePermission)),e.R7$(2),e.Y8G("ngIf",o.customFields.length),e.R7$(),e.Y8G("entity$",o.entity$)("detailForm",o.detailForm)}},dependencies:[g.Jej,g.eAx,m.bT,l.qT,l.me,l.Zm,l.BC,l.cb,l.j4,l.JD,l.$R,u.nG,u.wL,u.TX,T.l,R.K,G.V,I.p,v.T,X.y,j.W,N.L,C.e,Y.E,A.c,B.e,D.i,m.Jj,f.D9,x.E],changeDetection:0})}const bt=(0,s.AfA)({location:"tax-category-list",requiresPermission:i=>i.includes(s.aXG.DeleteSettings)||i.includes(s.aXG.DeleteTaxCategory),getItemName:i=>i.name,bulkDelete:(i,n)=>i.settings.deleteTaxCategories(n).pipe((0,b.T)(t=>t.deleteTaxCategories))}),is=()=>["CreateSettings","CreateTaxCategory"],os=()=>["./","create"],as=i=>["./",i];function ss(i,n){1&i&&(e.j41(0,"a",11),e.nrm(1,"clr-icon",12),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&i&&(e.Y8G("routerLink",e.lJ4(4,os)),e.R7$(2),e.SpI(" ",e.bMT(3,2,"settings.create-new-tax-category")," "))}function rs(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",t.id," ")}}function ls(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.createdAt,"short")," ")}}function ds(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.updatedAt,"short")," ")}}function cs(i,n){if(1&i&&(e.j41(0,"a",13)(1,"span"),e.EFF(2),e.k0s(),e.nrm(3,"clr-icon",14),e.k0s()),2&i){const t=n.item;e.Y8G("routerLink",e.eq3(2,as,t.id)),e.R7$(2),e.JRh(t.name)}}function ms(i,n){1&i&&(e.j41(0,"vdr-chip"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"common.default-tax-category")))}function us(i,n){if(1&i&&e.DNE(0,ms,3,3,"vdr-chip",15),2&i){const t=n.item;e.Y8G("ngIf",t.isDefault)}}function ps(i,n){if(1&i&&e.nrm(0,"vdr-dt2-custom-field-column",16),2&i){const t=n.$implicit,o=e.XpG();e.Y8G("customField",t)("sorts",o.sorts)}}const hs=h.J1`
    query GetTaxCategoryList($options: TaxCategoryListOptions) {
        taxCategories(options: $options) {
            items {
                ...TaxCategory
            }
            totalItems
        }
    }
    ${s.M5i}
`;class Ge extends s.B8I{constructor(){super(),this.dataTableListId="tax-category-list",this.customFields=this.serverConfigService.getCustomFieldsFor("TaxCategory"),this.filters=this.createFilterCollection().addIdFilter().addFilter({name:"name",type:{kind:"text"},label:(0,d.x)("common.name"),filterField:"name"}).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("createdAt","DESC").addSort({name:"createdAt"}).addSort({name:"updatedAt"}).addSort({name:"name"}).addCustomFieldSorts(this.customFields).connectToRoute(this.route),super.configure({document:s.FY9,getItems:n=>n.taxCategories,setVariables:(n,t)=>({options:{skip:n,take:t,filter:{name:{contains:this.searchTermControl.value},...this.filters.createFilterInput()},sort:this.sorts.createSortInput()}}),refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}static#e=this.\u0275fac=function(t){return new(t||Ge)};static#t=this.\u0275cmp=e.VBU({type:Ge,selectors:[["vdr-tax-list"]],features:[e.Vt3],decls:31,vars:45,consts:[["locationId","tax-category-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","tax-category-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","name",3,"heading","optional","sort"],["id","default-tax-category",3,"heading"],[3,"customField","sorts",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],[4,"ngIf"],[3,"customField","sorts"]],template:function(t,o){1&t&&(e.j41(0,"vdr-page-block")(1,"vdr-action-bar"),e.nrm(2,"vdr-ab-left"),e.j41(3,"vdr-ab-right"),e.nrm(4,"vdr-action-bar-items",0),e.DNE(5,ss,4,5,"a",1),e.nrm(6,"vdr-action-bar-dropdown-menu",0),e.k0s()()(),e.j41(7,"vdr-data-table-2",2),e.nI1(8,"async"),e.nI1(9,"async"),e.nI1(10,"async"),e.nI1(11,"async"),e.bIt("pageChange",function(r){return o.setPageNumber(r)})("itemsPerPageChange",function(r){return o.setItemsPerPage(r)})("visibleColumnsChange",function(r){return o.setVisibleColumns(r)}),e.nrm(12,"vdr-bulk-action-menu",3)(13,"vdr-dt2-search",4),e.nI1(14,"translate"),e.j41(15,"vdr-dt2-column",5),e.nI1(16,"translate"),e.DNE(17,rs,1,1,"ng-template"),e.k0s(),e.j41(18,"vdr-dt2-column",6),e.nI1(19,"translate"),e.DNE(20,ls,2,4,"ng-template"),e.k0s(),e.j41(21,"vdr-dt2-column",7),e.nI1(22,"translate"),e.DNE(23,ds,2,4,"ng-template"),e.k0s(),e.j41(24,"vdr-dt2-column",8),e.nI1(25,"translate"),e.DNE(26,cs,4,4,"ng-template"),e.k0s(),e.j41(27,"vdr-dt2-column",9),e.nI1(28,"translate"),e.DNE(29,us,1,1,"ng-template"),e.k0s(),e.DNE(30,ps,1,2,"vdr-dt2-custom-field-column",10),e.k0s()),2&t&&(e.R7$(5),e.Y8G("vdrIfPermissions",e.lJ4(44,is)),e.R7$(2),e.Y8G("id",o.dataTableListId)("items",e.bMT(8,24,o.items$))("itemsPerPage",e.bMT(9,26,o.itemsPerPage$))("totalItems",e.bMT(10,28,o.totalItems$))("currentPage",e.bMT(11,30,o.currentPage$))("filters",o.filters),e.R7$(5),e.Y8G("hostComponent",o)("selectionManager",o.selectionManager),e.R7$(),e.Y8G("searchTermControl",o.searchTermControl)("searchTermPlaceholder",e.bMT(14,32,"catalog.filter-by-name")),e.R7$(2),e.Y8G("heading",e.bMT(16,34,"common.id"))("hiddenByDefault",!0),e.R7$(3),e.Y8G("heading",e.bMT(19,36,"common.created-at"))("hiddenByDefault",!0)("sort",o.sorts.get("createdAt")),e.R7$(3),e.Y8G("heading",e.bMT(22,38,"common.updated-at"))("hiddenByDefault",!0)("sort",o.sorts.get("updatedAt")),e.R7$(3),e.Y8G("heading",e.bMT(25,40,"common.name"))("optional",!1)("sort",o.sorts.get("name")),e.R7$(3),e.Y8G("heading",e.bMT(28,42,"common.default-tax-category")),e.R7$(3),e.Y8G("ngForOf",o.customFields))},dependencies:[g.U4n,m.Sq,m.bT,k.Wk,u.nG,u.wL,u.TX,T.l,U.w,I.p,v.T,M.T,S.I,P.Y,L.E,O.T,C.e,m.Jj,f.D9,E.P],changeDetection:0})}var gs=c(764);function fs(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.create())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("disabled",!t.saveButtonEnabled()),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.create")," ")}}function _s(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.save())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("disabled",!t.saveButtonEnabled()),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.update")," ")}}function bs(i,n){if(1&i&&e.DNE(0,_s,3,4,"button",21),2&i){const t=e.XpG();e.Y8G("vdrIfPermissions",t.updatePermission)}}function Cs(i,n){if(1&i&&(e.j41(0,"vdr-card"),e.nrm(1,"vdr-page-entity-info",22),e.k0s()),2&i){const t=n.ngIf;e.R7$(),e.Y8G("entity",t)}}function vs(i,n){if(1&i&&(e.j41(0,"option",23),e.EFF(1),e.k0s()),2&i){const t=n.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function Ts(i,n){if(1&i&&(e.j41(0,"vdr-card",24),e.nI1(1,"translate"),e.nrm(2,"vdr-tabbed-custom-fields",25),e.k0s()),2&i){const t=e.XpG();e.Y8G("title",e.bMT(1,3,"common.custom-fields")),e.R7$(2),e.Y8G("customFields",t.customFields)("customFieldsFormGroup",t.detailForm.get("customFields"))}}const Is=h.J1`
    query GetTaxRateDetail($id: ID!) {
        taxRate(id: $id) {
            ...TaxRate
        }
    }
    ${s.QaU}
`;class Re extends s.wi7{constructor(n,t,o,a){super(),this.changeDetector=n,this.dataService=t,this.formBuilder=o,this.notificationService=a,this.customFields=this.getCustomFieldConfig("TaxRate"),this.detailForm=this.formBuilder.group({name:["",l.k0.required],enabled:[!0],value:[0,l.k0.required],taxCategoryId:["",l.k0.required],zoneId:["",l.k0.required],customerGroupId:[""],customFields:this.formBuilder.group((0,s.HCD)(this.customFields))}),this.updatePermission=[s.aXG.UpdateSettings,s.aXG.UpdateTaxRate]}ngOnInit(){this.init(),this.taxCategories$=this.dataService.settings.getTaxCategories({take:100}).mapSingle(n=>n.taxCategories.items)}ngOnDestroy(){this.destroy()}saveButtonEnabled(){return this.detailForm.dirty&&this.detailForm.valid}create(){if(!this.detailForm.dirty)return;const{name:n,enabled:t,value:o,taxCategoryId:a,zoneId:r,customerGroupId:p,customFields:y}=this.detailForm.value;if(!n||null==t||null==o||!a||!r)return;const _=this.detailForm.value,V={name:n,enabled:t,value:o,categoryId:a,zoneId:r,customerGroupId:_.customerGroupId,customFields:_.customFields};this.dataService.settings.createTaxRate(V).subscribe(Ye=>{this.notificationService.success((0,d.x)("common.notify-create-success"),{entity:"TaxRate"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",Ye.createTaxRate.id],{relativeTo:this.route})},Ye=>{this.notificationService.error((0,d.x)("common.notify-create-error"),{entity:"TaxRate"})})}save(){if(!this.detailForm.dirty)return;const n=this.detailForm.value;this.entity$.pipe((0,$.s)(1),(0,F.Z)(t=>{const o={id:t.id,name:n.name,enabled:n.enabled,value:n.value,categoryId:n.taxCategoryId,zoneId:n.zoneId,customerGroupId:n.customerGroupId,customFields:n.customFields};return this.dataService.settings.updateTaxRate(o)})).subscribe(t=>{this.notificationService.success((0,d.x)("common.notify-update-success"),{entity:"TaxRate"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},t=>{this.notificationService.error((0,d.x)("common.notify-update-error"),{entity:"TaxRate"})})}setFormValues(n,t){this.detailForm.patchValue({name:n.name,enabled:n.enabled,value:n.value,taxCategoryId:n.category?n.category.id:"",zoneId:n.zone?n.zone.id:"",customerGroupId:n.customerGroup?n.customerGroup.id:""}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),n)}static#e=this.\u0275fac=function(t){return new(t||Re)(e.rXU(e.gRc),e.rXU(s.uSP),e.rXU(l.ok),e.rXU(s.JEu))};static#t=this.\u0275cmp=e.VBU({type:Re,selectors:[["vdr-tax-rate-detail"]],features:[e.Vt3],decls:45,vars:44,consts:[["updateButton",""],["locationId","tax-rate-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],["for","enabled",3,"label"],["type","checkbox","clrToggle","","id","enabled","formControlName","enabled",3,"vdrDisabled"],[4,"ngIf"],[1,"form-grid"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","value",3,"label"],["suffix","%"],["id","value","type","number","step","0.1","formControlName","value",3,"readonly"],["for","taxCategoryId",3,"label"],["name","taxCategoryId","formControlName","taxCategoryId",3,"vdrDisabled"],[3,"value",4,"ngFor","ngForOf"],["for","zoneId",3,"label"],["name","zoneId","formControlName","zoneId",3,"vdrDisabled"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","tax-rate-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"],[3,"value"],["formGroupName","customFields",3,"title"],["entityName","TaxRate",3,"customFields","customFieldsFormGroup"]],template:function(t,o){if(1&t&&(e.j41(0,"vdr-page-block")(1,"vdr-action-bar"),e.nrm(2,"vdr-ab-left"),e.j41(3,"vdr-ab-right"),e.nrm(4,"vdr-action-bar-items",1),e.DNE(5,fs,3,4,"button",2),e.nI1(6,"async"),e.DNE(7,bs,1,1,"ng-template",null,0,e.C5r),e.nrm(9,"vdr-action-bar-dropdown-menu",1),e.k0s()()(),e.j41(10,"form",3)(11,"vdr-page-detail-layout")(12,"vdr-page-detail-sidebar")(13,"vdr-card")(14,"vdr-form-field",4),e.nI1(15,"translate"),e.j41(16,"clr-toggle-wrapper"),e.nrm(17,"input",5),e.nI1(18,"hasPermission"),e.k0s()()(),e.DNE(19,Cs,2,1,"vdr-card",6),e.nI1(20,"async"),e.k0s(),e.j41(21,"vdr-page-block")(22,"vdr-card")(23,"div",7)(24,"vdr-form-field",8),e.nI1(25,"translate"),e.nrm(26,"input",9),e.nI1(27,"hasPermission"),e.k0s(),e.j41(28,"vdr-form-field",10),e.nI1(29,"translate"),e.j41(30,"vdr-affixed-input",11),e.nrm(31,"input",12),e.nI1(32,"hasPermission"),e.k0s()(),e.j41(33,"vdr-form-field",13),e.nI1(34,"translate"),e.j41(35,"select",14),e.nI1(36,"hasPermission"),e.DNE(37,vs,2,2,"option",15),e.nI1(38,"async"),e.k0s()(),e.j41(39,"vdr-form-field",16),e.nI1(40,"translate"),e.nrm(41,"vdr-zone-selector",17),e.nI1(42,"hasPermission"),e.k0s()()(),e.DNE(43,Ts,3,5,"vdr-card",18),e.nrm(44,"vdr-custom-detail-component-host",19),e.k0s()()()),2&t){const a=e.sdS(8);e.R7$(5),e.Y8G("ngIf",e.bMT(6,18,o.isNew$))("ngIfElse",a),e.R7$(5),e.Y8G("formGroup",o.detailForm),e.R7$(4),e.Y8G("label",e.bMT(15,20,"common.enabled")),e.R7$(3),e.Y8G("vdrDisabled",!e.bMT(18,22,o.updatePermission)),e.R7$(2),e.Y8G("ngIf",e.bMT(20,24,o.entity$)),e.R7$(5),e.Y8G("label",e.bMT(25,26,"common.name")),e.R7$(2),e.Y8G("readonly",!e.bMT(27,28,o.updatePermission)),e.R7$(2),e.Y8G("label",e.bMT(29,30,"settings.rate")),e.R7$(3),e.Y8G("readonly",!e.bMT(32,32,o.updatePermission)),e.R7$(2),e.Y8G("label",e.bMT(34,34,"settings.tax-category")),e.R7$(2),e.Y8G("vdrDisabled",!e.bMT(36,36,o.updatePermission)),e.R7$(2),e.Y8G("ngForOf",e.bMT(38,38,o.taxCategories$)),e.R7$(2),e.Y8G("label",e.bMT(40,40,"settings.zone")),e.R7$(2),e.Y8G("vdrDisabled",!e.bMT(42,42,o.updatePermission)),e.R7$(2),e.Y8G("ngIf",o.customFields.length),e.R7$(),e.Y8G("entity$",o.entity$)("detailForm",o.detailForm)}},dependencies:[g.Jej,g.eAx,m.Sq,m.bT,l.qT,l.xH,l.y7,l.me,l.Q0,l.Zm,l.wz,l.BC,l.cb,l.j4,l.JD,l.$R,u.nG,u.wL,u.TX,T.l,gs.R,R.K,G.V,I.p,v.T,X.y,j.W,N.L,C.e,Y.E,A.c,B.e,D.i,ze.t,m.Jj,f.D9,x.E],changeDetection:0})}const Ct=(0,s.AfA)({location:"tax-rate-list",requiresPermission:i=>i.includes(s.aXG.DeleteSettings)||i.includes(s.aXG.DeleteTaxRate),getItemName:i=>i.name,bulkDelete:(i,n)=>i.settings.deleteTaxRates(n).pipe((0,b.T)(t=>t.deleteTaxRates))}),ys=()=>["CreateSettings","CreateTaxRate"],Fs=()=>["./","create"],ks=i=>["./",i];function Gs(i,n){1&i&&(e.j41(0,"a",15),e.nrm(1,"clr-icon",16),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&i&&(e.Y8G("routerLink",e.lJ4(4,Fs)),e.R7$(2),e.SpI(" ",e.bMT(3,2,"settings.create-new-tax-rate")," "))}function Rs(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",t.id," ")}}function Ds(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.createdAt,"short")," ")}}function $s(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.updatedAt,"short")," ")}}function Ms(i,n){if(1&i&&(e.j41(0,"a",17)(1,"span"),e.EFF(2),e.k0s(),e.nrm(3,"clr-icon",18),e.k0s()),2&i){const t=n.item;e.Y8G("routerLink",e.eq3(2,ks,t.id)),e.R7$(2),e.JRh(t.name)}}function Ss(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",t.category.name," ")}}function Ps(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",t.zone.name," ")}}function Ls(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",null==t.customerGroup?null:t.customerGroup.name," ")}}function Es(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",t.value,"% ")}}function js(i,n){1&i&&(e.j41(0,"vdr-chip",21),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"common.enabled")))}function Ns(i,n){1&i&&(e.j41(0,"vdr-chip",22),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"common.disabled")))}function Ys(i,n){if(1&i&&e.DNE(0,js,3,3,"vdr-chip",19)(1,Ns,3,3,"vdr-chip",20),2&i){const t=n.item;e.Y8G("ngIf",t.enabled),e.R7$(),e.Y8G("ngIf",!t.enabled)}}function As(i,n){if(1&i&&e.nrm(0,"vdr-dt2-custom-field-column",23),2&i){const t=n.$implicit,o=e.XpG();e.Y8G("customField",t)("sorts",o.sorts)}}const Bs=h.J1`
    query GetTaxRateList($options: TaxRateListOptions) {
        taxRates(options: $options) {
            items {
                ...TaxRate
            }
            totalItems
        }
    }
    ${s.QaU}
`;class De extends s.B8I{constructor(){super(),this.dataTableListId="tax-rate-list",this.customFields=this.getCustomFieldConfig("TaxRate"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilter({name:"name",type:{kind:"text"},label:(0,d.x)("common.name"),filterField:"name"}).addFilter({name:"enabled",type:{kind:"boolean"},label:(0,d.x)("common.enabled"),filterField:"enabled"}).addFilter({name:"value",type:{kind:"number"},label:(0,d.x)("common.value"),filterField:"value"}).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("createdAt","DESC").addSort({name:"createdAt"}).addSort({name:"updatedAt"}).addSort({name:"name"}).addSort({name:"value"}).addCustomFieldSorts(this.customFields).connectToRoute(this.route),super.configure({document:s.LU$,getItems:n=>n.taxRates,setVariables:(n,t)=>({options:{skip:n,take:t,filter:{name:{contains:this.searchTermControl.value},...this.filters.createFilterInput()},sort:this.sorts.createSortInput()}}),refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}static#e=this.\u0275fac=function(t){return new(t||De)};static#t=this.\u0275cmp=e.VBU({type:De,selectors:[["vdr-tax-rate-list"]],features:[e.Vt3],decls:43,vars:59,consts:[["locationId","tax-rate-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","tax-rate-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","name",3,"heading","optional","sort"],["id","tax-category",3,"heading"],["id","zone",3,"heading"],["id","customer-group",3,"heading","hiddenByDefault"],["id","tax-rate",3,"heading","sort"],["id","enabled",3,"heading"],[3,"customField","sorts",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],["colorType","success",4,"ngIf"],["colorType","warning",4,"ngIf"],["colorType","success"],["colorType","warning"],[3,"customField","sorts"]],template:function(t,o){1&t&&(e.j41(0,"vdr-page-block")(1,"vdr-action-bar"),e.nrm(2,"vdr-ab-left"),e.j41(3,"vdr-ab-right"),e.nrm(4,"vdr-action-bar-items",0),e.DNE(5,Gs,4,5,"a",1),e.nrm(6,"vdr-action-bar-dropdown-menu",0),e.k0s()()(),e.j41(7,"vdr-data-table-2",2),e.nI1(8,"async"),e.nI1(9,"async"),e.nI1(10,"async"),e.nI1(11,"async"),e.bIt("pageChange",function(r){return o.setPageNumber(r)})("itemsPerPageChange",function(r){return o.setItemsPerPage(r)})("visibleColumnsChange",function(r){return o.setVisibleColumns(r)}),e.nrm(12,"vdr-bulk-action-menu",3)(13,"vdr-dt2-search",4),e.nI1(14,"translate"),e.j41(15,"vdr-dt2-column",5),e.nI1(16,"translate"),e.DNE(17,Rs,1,1,"ng-template"),e.k0s(),e.j41(18,"vdr-dt2-column",6),e.nI1(19,"translate"),e.DNE(20,Ds,2,4,"ng-template"),e.k0s(),e.j41(21,"vdr-dt2-column",7),e.nI1(22,"translate"),e.DNE(23,$s,2,4,"ng-template"),e.k0s(),e.j41(24,"vdr-dt2-column",8),e.nI1(25,"translate"),e.DNE(26,Ms,4,4,"ng-template"),e.k0s(),e.j41(27,"vdr-dt2-column",9),e.nI1(28,"translate"),e.DNE(29,Ss,1,1,"ng-template"),e.k0s(),e.j41(30,"vdr-dt2-column",10),e.nI1(31,"translate"),e.DNE(32,Ps,1,1,"ng-template"),e.k0s(),e.j41(33,"vdr-dt2-column",11),e.nI1(34,"translate"),e.DNE(35,Ls,1,1,"ng-template"),e.k0s(),e.j41(36,"vdr-dt2-column",12),e.nI1(37,"translate"),e.DNE(38,Es,1,1,"ng-template"),e.k0s(),e.j41(39,"vdr-dt2-column",13),e.nI1(40,"translate"),e.DNE(41,Ys,2,2,"ng-template"),e.k0s(),e.DNE(42,As,1,2,"vdr-dt2-custom-field-column",14),e.k0s()),2&t&&(e.R7$(5),e.Y8G("vdrIfPermissions",e.lJ4(58,ys)),e.R7$(2),e.Y8G("id",o.dataTableListId)("items",e.bMT(8,30,o.items$))("itemsPerPage",e.bMT(9,32,o.itemsPerPage$))("totalItems",e.bMT(10,34,o.totalItems$))("currentPage",e.bMT(11,36,o.currentPage$))("filters",o.filters),e.R7$(5),e.Y8G("hostComponent",o)("selectionManager",o.selectionManager),e.R7$(),e.Y8G("searchTermControl",o.searchTermControl)("searchTermPlaceholder",e.bMT(14,38,"catalog.filter-by-name")),e.R7$(2),e.Y8G("heading",e.bMT(16,40,"common.id"))("hiddenByDefault",!0),e.R7$(3),e.Y8G("heading",e.bMT(19,42,"common.created-at"))("hiddenByDefault",!0)("sort",o.sorts.get("createdAt")),e.R7$(3),e.Y8G("heading",e.bMT(22,44,"common.updated-at"))("hiddenByDefault",!0)("sort",o.sorts.get("updatedAt")),e.R7$(3),e.Y8G("heading",e.bMT(25,46,"common.name"))("optional",!1)("sort",o.sorts.get("name")),e.R7$(3),e.Y8G("heading",e.bMT(28,48,"settings.tax-category")),e.R7$(3),e.Y8G("heading",e.bMT(31,50,"settings.zone")),e.R7$(3),e.Y8G("heading",e.bMT(34,52,"customer.customer-group"))("hiddenByDefault",!0),e.R7$(3),e.Y8G("heading",e.bMT(37,54,"settings.tax-rate"))("sort",o.sorts.get("value")),e.R7$(3),e.Y8G("heading",e.bMT(40,56,"common.enabled")),e.R7$(3),e.Y8G("ngForOf",o.customFields))},dependencies:[g.U4n,m.Sq,m.bT,k.Wk,u.nG,u.wL,u.TX,T.l,U.w,I.p,v.T,M.T,S.I,P.Y,L.E,O.T,C.e,m.Jj,f.D9,E.P],changeDetection:0})}class $e{constructor(n){this.dataService=n,this.testDataUpdated=!1,this.fetchTestResult$=new ee.B}ngOnInit(){this.activeChannel$=this.dataService.settings.getActiveChannel().mapStream(n=>n.activeChannel),this.testResult$=this.fetchTestResult$.pipe((0,te.n)(([n,t])=>{const o={shippingAddress:{...n,streetLine1:"test"},lines:t.map(a=>({productVariantId:a.id,quantity:a.quantity}))};return this.dataService.shippingMethod.testEligibleShippingMethods(o).mapSingle(a=>a.testEligibleShippingMethods)}))}setTestOrderLines(n){this.testOrderLines=n,this.testDataUpdated=!0}setTestAddress(n){this.testAddress=n,this.testDataUpdated=!0}allTestDataPresent(){return!!(this.testAddress&&this.testOrderLines&&this.testOrderLines.length)}runTest(){this.fetchTestResult$.next([this.testAddress,this.testOrderLines]),this.testDataUpdated=!1}static#e=this.\u0275fac=function(t){return new(t||$e)(e.rXU(s.uSP))};static#t=this.\u0275cmp=e.VBU({type:$e,selectors:[["vdr-test-shipping-methods"]],decls:9,vars:8,consts:[[1,"test-wrapper"],[1,""],[3,"orderLinesChange"],[3,"addressChange"],[1,"mt-1",3,"runTest","currencyCode","okToRun","testDataUpdated","testResult"]],template:function(t,o){if(1&t&&(e.j41(0,"vdr-page-block")(1,"div",0)(2,"div",1)(3,"vdr-test-order-builder",2),e.bIt("orderLinesChange",function(r){return o.setTestOrderLines(r)}),e.k0s()(),e.j41(4,"div",1)(5,"vdr-test-address-form",3),e.bIt("addressChange",function(r){return o.setTestAddress(r)}),e.k0s(),e.j41(6,"vdr-shipping-eligibility-test-result",4),e.nI1(7,"async"),e.nI1(8,"async"),e.bIt("runTest",function(){return o.runTest()}),e.k0s()()()()),2&t){let a;e.R7$(6),e.Y8G("currencyCode",null==(a=e.bMT(7,4,o.activeChannel$))?null:a.currencyCode)("okToRun",o.allTestDataPresent())("testDataUpdated",o.testDataUpdated)("testResult",e.bMT(8,6,o.testResult$))}},dependencies:[C.e,K,W,Ce,m.Jj],styles:[".test-wrapper[_ngcontent-%COMP%]{display:flex;width:100%;gap:var(--space-unit)}.test-wrapper[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1}@media screen and (max-width: 992px){.test-wrapper[_ngcontent-%COMP%]{flex-direction:column}}"],changeDetection:0})}function xs(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",10),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.create())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("disabled",!t.saveButtonEnabled()),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.create")," ")}}function Os(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",10),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.save())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("disabled",!t.saveButtonEnabled()),e.R7$(),e.SpI(" ",e.bMT(2,2,"common.update")," ")}}function Vs(i,n){if(1&i&&e.DNE(0,Os,3,4,"button",11),2&i){const t=e.XpG();e.Y8G("vdrIfPermissions",t.updatePermission)}}function Xs(i,n){if(1&i&&(e.j41(0,"vdr-card"),e.nrm(1,"vdr-page-entity-info",12),e.k0s()),2&i){const t=n.ngIf;e.R7$(),e.Y8G("entity",t)}}function Us(i,n){if(1&i&&(e.j41(0,"vdr-card",13),e.nI1(1,"translate"),e.nrm(2,"vdr-tabbed-custom-fields",14),e.k0s()),2&i){const t=e.XpG();e.Y8G("title",e.bMT(1,3,"common.custom-fields")),e.R7$(2),e.Y8G("customFields",t.customFields)("customFieldsFormGroup",t.detailForm.get("customFields"))}}const ws=h.J1`
    query GetZoneDetail($id: ID!) {
        zone(id: $id) {
            ...ZoneDetail
        }
    }
    fragment ZoneDetail on Zone {
        id
        createdAt
        updatedAt
        name
    }
`;class Me extends s.wi7{constructor(n,t,o,a){super(),this.changeDetector=n,this.dataService=t,this.formBuilder=o,this.notificationService=a,this.customFields=this.getCustomFieldConfig("Zone"),this.detailForm=this.formBuilder.group({name:["",l.k0.required],customFields:this.formBuilder.group((0,s.HCD)(this.customFields))}),this.updatePermission=[s.aXG.UpdateSettings,s.aXG.UpdateZone]}ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}saveButtonEnabled(){return this.detailForm.dirty&&this.detailForm.valid}create(){if(!this.detailForm.dirty)return;const{name:n,customFields:t}=this.detailForm.value;if(!n)return;const o={name:n,customFields:t};this.dataService.settings.createZone(o).subscribe(a=>{this.notificationService.success((0,d.x)("common.notify-create-success"),{entity:"Zone"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",a.createZone.id],{relativeTo:this.route})},a=>{this.notificationService.error((0,d.x)("common.notify-create-error"),{entity:"Zone"})})}save(){if(!this.detailForm.dirty)return;const n=this.detailForm.value;this.entity$.pipe((0,$.s)(1),(0,F.Z)(t=>{const o={id:t.id,name:n.name,customFields:n.customFields};return this.dataService.settings.updateZone(o)})).subscribe(t=>{this.notificationService.success((0,d.x)("common.notify-update-success"),{entity:"Zone"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},t=>{this.notificationService.error((0,d.x)("common.notify-update-error"),{entity:"Zone"})})}setFormValues(n,t){this.detailForm.patchValue({name:n.name}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),n)}static#e=this.\u0275fac=function(t){return new(t||Me)(e.rXU(e.gRc),e.rXU(s.uSP),e.rXU(l.ok),e.rXU(s.JEu))};static#t=this.\u0275cmp=e.VBU({type:Me,selectors:[["vdr-zone-detail"]],features:[e.Vt3],decls:24,vars:17,consts:[["updateButton",""],["locationId","zone-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],[4,"ngIf"],[1,"form-grid"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","zone-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"],["formGroupName","customFields",3,"title"],["entityName","Zone",3,"customFields","customFieldsFormGroup"]],template:function(t,o){if(1&t&&(e.j41(0,"vdr-page-block")(1,"vdr-action-bar"),e.nrm(2,"vdr-ab-left"),e.j41(3,"vdr-ab-right"),e.nrm(4,"vdr-action-bar-items",1),e.DNE(5,xs,3,4,"button",2),e.nI1(6,"async"),e.DNE(7,Vs,1,1,"ng-template",null,0,e.C5r),e.nrm(9,"vdr-action-bar-dropdown-menu",1),e.k0s()()(),e.j41(10,"form",3)(11,"vdr-page-detail-layout")(12,"vdr-page-detail-sidebar"),e.DNE(13,Xs,2,1,"vdr-card",4),e.nI1(14,"async"),e.k0s(),e.j41(15,"vdr-page-block")(16,"vdr-card")(17,"div",5)(18,"vdr-form-field",6),e.nI1(19,"translate"),e.nrm(20,"input",7),e.nI1(21,"hasPermission"),e.k0s()()(),e.DNE(22,Us,3,5,"vdr-card",8),e.nrm(23,"vdr-custom-detail-component-host",9),e.k0s()()()),2&t){const a=e.sdS(8);e.R7$(5),e.Y8G("ngIf",e.bMT(6,9,o.isNew$))("ngIfElse",a),e.R7$(5),e.Y8G("formGroup",o.detailForm),e.R7$(3),e.Y8G("ngIf",e.bMT(14,11,o.entity$)),e.R7$(5),e.Y8G("label",e.bMT(19,13,"common.name")),e.R7$(2),e.Y8G("readonly",!e.bMT(21,15,o.updatePermission)),e.R7$(2),e.Y8G("ngIf",o.customFields.length),e.R7$(),e.Y8G("entity$",o.entity$)("detailForm",o.detailForm)}},dependencies:[m.bT,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,l.$R,u.nG,u.wL,u.TX,T.l,R.K,G.V,I.p,v.T,j.W,N.L,C.e,Y.E,A.c,B.e,D.i,m.Jj,f.D9,x.E],changeDetection:0})}const vt=(0,s.AfA)({location:"zone-list",requiresPermission:i=>i.includes(s.aXG.DeleteSettings)||i.includes(s.aXG.DeleteZone),getItemName:i=>i.name,bulkDelete:(i,n)=>i.settings.deleteZones(n).pipe((0,b.T)(t=>t.deleteZones))});var Js=c(3867),Zs=c(4498),Hs=c(6107),zs=c(2086),Tt=c(5316);const qs=()=>["CreateSettings","CreateZone"],Ks=()=>["./","create"],It=i=>["./",i],Ws=i=>({contents:i}),Qs=i=>({zoneName:i});function er(i,n){1&i&&(e.j41(0,"a",6),e.nrm(1,"clr-icon",7),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&i&&(e.Y8G("routerLink",e.lJ4(4,Ks)),e.R7$(2),e.SpI(" ",e.bMT(3,2,"settings.create-new-zone")," "))}function tr(i,n){if(1&i&&e.EFF(0),2&i){const t=n.item;e.SpI(" ",t.id," ")}}function nr(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.createdAt,"short")," ")}}function ir(i,n){if(1&i&&(e.EFF(0),e.nI1(1,"localeDate")),2&i){const t=n.item;e.SpI(" ",e.i5U(1,1,t.updatedAt,"short")," ")}}function or(i,n){if(1&i&&(e.j41(0,"a",17)(1,"span"),e.EFF(2),e.k0s(),e.nrm(3,"clr-icon",18),e.k0s()),2&i){const t=n.item;e.Y8G("routerLink",e.eq3(2,It,t.id)),e.R7$(2),e.JRh(t.name)}}function ar(i,n){if(1&i&&(e.j41(0,"a",19)(1,"span"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.nrm(4,"clr-icon",20),e.k0s()),2&i){const t=n.item;e.Y8G("routerLink",e.eq3(6,It,e.eq3(4,Ws,t.id))),e.R7$(2),e.JRh(e.bMT(3,2,"settings.view-zone-members"))}}function sr(i,n){if(1&i&&e.nrm(0,"vdr-dt2-custom-field-column",21),2&i){const t=n.$implicit,o=e.XpG(2);e.Y8G("customField",t)("sort",o.sorts)}}function rr(i,n){if(1&i){const t=e.RV6();e.j41(0,"vdr-data-table-2",8),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async"),e.nI1(4,"async"),e.nI1(5,"async"),e.bIt("pageChange",function(a){e.eBV(t);const r=e.XpG();return e.Njj(r.setPageNumber(a))})("itemsPerPageChange",function(a){e.eBV(t);const r=e.XpG();return e.Njj(r.setItemsPerPage(a))})("visibleColumnsChange",function(a){e.eBV(t);const r=e.XpG();return e.Njj(r.setVisibleColumns(a))}),e.nrm(6,"vdr-bulk-action-menu",9)(7,"vdr-dt2-search",10),e.nI1(8,"translate"),e.j41(9,"vdr-dt2-column",11),e.nI1(10,"translate"),e.DNE(11,tr,1,1,"ng-template"),e.k0s(),e.j41(12,"vdr-dt2-column",12),e.nI1(13,"translate"),e.DNE(14,nr,2,4,"ng-template"),e.k0s(),e.j41(15,"vdr-dt2-column",13),e.nI1(16,"translate"),e.DNE(17,ir,2,4,"ng-template"),e.k0s(),e.j41(18,"vdr-dt2-column",14),e.nI1(19,"translate"),e.DNE(20,or,4,4,"ng-template"),e.k0s(),e.j41(21,"vdr-dt2-column",15),e.nI1(22,"translate"),e.DNE(23,ar,5,8,"ng-template"),e.k0s(),e.DNE(24,sr,1,2,"vdr-dt2-custom-field-column",16),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("id",t.dataTableListId)("items",e.bMT(1,25,t.items$))("itemsPerPage",e.bMT(2,27,t.itemsPerPage$))("totalItems",e.bMT(3,29,t.totalItems$))("currentPage",e.bMT(4,31,t.currentPage$))("filters",t.filters)("activeIndex",e.bMT(5,33,t.activeIndex$)),e.R7$(6),e.Y8G("hostComponent",t)("selectionManager",t.selectionManager),e.R7$(),e.Y8G("searchTermControl",t.searchTermControl)("searchTermPlaceholder",e.bMT(8,35,"common.search-by-name")),e.R7$(2),e.Y8G("heading",e.bMT(10,37,"common.id"))("hiddenByDefault",!0),e.R7$(3),e.Y8G("heading",e.bMT(13,39,"common.created-at"))("hiddenByDefault",!0)("sort",t.sorts.get("createdAt")),e.R7$(3),e.Y8G("heading",e.bMT(16,41,"common.updated-at"))("hiddenByDefault",!0)("sort",t.sorts.get("updatedAt")),e.R7$(3),e.Y8G("heading",e.bMT(19,43,"common.name"))("optional",!1)("sort",t.sorts.get("name")),e.R7$(3),e.Y8G("heading",e.bMT(22,45,"common.view-contents"))("optional",!1),e.R7$(3),e.Y8G("ngForOf",t.customFields)}}function lr(i,n){if(1&i){const t=e.RV6();e.j41(0,"vdr-zone-member-list",25),e.bIt("selectionChange",function(a){e.eBV(t);const r=e.XpG(3);return e.Njj(r.selectedMemberIds=a)}),e.k0s()}if(2&i){const t=n.ngIf,o=e.XpG(3);e.Y8G("selectedMemberIds",o.selectedMemberIds)("activeZone",t)}}function dr(i,n){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"button",23),e.bIt("click",function(){const a=e.eBV(t).ngIf,r=e.XpG(2);return e.Njj(r.addToZone(a))}),e.nrm(2,"clr-icon",7),e.j41(3,"span"),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.DNE(6,lr,1,2,"vdr-zone-member-list",24),e.nI1(7,"async"),e.bVm()}if(2&i){const t=n.ngIf,o=e.XpG(2);e.R7$(4),e.JRh(e.i5U(5,2,"settings.add-countries-to-zone",e.eq3(7,Qs,t.name))),e.R7$(2),e.Y8G("ngIf",e.bMT(7,5,o.activeZone$))}}function cr(i,n){if(1&i&&(e.DNE(0,dr,8,9,"ng-container",22),e.nI1(1,"async")),2&i){const t=e.XpG();e.Y8G("ngIf",e.bMT(1,1,t.activeZone$))}}const mr=h.J1`
    query GetZoneList($options: ZoneListOptions) {
        zones(options: $options) {
            items {
                ...ZoneListItem
            }
            totalItems
        }
    }
    fragment ZoneListItem on Zone {
        id
        createdAt
        updatedAt
        name
    }
`;class Se extends s.B8I{constructor(n,t,o){super(),this.dataService=n,this.notificationService=t,this.modalService=o,this.dataTableListId="zone-list",this.selectedMemberIds=[],this.customFields=this.serverConfigService.getCustomFieldsFor("Zone"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilter({name:"name",type:{kind:"text"},label:(0,d.x)("common.name"),filterField:"name"}).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("createdAt","DESC").addSort({name:"createdAt"}).addSort({name:"updatedAt"}).addSort({name:"name"}).addCustomFieldSorts(this.customFields).connectToRoute(this.route),super.configure({document:s.mkH,getItems:a=>a.zones,setVariables:(a,r)=>({options:{skip:a,take:r,filter:{name:{contains:this.searchTermControl.value},...this.filters.createFilterInput()},filterOperator:this.searchTermControl.value?s.umn.OR:s.umn.AND,sort:this.sorts.createSortInput()}}),refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}ngOnInit(){super.ngOnInit();const n=this.route.paramMap.pipe((0,b.T)(t=>t.get("contents")),(0,Zs.F)(),(0,Qe.M)(()=>this.selectedMemberIds=[]));this.activeZone$=(0,z.z)(this.items$,n).pipe((0,b.T)(([t,o])=>{if(o)return t.find(a=>a.id===o)})),this.activeIndex$=(0,z.z)(this.items$,n).pipe((0,b.T)(([t,o])=>o?t.findIndex(a=>a.id===o):-1))}setLanguage(n){this.dataService.client.setContentLanguage(n).subscribe()}closeMembers(){const n={...this.route.snapshot.params};delete n.contents,this.router.navigate(["./",n],{relativeTo:this.route,queryParamsHandling:"preserve"})}addToZone(n){this.modalService.fromComponent(oe,{locals:{zoneName:n.name,zoneId:n.id},size:"md"}).pipe((0,te.n)(t=>t?this.dataService.settings.addMembersToZone(n.id,t).pipe((0,Hs.u)(t)):Js.w)).subscribe({next:t=>{this.notificationService.success((0,d.x)("settings.add-countries-to-zone-success"),{countryCount:t.length,zoneName:n.name}),this.refreshMemberList()},error:t=>{this.notificationService.error(t)}})}refreshMemberList(){this.zoneMemberList?.refresh()}static#e=this.\u0275fac=function(t){return new(t||Se)(e.rXU(s.uSP),e.rXU(s.JEu),e.rXU(s.Bg8))};static#t=this.\u0275cmp=e.VBU({type:Se,selectors:[["vdr-zone-list"]],viewQuery:function(t,o){if(1&t&&e.GBs(w,5),2&t){let a;e.mGM(a=e.lsd())&&(o.zoneMemberList=a.first)}},features:[e.Vt3],decls:15,vars:14,consts:[[3,"languageCodeChange","availableLanguageCodes","currentLanguageCode"],["locationId","zone-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"closeClicked","rightPanelOpen"],["vdrSplitViewLeft",""],["vdrSplitViewRight","",3,"splitViewTitle"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters","activeIndex"],["locationId","zone-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","name",3,"heading","optional","sort"],["id","view-contents",3,"heading","optional"],[3,"customField","sort",4,"ngFor","ngForOf"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],["queryParamsHandling","preserve",1,"button-small","bg-weight-150",3,"routerLink"],["shape","file-group"],[3,"customField","sort"],[4,"ngIf"],[1,"button-ghost","ml-4",3,"click"],["locationId","zone-members-list",3,"selectedMemberIds","activeZone","selectionChange",4,"ngIf"],["locationId","zone-members-list",3,"selectionChange","selectedMemberIds","activeZone"]],template:function(t,o){if(1&t&&(e.j41(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left")(3,"vdr-language-selector",0),e.nI1(4,"async"),e.nI1(5,"async"),e.bIt("languageCodeChange",function(r){return o.setLanguage(r)}),e.k0s()(),e.j41(6,"vdr-ab-right"),e.nrm(7,"vdr-action-bar-items",1),e.DNE(8,er,4,5,"a",2),e.nrm(9,"vdr-action-bar-dropdown-menu",1),e.k0s()()(),e.j41(10,"vdr-split-view",3),e.nI1(11,"async"),e.bIt("closeClicked",function(){return o.closeMembers()}),e.DNE(12,rr,25,47,"ng-template",4)(13,cr,2,3,"ng-template",5),e.nI1(14,"async"),e.k0s()),2&t){let a;e.R7$(3),e.Y8G("availableLanguageCodes",e.bMT(4,5,o.availableLanguages$))("currentLanguageCode",e.bMT(5,7,o.contentLanguage$)),e.R7$(5),e.Y8G("vdrIfPermissions",e.lJ4(13,qs)),e.R7$(2),e.Y8G("rightPanelOpen",e.bMT(11,9,o.activeZone$)),e.R7$(3),e.Y8G("splitViewTitle",null==(a=e.bMT(14,11,o.activeZone$))?null:a.name)}},dependencies:[g.U4n,m.Sq,m.bT,k.Wk,u.nG,u.wL,u.TX,T.l,Z.t,I.p,v.T,M.T,S.I,P.Y,L.E,O.T,zs.l,Tt.w,Tt.P,C.e,w,m.Jj,f.D9,E.P],styles:[".zone-wrapper[_ngcontent-%COMP%]{display:flex;height:calc(100% - 50px)}.zone-wrapper[_ngcontent-%COMP%]   .zone-list[_ngcontent-%COMP%]{flex:1;overflow:auto;margin-top:0}.zone-wrapper[_ngcontent-%COMP%]   .zone-list[_ngcontent-%COMP%]   tr.active[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}.zone-members[_ngcontent-%COMP%]{height:100%;width:0;opacity:0;visibility:hidden;overflow:auto;transition:width .3s,opacity .2s .3s,visibility 0s .3s}.zone-members.expanded[_ngcontent-%COMP%]{width:40vw;visibility:visible;opacity:1;padding-inline-start:12px}.zone-members[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin:0;background:none;border:none;cursor:pointer}.zone-members[_ngcontent-%COMP%]     table.table{margin-top:0}.zone-members[_ngcontent-%COMP%]     table.table th{top:0}.zone-members[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"],changeDetection:0})}const yt={location:"zone-members-list",label:(0,d.x)("settings.remove-from-zone"),icon:"trash",iconClass:"is-danger",requiresPermission:s.aXG.UpdateCustomerGroup,onClick:({injector:i,selection:n,hostComponent:t,clearSelection:o})=>{const a=i.get(s.uSP),r=i.get(s.JEu),p=t.activeZone,y=n.map(_=>_.id);a.settings.removeMembersFromZone(p.id,y).subscribe({complete:()=>{r.success((0,d.x)("settings.remove-countries-from-zone-success"),{countryCount:y.length,zoneName:p.name}),t.refresh(),o()}})}};class Pe extends s.fJp{constructor(n,t){super(n,{__typename:"Administrator",id:"",createdAt:"",updatedAt:"",emailAddress:"",firstName:"",lastName:"",user:{roles:[]}},o=>t.administrator.getActiveAdministrator().mapStream(a=>a.activeAdministrator))}static#e=this.\u0275fac=function(t){return new(t||Pe)(e.KVO(k.Ix),e.KVO(s.uSP))};static#t=this.\u0275prov=e.jDH({token:Pe,factory:Pe.\u0275fac,providedIn:"root"})}const Ft=i=>[{path:"profile",component:s.H1b,data:{breadcrumb:(0,d.x)("breadcrumb.profile")},resolve:{detail:()=>(0,e.WQX)(s.uSP).query(s.e6W).mapSingle(n=>({entity:(0,Le.of)(n.activeAdministrator)}))},children:i.getPageTabRoutes("profile")},{path:"administrators",component:s.H1b,data:{locationId:"administrator-list",breadcrumb:(0,d.x)("breadcrumb.administrators")},children:i.getPageTabRoutes("administrator-list")},{path:"administrators/:id",component:s.H1b,data:{locationId:"administrator-detail",breadcrumb:{label:(0,d.x)("breadcrumb.administrators"),link:["../","administrators"]}},children:i.getPageTabRoutes("administrator-detail")},{path:"channels",component:s.H1b,data:{locationId:"channel-list",breadcrumb:(0,d.x)("breadcrumb.channels")},children:i.getPageTabRoutes("channel-list")},{path:"channels/:id",component:s.H1b,data:{locationId:"channel-detail",breadcrumb:{label:(0,d.x)("breadcrumb.channels"),link:["../","channels"]}},children:i.getPageTabRoutes("channel-detail")},{path:"stock-locations",component:s.H1b,data:{locationId:"stock-location-list",breadcrumb:(0,d.x)("breadcrumb.stock-locations")},children:i.getPageTabRoutes("stock-location-list")},{path:"stock-locations/:id",component:s.H1b,data:{locationId:"stock-location-detail",breadcrumb:{label:(0,d.x)("breadcrumb.stock-locations"),link:["../","stock-locations"]}},children:i.getPageTabRoutes("stock-location-detail")},{path:"sellers",component:s.H1b,data:{locationId:"seller-list",breadcrumb:(0,d.x)("breadcrumb.sellers")},children:i.getPageTabRoutes("seller-list")},{path:"sellers/:id",component:s.H1b,data:{locationId:"seller-detail",breadcrumb:{label:(0,d.x)("breadcrumb.sellers"),link:["../","sellers"]}},children:i.getPageTabRoutes("seller-detail")},{path:"roles",component:s.H1b,data:{locationId:"role-list",breadcrumb:(0,d.x)("breadcrumb.roles")},children:i.getPageTabRoutes("role-list")},{path:"roles/:id",component:s.H1b,data:{locationId:"role-detail",breadcrumb:{label:(0,d.x)("breadcrumb.roles"),link:["../","roles"]}},children:i.getPageTabRoutes("role-detail")},{path:"tax-categories",component:s.H1b,data:{locationId:"tax-category-list",breadcrumb:(0,d.x)("breadcrumb.tax-categories")},children:i.getPageTabRoutes("tax-category-list")},{path:"tax-categories/:id",component:s.H1b,data:{locationId:"tax-category-detail",breadcrumb:{label:(0,d.x)("breadcrumb.tax-categories"),link:["../","tax-categories"]}},children:i.getPageTabRoutes("tax-category-detail")},{path:"tax-rates",component:s.H1b,data:{locationId:"tax-rate-list",breadcrumb:(0,d.x)("breadcrumb.tax-rates")},children:i.getPageTabRoutes("tax-rate-list")},{path:"tax-rates/:id",component:s.H1b,data:{locationId:"tax-rate-detail",breadcrumb:{label:(0,d.x)("breadcrumb.tax-rates"),link:["../","tax-rates"]}},children:i.getPageTabRoutes("tax-rate-detail")},{path:"countries",component:s.H1b,data:{locationId:"country-list",breadcrumb:(0,d.x)("breadcrumb.countries")},children:i.getPageTabRoutes("country-list")},{path:"countries/:id",component:s.H1b,data:{locationId:"country-detail",breadcrumb:{label:(0,d.x)("breadcrumb.countries"),link:["../","countries"]}},children:i.getPageTabRoutes("country-detail")},{path:"zones",component:s.H1b,data:{locationId:"zone-list",breadcrumb:(0,d.x)("breadcrumb.zones")},children:i.getPageTabRoutes("zone-list")},{path:"zones/:id",component:s.H1b,data:{locationId:"zone-detail",breadcrumb:{label:(0,d.x)("breadcrumb.zones"),link:["../","zones"]}},children:i.getPageTabRoutes("zone-detail")},{path:"shipping-methods",component:s.H1b,data:{locationId:"shipping-method-list",breadcrumb:(0,d.x)("breadcrumb.shipping-methods")},children:i.getPageTabRoutes("shipping-method-list")},{path:"shipping-methods/:id",component:s.H1b,data:{locationId:"shipping-method-detail",breadcrumb:{label:(0,d.x)("breadcrumb.shipping-methods"),link:["../","shipping-methods"]}},children:i.getPageTabRoutes("shipping-method-detail")},{path:"payment-methods",component:s.H1b,data:{locationId:"payment-method-list",breadcrumb:(0,d.x)("breadcrumb.payment-methods")},children:i.getPageTabRoutes("payment-method-list")},{path:"payment-methods/:id",component:s.H1b,data:{locationId:"payment-method-detail",breadcrumb:{label:(0,d.x)("breadcrumb.payment-methods"),link:["../","payment-methods"]}},children:i.getPageTabRoutes("payment-method-detail")},{path:"global-settings",component:s.H1b,data:{breadcrumb:(0,d.x)("breadcrumb.global-settings"),locationId:"global-setting-detail"},resolve:{detail:()=>(0,e.WQX)(s.uSP).query(s.pcO).mapSingle(n=>({entity:(0,Le.of)(n.globalSettings)}))},children:i.getPageTabRoutes("global-setting-detail")}];class Q{static#e=this.hasRegisteredTabsAndBulkActions=!1;constructor(n,t){Q.hasRegisteredTabsAndBulkActions||(n.registerBulkAction(dt),n.registerBulkAction(Ke),n.registerBulkAction(He),n.registerBulkAction(lt),n.registerBulkAction(pt),n.registerBulkAction(ht),n.registerBulkAction(ut),n.registerBulkAction(st),n.registerBulkAction(rt),n.registerBulkAction(at),n.registerBulkAction(bt),n.registerBulkAction(Ct),n.registerBulkAction(We),n.registerBulkAction(vt),n.registerBulkAction(yt),n.registerBulkAction(ft),n.registerBulkAction(_t),n.registerBulkAction(gt),t.registerPageTab({priority:0,location:"seller-list",tab:(0,d.x)("breadcrumb.sellers"),route:"",component:be}),t.registerPageTab({priority:0,location:"seller-detail",tab:(0,d.x)("settings.seller"),route:"",component:(0,s.HL6)({component:_e,query:s.aqc,entityKey:"seller",getBreadcrumbs:o=>[{label:o?o.name:(0,d.x)("settings.create-new-seller"),link:[o?.id]}]})}),t.registerPageTab({priority:0,location:"channel-list",tab:(0,d.x)("breadcrumb.channels"),route:"",component:le}),t.registerPageTab({priority:0,location:"channel-detail",tab:(0,d.x)("settings.channel"),route:"",component:(0,s.HL6)({component:re,query:s.YwZ,entityKey:"channel",getBreadcrumbs:o=>[{label:o?o.code===J.ky?"common.default-channel":o.code:(0,d.x)("settings.create-new-channel"),link:[o?.id]}]})}),t.registerPageTab({priority:0,location:"administrator-list",tab:(0,d.x)("breadcrumb.administrators"),route:"",component:se}),t.registerPageTab({priority:0,location:"administrator-detail",tab:(0,d.x)("settings.administrator"),route:"",component:(0,s.HL6)({component:ae,query:s._yn,entityKey:"administrator",getBreadcrumbs:o=>[{label:o?`${o.firstName} ${o.lastName}`:(0,d.x)("admin.create-new-administrator"),link:[o?.id]}]})}),t.registerPageTab({priority:0,location:"role-list",tab:(0,d.x)("breadcrumb.roles"),route:"",component:fe}),t.registerPageTab({priority:0,location:"role-detail",tab:(0,d.x)("settings.role"),route:"",component:(0,s.HL6)({component:ge,query:s.bci,entityKey:"role",getBreadcrumbs:o=>[{label:o?o.description:(0,d.x)("settings.create-new-role"),link:[o?.id]}]})}),t.registerPageTab({priority:0,location:"shipping-method-list",tab:(0,d.x)("breadcrumb.shipping-methods"),route:"",component:Ie}),t.registerPageTab({priority:0,location:"shipping-method-detail",tab:(0,d.x)("settings.shipping-method"),route:"",component:(0,s.HL6)({component:Te,query:s.iEl,entityKey:"shippingMethod",getBreadcrumbs:o=>[{label:o?o.name:(0,d.x)("settings.create-new-shipping-method"),link:[o?.id]}]})}),t.registerPageTab({priority:0,location:"shipping-method-list",tab:(0,d.x)("settings.test-shipping-methods"),route:"test",component:$e}),t.registerPageTab({priority:0,location:"payment-method-list",tab:(0,d.x)("breadcrumb.payment-methods"),route:"",component:pe}),t.registerPageTab({priority:0,location:"payment-method-detail",tab:(0,d.x)("settings.payment-method"),route:"",component:(0,s.HL6)({component:ue,query:s.y$X,entityKey:"paymentMethod",getBreadcrumbs:o=>[{label:o?o.name:(0,d.x)("settings.create-new-payment-method"),link:[o?.id]}]})}),t.registerPageTab({priority:0,location:"tax-category-list",tab:(0,d.x)("breadcrumb.tax-categories"),route:"",component:Ge}),t.registerPageTab({priority:0,location:"tax-category-detail",tab:(0,d.x)("settings.tax-category"),route:"",component:(0,s.HL6)({component:ke,query:s.mEt,entityKey:"taxCategory",getBreadcrumbs:o=>[{label:o?o.name:(0,d.x)("settings.create-new-tax-category"),link:[o?.id]}]})}),t.registerPageTab({priority:0,location:"tax-rate-list",tab:(0,d.x)("breadcrumb.tax-rates"),route:"",component:De}),t.registerPageTab({priority:0,location:"tax-rate-detail",tab:(0,d.x)("settings.tax-rate"),route:"",component:(0,s.HL6)({component:Re,query:s.AK$,entityKey:"taxRate",getBreadcrumbs:o=>[{label:o?o.name:(0,d.x)("settings.create-new-tax-rate"),link:[o?.id]}]})}),t.registerPageTab({priority:0,location:"country-list",tab:(0,d.x)("breadcrumb.countries"),route:"",component:ce}),t.registerPageTab({priority:0,location:"country-detail",tab:(0,d.x)("settings.country"),route:"",component:(0,s.HL6)({component:de,query:s.VRr,entityKey:"country",getBreadcrumbs:o=>[{label:o?o.name:(0,d.x)("settings.create-new-country"),link:[o?.id]}]})}),t.registerPageTab({priority:0,location:"zone-list",tab:(0,d.x)("breadcrumb.zones"),route:"",component:Se}),t.registerPageTab({priority:0,location:"zone-detail",tab:(0,d.x)("settings.zone"),route:"",component:(0,s.HL6)({component:Me,query:s.FOq,entityKey:"zone",getBreadcrumbs:o=>[{label:o?o.name:(0,d.x)("settings.create-new-zone"),link:[o?.id]}]})}),t.registerPageTab({priority:0,location:"global-setting-detail",tab:(0,d.x)("breadcrumb.global-settings"),route:"",component:me}),t.registerPageTab({priority:0,location:"profile",tab:(0,d.x)("breadcrumb.profile"),route:"",component:he}),t.registerPageTab({priority:0,location:"stock-location-list",tab:(0,d.x)("catalog.stock-locations"),route:"",component:Fe}),t.registerPageTab({priority:0,location:"stock-location-detail",tab:(0,d.x)("catalog.stock-location"),route:"",component:(0,s.HL6)({component:ye,query:s.Yd9,entityKey:"stockLocation",getBreadcrumbs:o=>[{label:o?o.name:(0,d.x)("catalog.create-new-stock-location"),link:[o?.id]}]})}),Q.hasRegisteredTabsAndBulkActions=!0)}static#t=this.\u0275fac=function(t){return new(t||Q)(e.KVO(s.HCh),e.KVO(s.bPm))};static#n=this.\u0275mod=e.$C({type:Q});static#i=this.\u0275inj=e.G2t({providers:[{provide:k.bw,useFactory:n=>Ft(n),multi:!0,deps:[s.bPm]}],imports:[s.GgS,k.iI.forChild([])]})}}}]);
//# sourceMappingURL=848.3d74959f603b4528.js.map